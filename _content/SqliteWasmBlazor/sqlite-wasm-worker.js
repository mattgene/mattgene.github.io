var yr=(()=>{var _=import.meta.url;return function(a={}){var p,r=a,E,T,K=new Promise((e,t)=>{E=e,T=t}),ye=typeof window=="object",me=typeof importScripts=="function",Ce=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",$e=!ye&&!Ce&&!me;let ce=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,ce.debugModule("globalThis.location =",globalThis.location);var ke=Object.assign({},r),Be=[],Ne="./this.program",at=(e,t)=>{throw t},He="";function it(e){return r.locateFile?r.locateFile(e,He):He+e}var Je,At;(ye||me)&&(me?He=self.location.href:typeof document<"u"&&document.currentScript&&(He=document.currentScript.src),_&&(He=_),He.startsWith("blob:")?He="":He=He.substr(0,He.replace(/[?#].*/,"").lastIndexOf("/")+1),me&&(At=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Je=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var It=r.print||console.log.bind(console),Re=r.printErr||console.error.bind(console);Object.assign(r,ke),ke=null,r.arguments&&(Be=r.arguments),r.thisProgram&&(Ne=r.thisProgram);var kt=r.wasmBinary,ht,jt=!1,zt;function mt(e,t){e||Lt(t)}var Jt,Xe,xt,N,fe,G,Y,oe,ge,ve,we;function De(){var e=ht.buffer;r.HEAP8=Xe=new Int8Array(e),r.HEAP16=N=new Int16Array(e),r.HEAPU8=xt=new Uint8Array(e),r.HEAPU16=fe=new Uint16Array(e),r.HEAP32=G=new Int32Array(e),r.HEAPU32=Y=new Uint32Array(e),r.HEAPF32=oe=new Float32Array(e),r.HEAPF64=we=new Float64Array(e),r.HEAP64=ge=new BigInt64Array(e),r.HEAPU64=ve=new BigUint64Array(e)}if(r.wasmMemory)ht=r.wasmMemory;else{var Me=r.INITIAL_MEMORY||16777216;ht=new WebAssembly.Memory({initial:Me/65536,maximum:32768})}De();var _t=[],pt=[],Pt=[],Dr=[],Pn=!1;function Ln(){var e=r.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Dn)),fr(_t)}function Cn(){Pn=!0,!r.noFSInit&&!c.initialized&&c.init(),c.ignorePermissions=!1,vt.init(),fr(pt)}function Rn(){var e=r.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Mn)),fr(Dr)}function Dn(e){_t.unshift(e)}function Nn(e){pt.unshift(e)}function u_(e){}function Mn(e){Dr.unshift(e)}var Tt=0,cr=null,Wt=null;function f_(e){return e}function _r(e){Tt++,r.monitorRunDependencies?.(Tt)}function Xt(e){if(Tt--,r.monitorRunDependencies?.(Tt),Tt==0&&(cr!==null&&(clearInterval(cr),cr=null),Wt)){var t=Wt;Wt=null,t()}}function Lt(e){r.onAbort?.(e),e="Aborted("+e+")",Re(e),jt=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw T(t),t}var Un="data:application/octet-stream;base64,",Nr=e=>e.startsWith(Un),d_=e=>e.startsWith("file://");function Bn(){if(r.locateFile){var e="sqlite3.wasm";return Nr(e)?e:it(e)}return new URL("sqlite3.wasm",import.meta.url).href}var ur;function Mr(e){if(e==ur&&kt)return new Uint8Array(kt);if(At)return At(e);throw"both async and sync fetching of the wasm failed"}function jn(e){return kt?Promise.resolve().then(()=>Mr(e)):Je(e).then(t=>new Uint8Array(t),()=>Mr(e))}function Ur(e,t,n){return jn(e).then(o=>WebAssembly.instantiate(o,t)).then(n,o=>{Re(`failed to asynchronously prepare wasm: ${o}`),Lt(o)})}function zn(e,t,n,o){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Nr(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var i=WebAssembly.instantiateStreaming(s,n);return i.then(o,function(g){return Re(`wasm streaming compile failed: ${g}`),Re("falling back to ArrayBuffer instantiation"),Ur(t,n,o)})}):Ur(t,n,o)}function Wn(){return{env:Hr,wasi_snapshot_preview1:Hr}}function Qn(){var e=Wn();function t(o,s){return y=o.exports,Nn(y.__wasm_call_ctors),Xt("wasm-instantiate"),y}_r("wasm-instantiate");function n(o){t(o.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(o){Re(`Module.instantiateWasm callback failed with error: ${o}`),T(o)}return ur??=Bn(),zn(kt,ur,e,n).catch(T),{}}function p_(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var fr=e=>{e.forEach(t=>t(r))};function h_(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return Xe[e];case"i8":return Xe[e];case"i16":return N[e>>1];case"i32":return G[e>>2];case"i64":return ge[e>>3];case"float":return oe[e>>2];case"double":return we[e>>3];case"*":return Y[e>>2];default:Lt(`invalid type for getValue: ${t}`)}}var m_=r.noExitRuntime||!0;function g_(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":Xe[e]=t;break;case"i8":Xe[e]=t;break;case"i16":N[e>>1]=t;break;case"i32":G[e>>2]=t;break;case"i64":ge[e>>3]=BigInt(t);break;case"float":oe[e>>2]=t;break;case"double":we[e>>3]=t;break;case"*":Y[e>>2]=t;break;default:Lt(`invalid type for setValue: ${n}`)}}var y_=e=>Gr(e),b_=()=>Kr(),je={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,o=e.length-1;o>=0;o--){var s=e[o];s==="."?e.splice(o,1):s===".."?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=je.isAbs(e),n=e.substr(-1)==="/";return e=je.normalizeArray(e.split("/").filter(o=>!!o),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=je.splitPath(e),n=t[0],o=t[1];return!n&&!o?".":(o&&(o=o.substr(0,o.length-1)),n+o)},basename:e=>{if(e==="/")return"/";e=je.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>je.normalize(e.join("/")),join2:(e,t)=>je.normalize(e+"/"+t)},Vn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);Lt("initRandomDevice")},Br=e=>(Br=Vn())(e),bt={resolve:(...e)=>{for(var t="",n=!1,o=e.length-1;o>=-1&&!n;o--){var s=o>=0?e[o]:c.cwd();if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";t=s+"/"+t,n=je.isAbs(s)}return t=je.normalizeArray(t.split("/").filter(i=>!!i),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=bt.resolve(e).substr(1),t=bt.resolve(t).substr(1);function n(H){for(var re=0;re<H.length&&H[re]==="";re++);for(var Z=H.length-1;Z>=0&&H[Z]==="";Z--);return re>Z?[]:H.slice(re,Z-re+1)}for(var o=n(e.split("/")),s=n(t.split("/")),i=Math.min(o.length,s.length),g=i,b=0;b<i;b++)if(o[b]!==s[b]){g=b;break}for(var B=[],b=g;b<o.length;b++)B.push("..");return B=B.concat(s.slice(g)),B.join("/")}},jr=typeof TextDecoder<"u"?new TextDecoder:void 0,Ct=(e,t=0,n=NaN)=>{for(var o=t+n,s=t;e[s]&&!(s>=o);)++s;if(s-t>16&&e.buffer&&jr)return jr.decode(e.subarray(t,s));for(var i="";t<s;){var g=e[t++];if(!(g&128)){i+=String.fromCharCode(g);continue}var b=e[t++]&63;if((g&224)==192){i+=String.fromCharCode((g&31)<<6|b);continue}var B=e[t++]&63;if((g&240)==224?g=(g&15)<<12|b<<6|B:g=(g&7)<<18|b<<12|B<<6|e[t++]&63,g<65536)i+=String.fromCharCode(g);else{var H=g-65536;i+=String.fromCharCode(55296|H>>10,56320|H&1023)}}return i},dr=[],Yt=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);o<=127?t++:o<=2047?t+=2:o>=55296&&o<=57343?(t+=4,++n):t+=3}return t},pr=(e,t,n,o)=>{if(!(o>0))return 0;for(var s=n,i=n+o-1,g=0;g<e.length;++g){var b=e.charCodeAt(g);if(b>=55296&&b<=57343){var B=e.charCodeAt(++g);b=65536+((b&1023)<<10)|B&1023}if(b<=127){if(n>=i)break;t[n++]=b}else if(b<=2047){if(n+1>=i)break;t[n++]=192|b>>6,t[n++]=128|b&63}else if(b<=65535){if(n+2>=i)break;t[n++]=224|b>>12,t[n++]=128|b>>6&63,t[n++]=128|b&63}else{if(n+3>=i)break;t[n++]=240|b>>18,t[n++]=128|b>>12&63,t[n++]=128|b>>6&63,t[n++]=128|b&63}}return t[n]=0,n-s};function zr(e,t,n){var o=n>0?n:Yt(e)+1,s=new Array(o),i=pr(e,s,0,s.length);return t&&(s.length=i),s}var Hn=()=>{if(!dr.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;dr=zr(e,!0)}return dr.shift()},vt={ttys:[],init(){},shutdown(){},register(e,t){vt.ttys[e]={input:[],output:[],ops:t},c.registerDevice(e,vt.stream_ops)},stream_ops:{open(e){var t=vt.ttys[e.node.rdev];if(!t)throw new c.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,o,s){if(!e.tty||!e.tty.ops.get_char)throw new c.ErrnoError(60);for(var i=0,g=0;g<o;g++){var b;try{b=e.tty.ops.get_char(e.tty)}catch{throw new c.ErrnoError(29)}if(b===void 0&&i===0)throw new c.ErrnoError(6);if(b==null)break;i++,t[n+g]=b}return i&&(e.node.timestamp=Date.now()),i},write(e,t,n,o,s){if(!e.tty||!e.tty.ops.put_char)throw new c.ErrnoError(60);try{for(var i=0;i<o;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch{throw new c.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char(e){return Hn()},put_char(e,t){t===null||t===10?(It(Ct(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(It(Ct(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(Re(Ct(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Re(Ct(e.output)),e.output=[])}}},$n=(e,t)=>{xt.fill(0,e,e+t)},Wr=(e,t)=>Math.ceil(e/t)*t,Qr=e=>{e=Wr(e,65536);var t=$r(65536,e);return t&&$n(t,e),t},Ae={ops_table:null,mount(e){return Ae.createNode(null,"/",16895,0)},createNode(e,t,n,o){if(c.isBlkdev(n)||c.isFIFO(n))throw new c.ErrnoError(63);Ae.ops_table||={dir:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr,lookup:Ae.node_ops.lookup,mknod:Ae.node_ops.mknod,rename:Ae.node_ops.rename,unlink:Ae.node_ops.unlink,rmdir:Ae.node_ops.rmdir,readdir:Ae.node_ops.readdir,symlink:Ae.node_ops.symlink},stream:{llseek:Ae.stream_ops.llseek}},file:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr},stream:{llseek:Ae.stream_ops.llseek,read:Ae.stream_ops.read,write:Ae.stream_ops.write,allocate:Ae.stream_ops.allocate,mmap:Ae.stream_ops.mmap,msync:Ae.stream_ops.msync}},link:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr,readlink:Ae.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr},stream:c.chrdev_stream_ops}};var s=c.createNode(e,t,n,o);return c.isDir(s.mode)?(s.node_ops=Ae.ops_table.dir.node,s.stream_ops=Ae.ops_table.dir.stream,s.contents={}):c.isFile(s.mode)?(s.node_ops=Ae.ops_table.file.node,s.stream_ops=Ae.ops_table.file.stream,s.usedBytes=0,s.contents=null):c.isLink(s.mode)?(s.node_ops=Ae.ops_table.link.node,s.stream_ops=Ae.ops_table.link.stream):c.isChrdev(s.mode)&&(s.node_ops=Ae.ops_table.chrdev.node,s.stream_ops=Ae.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var o=1024*1024;t=Math.max(t,n*(n<o?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var s=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=c.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,c.isDir(e.mode)?t.size=4096:c.isFile(e.mode)?t.size=e.usedBytes:c.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&Ae.resizeFileStorage(e,t.size)},lookup(e,t){throw c.genericErrors[44]},mknod(e,t,n,o){return Ae.createNode(e,t,n,o)},rename(e,t,n){if(c.isDir(e.mode)){var o;try{o=c.lookupNode(t,n)}catch{}if(o)for(var s in o.contents)throw new c.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=c.lookupNode(e,t);for(var o in n.contents)throw new c.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var o=Ae.createNode(e,t,41471,0);return o.link=n,o},readlink(e){if(!c.isLink(e.mode))throw new c.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,o,s){var i=e.node.contents;if(s>=e.node.usedBytes)return 0;var g=Math.min(e.node.usedBytes-s,o);if(g>8&&i.subarray)t.set(i.subarray(s,s+g),n);else for(var b=0;b<g;b++)t[n+b]=i[s+b];return g},write(e,t,n,o,s,i){if(t.buffer===Xe.buffer&&(i=!1),!o)return 0;var g=e.node;if(g.timestamp=Date.now(),t.subarray&&(!g.contents||g.contents.subarray)){if(i)return g.contents=t.subarray(n,n+o),g.usedBytes=o,o;if(g.usedBytes===0&&s===0)return g.contents=t.slice(n,n+o),g.usedBytes=o,o;if(s+o<=g.usedBytes)return g.contents.set(t.subarray(n,n+o),s),o}if(Ae.expandFileStorage(g,s+o),g.contents.subarray&&t.subarray)g.contents.set(t.subarray(n,n+o),s);else for(var b=0;b<o;b++)g.contents[s+b]=t[n+b];return g.usedBytes=Math.max(g.usedBytes,s+o),o},llseek(e,t,n){var o=t;if(n===1?o+=e.position:n===2&&c.isFile(e.node.mode)&&(o+=e.node.usedBytes),o<0)throw new c.ErrnoError(28);return o},allocate(e,t,n){Ae.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,o,s){if(!c.isFile(e.node.mode))throw new c.ErrnoError(43);var i,g,b=e.node.contents;if(!(s&2)&&b&&b.buffer===Xe.buffer)g=!1,i=b.byteOffset;else{if(g=!0,i=Qr(t),!i)throw new c.ErrnoError(48);b&&((n>0||n+t<b.length)&&(b.subarray?b=b.subarray(n,n+t):b=Array.prototype.slice.call(b,n,n+t)),Xe.set(b,i))}return{ptr:i,allocated:g}},msync(e,t,n,o,s){return Ae.stream_ops.write(e,t,0,o,n,!1),0}}},Gn=(e,t,n,o)=>{var s=o?"":`al ${e}`;Je(e).then(i=>{t(new Uint8Array(i)),s&&Xt(s)},i=>{if(n)n();else throw`Loading data file "${e}" failed.`}),s&&_r(s)},Kn=(e,t,n,o,s,i)=>{c.createDataFile(e,t,n,o,s,i)},Jn=r.preloadPlugins||[],Xn=(e,t,n,o)=>{typeof Browser<"u"&&Browser.init();var s=!1;return Jn.forEach(i=>{s||i.canHandle(t)&&(i.handle(e,t,n,o),s=!0)}),s},Yn=(e,t,n,o,s,i,g,b,B,H)=>{var re=t?bt.resolve(je.join2(e,t)):e,Z=`cp ${re}`;function ie(L){function C(M){H?.(),b||Kn(e,t,M,o,s,B),i?.(),Xt(Z)}Xn(L,re,C,()=>{g?.(),Xt(Z)})||C(L)}_r(Z),typeof n=="string"?Gn(n,ie,g):ie(n)},Zn=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},hr=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},c={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,o){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=c.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=o,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return c.isDir(this.mode)}get isDevice(){return c.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=bt.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new c.ErrnoError(32);for(var o=e.split("/").filter(Z=>!!Z),s=c.root,i="/",g=0;g<o.length;g++){var b=g===o.length-1;if(b&&t.parent)break;if(s=c.lookupNode(s,o[g]),i=je.join2(i,o[g]),c.isMountpoint(s)&&(!b||b&&t.follow_mount)&&(s=s.mounted.root),!b||t.follow)for(var B=0;c.isLink(s.mode);){var H=c.readlink(i);i=bt.resolve(je.dirname(i),H);var re=c.lookupPath(i,{recurse_count:t.recurse_count+1});if(s=re.node,B++>40)throw new c.ErrnoError(32)}}return{path:i,node:s}},getPath(e){for(var t;;){if(c.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%c.nameTable.length},hashAddNode(e){var t=c.hashName(e.parent.id,e.name);e.name_next=c.nameTable[t],c.nameTable[t]=e},hashRemoveNode(e){var t=c.hashName(e.parent.id,e.name);if(c.nameTable[t]===e)c.nameTable[t]=e.name_next;else for(var n=c.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=c.mayLookup(e);if(n)throw new c.ErrnoError(n);for(var o=c.hashName(e.id,t),s=c.nameTable[o];s;s=s.name_next){var i=s.name;if(s.parent.id===e.id&&i===t)return s}return c.lookup(e,t)},createNode(e,t,n,o){var s=new c.FSNode(e,t,n,o);return c.hashAddNode(s),s},destroyNode(e){c.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return c.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!c.isDir(e.mode))return 54;var t=c.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var n=c.lookupNode(e,t);return 20}catch{}return c.nodePermissions(e,"wx")},mayDelete(e,t,n){var o;try{o=c.lookupNode(e,t)}catch(i){return i.errno}var s=c.nodePermissions(e,"wx");if(s)return s;if(n){if(!c.isDir(o.mode))return 54;if(c.isRoot(o)||c.getPath(o)===c.cwd())return 10}else if(c.isDir(o.mode))return 31;return 0},mayOpen(e,t){return e?c.isLink(e.mode)?32:c.isDir(e.mode)&&(c.flagsToPermissionString(t)!=="r"||t&512)?31:c.nodePermissions(e,c.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=c.MAX_OPEN_FDS;e++)if(!c.streams[e])return e;throw new c.ErrnoError(33)},getStreamChecked(e){var t=c.getStream(e);if(!t)throw new c.ErrnoError(8);return t},getStream:e=>c.streams[e],createStream(e,t=-1){return e=Object.assign(new c.FSStream,e),t==-1&&(t=c.nextfd()),e.fd=t,c.streams[t]=e,e},closeStream(e){c.streams[e]=null},dupStream(e,t=-1){var n=c.createStream(e,t);return n.stream_ops?.dup?.(n),n},chrdev_stream_ops:{open(e){var t=c.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new c.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){c.devices[e]={stream_ops:t}},getDevice:e=>c.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var o=n.pop();t.push(o),n.push(...o.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),c.syncFSRequests++,c.syncFSRequests>1&&Re(`warning: ${c.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=c.getMounts(c.root.mount),o=0;function s(g){return c.syncFSRequests--,t(g)}function i(g){if(g)return i.errored?void 0:(i.errored=!0,s(g));++o>=n.length&&s(null)}n.forEach(g=>{if(!g.type.syncfs)return i(null);g.type.syncfs(g,e,i)})},mount(e,t,n){var o=n==="/",s=!n,i;if(o&&c.root)throw new c.ErrnoError(10);if(!o&&!s){var g=c.lookupPath(n,{follow_mount:!1});if(n=g.path,i=g.node,c.isMountpoint(i))throw new c.ErrnoError(10);if(!c.isDir(i.mode))throw new c.ErrnoError(54)}var b={type:e,opts:t,mountpoint:n,mounts:[]},B=e.mount(b);return B.mount=b,b.root=B,o?c.root=B:i&&(i.mounted=b,i.mount&&i.mount.mounts.push(b)),B},unmount(e){var t=c.lookupPath(e,{follow_mount:!1});if(!c.isMountpoint(t.node))throw new c.ErrnoError(28);var n=t.node,o=n.mounted,s=c.getMounts(o);Object.keys(c.nameTable).forEach(g=>{for(var b=c.nameTable[g];b;){var B=b.name_next;s.includes(b.mount)&&c.destroyNode(b),b=B}}),n.mounted=null;var i=n.mount.mounts.indexOf(o);n.mount.mounts.splice(i,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var o=c.lookupPath(e,{parent:!0}),s=o.node,i=je.basename(e);if(!i||i==="."||i==="..")throw new c.ErrnoError(28);var g=c.mayCreate(s,i);if(g)throw new c.ErrnoError(g);if(!s.node_ops.mknod)throw new c.ErrnoError(63);return s.node_ops.mknod(s,i,t,n)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,c.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,c.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split("/"),o="",s=0;s<n.length;++s)if(n[s]){o+="/"+n[s];try{c.mkdir(o,t)}catch(i){if(i.errno!=20)throw i}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,c.mknod(e,t,n)},symlink(e,t){if(!bt.resolve(e))throw new c.ErrnoError(44);var n=c.lookupPath(t,{parent:!0}),o=n.node;if(!o)throw new c.ErrnoError(44);var s=je.basename(t),i=c.mayCreate(o,s);if(i)throw new c.ErrnoError(i);if(!o.node_ops.symlink)throw new c.ErrnoError(63);return o.node_ops.symlink(o,s,e)},rename(e,t){var n=je.dirname(e),o=je.dirname(t),s=je.basename(e),i=je.basename(t),g,b,B;if(g=c.lookupPath(e,{parent:!0}),b=g.node,g=c.lookupPath(t,{parent:!0}),B=g.node,!b||!B)throw new c.ErrnoError(44);if(b.mount!==B.mount)throw new c.ErrnoError(75);var H=c.lookupNode(b,s),re=bt.relative(e,o);if(re.charAt(0)!==".")throw new c.ErrnoError(28);if(re=bt.relative(t,n),re.charAt(0)!==".")throw new c.ErrnoError(55);var Z;try{Z=c.lookupNode(B,i)}catch{}if(H!==Z){var ie=c.isDir(H.mode),L=c.mayDelete(b,s,ie);if(L)throw new c.ErrnoError(L);if(L=Z?c.mayDelete(B,i,ie):c.mayCreate(B,i),L)throw new c.ErrnoError(L);if(!b.node_ops.rename)throw new c.ErrnoError(63);if(c.isMountpoint(H)||Z&&c.isMountpoint(Z))throw new c.ErrnoError(10);if(B!==b&&(L=c.nodePermissions(b,"w"),L))throw new c.ErrnoError(L);c.hashRemoveNode(H);try{b.node_ops.rename(H,B,i),H.parent=B}catch(C){throw C}finally{c.hashAddNode(H)}}},rmdir(e){var t=c.lookupPath(e,{parent:!0}),n=t.node,o=je.basename(e),s=c.lookupNode(n,o),i=c.mayDelete(n,o,!0);if(i)throw new c.ErrnoError(i);if(!n.node_ops.rmdir)throw new c.ErrnoError(63);if(c.isMountpoint(s))throw new c.ErrnoError(10);n.node_ops.rmdir(n,o),c.destroyNode(s)},readdir(e){var t=c.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new c.ErrnoError(54);return n.node_ops.readdir(n)},unlink(e){var t=c.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new c.ErrnoError(44);var o=je.basename(e),s=c.lookupNode(n,o),i=c.mayDelete(n,o,!1);if(i)throw new c.ErrnoError(i);if(!n.node_ops.unlink)throw new c.ErrnoError(63);if(c.isMountpoint(s))throw new c.ErrnoError(10);n.node_ops.unlink(n,o),c.destroyNode(s)},readlink(e){var t=c.lookupPath(e),n=t.node;if(!n)throw new c.ErrnoError(44);if(!n.node_ops.readlink)throw new c.ErrnoError(28);return bt.resolve(c.getPath(n.parent),n.node_ops.readlink(n))},stat(e,t){var n=c.lookupPath(e,{follow:!t}),o=n.node;if(!o)throw new c.ErrnoError(44);if(!o.node_ops.getattr)throw new c.ErrnoError(63);return o.node_ops.getattr(o)},lstat(e){return c.stat(e,!0)},chmod(e,t,n){var o;if(typeof e=="string"){var s=c.lookupPath(e,{follow:!n});o=s.node}else o=e;if(!o.node_ops.setattr)throw new c.ErrnoError(63);o.node_ops.setattr(o,{mode:t&4095|o.mode&-4096,timestamp:Date.now()})},lchmod(e,t){c.chmod(e,t,!0)},fchmod(e,t){var n=c.getStreamChecked(e);c.chmod(n.node,t)},chown(e,t,n,o){var s;if(typeof e=="string"){var i=c.lookupPath(e,{follow:!o});s=i.node}else s=e;if(!s.node_ops.setattr)throw new c.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown(e,t,n){c.chown(e,t,n,!0)},fchown(e,t,n){var o=c.getStreamChecked(e);c.chown(o.node,t,n)},truncate(e,t){if(t<0)throw new c.ErrnoError(28);var n;if(typeof e=="string"){var o=c.lookupPath(e,{follow:!0});n=o.node}else n=e;if(!n.node_ops.setattr)throw new c.ErrnoError(63);if(c.isDir(n.mode))throw new c.ErrnoError(31);if(!c.isFile(n.mode))throw new c.ErrnoError(28);var s=c.nodePermissions(n,"w");if(s)throw new c.ErrnoError(s);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=c.getStreamChecked(e);if((n.flags&2097155)===0)throw new c.ErrnoError(28);c.truncate(n.node,t)},utime(e,t,n){var o=c.lookupPath(e,{follow:!0}),s=o.node;s.node_ops.setattr(s,{timestamp:Math.max(t,n)})},open(e,t,n){if(e==="")throw new c.ErrnoError(44);t=typeof t=="string"?Zn(t):t,t&64?(n=typeof n>"u"?438:n,n=n&4095|32768):n=0;var o;if(typeof e=="object")o=e;else{e=je.normalize(e);try{var s=c.lookupPath(e,{follow:!(t&131072)});o=s.node}catch{}}var i=!1;if(t&64)if(o){if(t&128)throw new c.ErrnoError(20)}else o=c.mknod(e,n,0),i=!0;if(!o)throw new c.ErrnoError(44);if(c.isChrdev(o.mode)&&(t&=-513),t&65536&&!c.isDir(o.mode))throw new c.ErrnoError(54);if(!i){var g=c.mayOpen(o,t);if(g)throw new c.ErrnoError(g)}t&512&&!i&&c.truncate(o,0),t&=-131713;var b=c.createStream({node:o,path:c.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return b.stream_ops.open&&b.stream_ops.open(b),r.logReadFiles&&!(t&1)&&(e in c.readFiles||(c.readFiles[e]=1)),b},close(e){if(c.isClosed(e))throw new c.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{c.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(c.isClosed(e))throw new c.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new c.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new c.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,o,s){if(o<0||s<0)throw new c.ErrnoError(28);if(c.isClosed(e))throw new c.ErrnoError(8);if((e.flags&2097155)===1)throw new c.ErrnoError(8);if(c.isDir(e.node.mode))throw new c.ErrnoError(31);if(!e.stream_ops.read)throw new c.ErrnoError(28);var i=typeof s<"u";if(!i)s=e.position;else if(!e.seekable)throw new c.ErrnoError(70);var g=e.stream_ops.read(e,t,n,o,s);return i||(e.position+=g),g},write(e,t,n,o,s,i){if(o<0||s<0)throw new c.ErrnoError(28);if(c.isClosed(e))throw new c.ErrnoError(8);if((e.flags&2097155)===0)throw new c.ErrnoError(8);if(c.isDir(e.node.mode))throw new c.ErrnoError(31);if(!e.stream_ops.write)throw new c.ErrnoError(28);e.seekable&&e.flags&1024&&c.llseek(e,0,2);var g=typeof s<"u";if(!g)s=e.position;else if(!e.seekable)throw new c.ErrnoError(70);var b=e.stream_ops.write(e,t,n,o,s,i);return g||(e.position+=b),b},allocate(e,t,n){if(c.isClosed(e))throw new c.ErrnoError(8);if(t<0||n<=0)throw new c.ErrnoError(28);if((e.flags&2097155)===0)throw new c.ErrnoError(8);if(!c.isFile(e.node.mode)&&!c.isDir(e.node.mode))throw new c.ErrnoError(43);if(!e.stream_ops.allocate)throw new c.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,o,s){if((o&2)!==0&&(s&2)===0&&(e.flags&2097155)!==2)throw new c.ErrnoError(2);if((e.flags&2097155)===1)throw new c.ErrnoError(2);if(!e.stream_ops.mmap)throw new c.ErrnoError(43);if(!t)throw new c.ErrnoError(28);return e.stream_ops.mmap(e,t,n,o,s)},msync(e,t,n,o,s){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,o,s):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new c.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,o=c.open(e,t.flags),s=c.stat(e),i=s.size,g=new Uint8Array(i);return c.read(o,g,0,i,0),t.encoding==="utf8"?n=Ct(g):t.encoding==="binary"&&(n=g),c.close(o),n},writeFile(e,t,n={}){n.flags=n.flags||577;var o=c.open(e,n.flags,n.mode);if(typeof t=="string"){var s=new Uint8Array(Yt(t)+1),i=pr(t,s,0,s.length);c.write(o,s,0,i,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))c.write(o,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");c.close(o)},cwd:()=>c.currentPath,chdir(e){var t=c.lookupPath(e,{follow:!0});if(t.node===null)throw new c.ErrnoError(44);if(!c.isDir(t.node.mode))throw new c.ErrnoError(54);var n=c.nodePermissions(t.node,"x");if(n)throw new c.ErrnoError(n);c.currentPath=t.path},createDefaultDirectories(){c.mkdir("/tmp"),c.mkdir("/home"),c.mkdir("/home/web_user")},createDefaultDevices(){c.mkdir("/dev"),c.registerDevice(c.makedev(1,3),{read:()=>0,write:(o,s,i,g,b)=>g}),c.mkdev("/dev/null",c.makedev(1,3)),vt.register(c.makedev(5,0),vt.default_tty_ops),vt.register(c.makedev(6,0),vt.default_tty1_ops),c.mkdev("/dev/tty",c.makedev(5,0)),c.mkdev("/dev/tty1",c.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=Br(e).byteLength),e[--t]);c.createDevice("/dev","random",n),c.createDevice("/dev","urandom",n),c.mkdir("/dev/shm"),c.mkdir("/dev/shm/tmp")},createSpecialDirectories(){c.mkdir("/proc");var e=c.mkdir("/proc/self");c.mkdir("/proc/self/fd"),c.mount({mount(){var t=c.createNode(e,"fd",16895,73);return t.node_ops={lookup(n,o){var s=+o,i=c.getStreamChecked(s),g={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return g.parent=g,g}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?c.createDevice("/dev","stdin",e):c.symlink("/dev/tty","/dev/stdin"),t?c.createDevice("/dev","stdout",null,t):c.symlink("/dev/tty","/dev/stdout"),n?c.createDevice("/dev","stderr",null,n):c.symlink("/dev/tty1","/dev/stderr");var o=c.open("/dev/stdin",0),s=c.open("/dev/stdout",1),i=c.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{c.genericErrors[e]=new c.ErrnoError(e),c.genericErrors[e].stack="<generic error, no stack>"}),c.nameTable=new Array(4096),c.mount(Ae,{},"/"),c.createDefaultDirectories(),c.createDefaultDevices(),c.createSpecialDirectories(),c.filesystems={MEMFS:Ae}},init(e,t,n){c.initialized=!0,e??=r.stdin,t??=r.stdout,n??=r.stderr,c.createStandardStreams(e,t,n)},quit(){c.initialized=!1;for(var e=0;e<c.streams.length;e++){var t=c.streams[e];t&&c.close(t)}},findObject(e,t){var n=c.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=c.lookupPath(e,{follow:!t});e=n.path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=c.lookupPath(e,{parent:!0});o.parentExists=!0,o.parentPath=n.path,o.parentObject=n.node,o.name=je.basename(e),n=c.lookupPath(e,{follow:!t}),o.exists=!0,o.path=n.path,o.object=n.node,o.name=n.node.name,o.isRoot=n.path==="/"}catch(s){o.error=s.errno}return o},createPath(e,t,n,o){e=typeof e=="string"?e:c.getPath(e);for(var s=t.split("/").reverse();s.length;){var i=s.pop();if(i){var g=je.join2(e,i);try{c.mkdir(g)}catch{}e=g}}return g},createFile(e,t,n,o,s){var i=je.join2(typeof e=="string"?e:c.getPath(e),t),g=hr(o,s);return c.create(i,g)},createDataFile(e,t,n,o,s,i){var g=t;e&&(e=typeof e=="string"?e:c.getPath(e),g=t?je.join2(e,t):e);var b=hr(o,s),B=c.create(g,b);if(n){if(typeof n=="string"){for(var H=new Array(n.length),re=0,Z=n.length;re<Z;++re)H[re]=n.charCodeAt(re);n=H}c.chmod(B,b|146);var ie=c.open(B,577);c.write(ie,n,0,n.length,0,i),c.close(ie),c.chmod(B,b)}},createDevice(e,t,n,o){var s=je.join2(typeof e=="string"?e:c.getPath(e),t),i=hr(!!n,!!o);c.createDevice.major??=64;var g=c.makedev(c.createDevice.major++,0);return c.registerDevice(g,{open(b){b.seekable=!1},close(b){o?.buffer?.length&&o(10)},read(b,B,H,re,Z){for(var ie=0,L=0;L<re;L++){var C;try{C=n()}catch{throw new c.ErrnoError(29)}if(C===void 0&&ie===0)throw new c.ErrnoError(6);if(C==null)break;ie++,B[H+L]=C}return ie&&(b.node.timestamp=Date.now()),ie},write(b,B,H,re,Z){for(var ie=0;ie<re;ie++)try{o(B[H+ie])}catch{throw new c.ErrnoError(29)}return re&&(b.node.timestamp=Date.now()),ie}}),c.mkdev(s,i,g)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=At(e.url),e.usedBytes=e.contents.length}catch{throw new c.ErrnoError(29)}},createLazyFile(e,t,n,o,s){class i{constructor(){this.lengthKnown=!1,this.chunks=[]}get(L){if(!(L>this.length-1||L<0)){var C=L%this.chunkSize,M=L/this.chunkSize|0;return this.getter(M)[C]}}setDataGetter(L){this.getter=L}cacheLength(){var L=new XMLHttpRequest;if(L.open("HEAD",n,!1),L.send(null),!(L.status>=200&&L.status<300||L.status===304))throw new Error("Couldn't load "+n+". Status: "+L.status);var C=Number(L.getResponseHeader("Content-length")),M,I=(M=L.getResponseHeader("Accept-Ranges"))&&M==="bytes",w=(M=L.getResponseHeader("Content-Encoding"))&&M==="gzip",U=1024*1024;I||(U=C);var V=(S,J)=>{if(S>J)throw new Error("invalid range ("+S+", "+J+") or no bytes requested!");if(J>C-1)throw new Error("only "+C+" bytes available! programmer error!");var d=new XMLHttpRequest;if(d.open("GET",n,!1),C!==U&&d.setRequestHeader("Range","bytes="+S+"-"+J),d.responseType="arraybuffer",d.overrideMimeType&&d.overrideMimeType("text/plain; charset=x-user-defined"),d.send(null),!(d.status>=200&&d.status<300||d.status===304))throw new Error("Couldn't load "+n+". Status: "+d.status);return d.response!==void 0?new Uint8Array(d.response||[]):zr(d.responseText||"",!0)},$=this;$.setDataGetter(S=>{var J=S*U,d=(S+1)*U-1;if(d=Math.min(d,C-1),typeof $.chunks[S]>"u"&&($.chunks[S]=V(J,d)),typeof $.chunks[S]>"u")throw new Error("doXHR failed!");return $.chunks[S]}),(w||!C)&&(U=C=1,C=this.getter(0).length,U=C,It("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=C,this._chunkSize=U,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!me)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var g=new i,b={isDevice:!1,contents:g}}else var b={isDevice:!1,url:n};var B=c.createFile(e,t,b,o,s);b.contents?B.contents=b.contents:b.url&&(B.contents=null,B.url=b.url),Object.defineProperties(B,{usedBytes:{get:function(){return this.contents.length}}});var H={},re=Object.keys(B.stream_ops);re.forEach(ie=>{var L=B.stream_ops[ie];H[ie]=(...C)=>(c.forceLoadFile(B),L(...C))});function Z(ie,L,C,M,I){var w=ie.node.contents;if(I>=w.length)return 0;var U=Math.min(w.length-I,M);if(w.slice)for(var V=0;V<U;V++)L[C+V]=w[I+V];else for(var V=0;V<U;V++)L[C+V]=w.get(I+V);return U}return H.read=(ie,L,C,M,I)=>(c.forceLoadFile(B),Z(ie,L,C,M,I)),H.mmap=(ie,L,C,M,I)=>{c.forceLoadFile(B);var w=Qr(L);if(!w)throw new c.ErrnoError(48);return Z(ie,Xe,w,L,C),{ptr:w,allocated:!0}},B.stream_ops=H,B}},es=(e,t)=>e?Ct(xt,e,t):"",Te={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(je.isAbs(t))return t;var o;if(e===-100)o=c.cwd();else{var s=Te.getStreamFromFD(e);o=s.path}if(t.length==0){if(!n)throw new c.ErrnoError(44);return o}return je.join2(o,t)},doStat(e,t,n){var o=e(t);G[n>>2]=o.dev,G[n+4>>2]=o.mode,Y[n+8>>2]=o.nlink,G[n+12>>2]=o.uid,G[n+16>>2]=o.gid,G[n+20>>2]=o.rdev,ge[n+24>>3]=BigInt(o.size),G[n+32>>2]=4096,G[n+36>>2]=o.blocks;var s=o.atime.getTime(),i=o.mtime.getTime(),g=o.ctime.getTime();return ge[n+40>>3]=BigInt(Math.floor(s/1e3)),Y[n+48>>2]=s%1e3*1e3*1e3,ge[n+56>>3]=BigInt(Math.floor(i/1e3)),Y[n+64>>2]=i%1e3*1e3*1e3,ge[n+72>>3]=BigInt(Math.floor(g/1e3)),Y[n+80>>2]=g%1e3*1e3*1e3,ge[n+88>>3]=BigInt(o.ino),0},doMsync(e,t,n,o,s){if(!c.isFile(t.node.mode))throw new c.ErrnoError(43);if(o&2)return 0;var i=xt.slice(e,e+n);c.msync(t,i,s,n,o)},getStreamFromFD(e){var t=c.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=es(e);return t}};function ts(e,t){try{return e=Te.getStr(e),c.chmod(e,t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function rs(e,t,n,o){try{if(t=Te.getStr(t),t=Te.calculateAt(e,t),n&-8)return-28;var s=c.lookupPath(t,{follow:!0}),i=s.node;if(!i)return-44;var g="";return n&4&&(g+="r"),n&2&&(g+="w"),n&1&&(g+="x"),g&&c.nodePermissions(i,g)?-2:0}catch(b){if(typeof c>"u"||b.name!=="ErrnoError")throw b;return-b.errno}}function ns(e,t){try{return c.fchmod(e,t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function ss(e,t,n){try{return c.fchown(e,t,n),0}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Zt(){var e=G[+Te.varargs>>2];return Te.varargs+=4,e}var Rt=Zt;function is(e,t,n){Te.varargs=n;try{var o=Te.getStreamFromFD(e);switch(t){case 0:{var s=Zt();if(s<0)return-28;for(;c.streams[s];)s++;var i;return i=c.dupStream(o,s),i.fd}case 1:case 2:return 0;case 3:return o.flags;case 4:{var s=Zt();return o.flags|=s,0}case 12:{var s=Rt(),g=0;return N[s+g>>1]=2,0}case 13:case 14:return 0}return-28}catch(b){if(typeof c>"u"||b.name!=="ErrnoError")throw b;return-b.errno}}function os(e,t){try{var n=Te.getStreamFromFD(e);return Te.doStat(c.stat,n.path,t)}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var as=9007199254740992,ls=-9007199254740992,Qt=e=>e<ls||e>as?NaN:Number(e);function cs(e,t){t=Qt(t);try{return isNaN(t)?61:(c.ftruncate(e,t),0)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var Dt=(e,t,n)=>pr(e,xt,t,n);function _s(e,t){try{if(t===0)return-28;var n=c.cwd(),o=Yt(n)+1;return t<o?-68:(Dt(n,e,t),o)}catch(s){if(typeof c>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function us(e,t,n){Te.varargs=n;try{var o=Te.getStreamFromFD(e);switch(t){case 21509:return o.tty?0:-59;case 21505:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcgets){var s=o.tty.ops.ioctl_tcgets(o),i=Rt();G[i>>2]=s.c_iflag||0,G[i+4>>2]=s.c_oflag||0,G[i+8>>2]=s.c_cflag||0,G[i+12>>2]=s.c_lflag||0;for(var g=0;g<32;g++)Xe[i+g+17]=s.c_cc[g]||0;return 0}return 0}case 21510:case 21511:case 21512:return o.tty?0:-59;case 21506:case 21507:case 21508:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcsets){for(var i=Rt(),b=G[i>>2],B=G[i+4>>2],H=G[i+8>>2],re=G[i+12>>2],Z=[],g=0;g<32;g++)Z.push(Xe[i+g+17]);return o.tty.ops.ioctl_tcsets(o.tty,t,{c_iflag:b,c_oflag:B,c_cflag:H,c_lflag:re,c_cc:Z})}return 0}case 21519:{if(!o.tty)return-59;var i=Rt();return G[i>>2]=0,0}case 21520:return o.tty?-28:-59;case 21531:{var i=Rt();return c.ioctl(o,t,i)}case 21523:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tiocgwinsz){var ie=o.tty.ops.ioctl_tiocgwinsz(o.tty),i=Rt();N[i>>1]=ie[0],N[i+2>>1]=ie[1]}return 0}case 21524:return o.tty?0:-59;case 21515:return o.tty?0:-59;default:return-28}}catch(L){if(typeof c>"u"||L.name!=="ErrnoError")throw L;return-L.errno}}function fs(e,t){try{return e=Te.getStr(e),Te.doStat(c.lstat,e,t)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function ds(e,t,n){try{return t=Te.getStr(t),t=Te.calculateAt(e,t),t=je.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),c.mkdir(t,n,0),0}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function ps(e,t,n,o){try{t=Te.getStr(t);var s=o&256,i=o&4096;return o=o&-6401,t=Te.calculateAt(e,t,i),Te.doStat(s?c.lstat:c.stat,t,n)}catch(g){if(typeof c>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function hs(e,t,n,o){Te.varargs=o;try{t=Te.getStr(t),t=Te.calculateAt(e,t);var s=o?Zt():0;return c.open(t,n,s).fd}catch(i){if(typeof c>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function ms(e,t,n,o){try{if(t=Te.getStr(t),t=Te.calculateAt(e,t),o<=0)return-28;var s=c.readlink(t),i=Math.min(o,Yt(s)),g=Xe[n+i];return Dt(s,n,o+1),Xe[n+i]=g,i}catch(b){if(typeof c>"u"||b.name!=="ErrnoError")throw b;return-b.errno}}function gs(e){try{return e=Te.getStr(e),c.rmdir(e),0}catch(t){if(typeof c>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function ys(e,t){try{return e=Te.getStr(e),Te.doStat(c.stat,e,t)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function bs(e,t,n){try{return t=Te.getStr(t),t=Te.calculateAt(e,t),n===0?c.unlink(t):n===512?c.rmdir(t):Lt("Invalid flags passed to unlinkat"),0}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var Vr=e=>Y[e>>2]+G[e+4>>2]*4294967296;function qs(e,t,n,o){try{t=Te.getStr(t),t=Te.calculateAt(e,t,!0);var s=Date.now(),i,g;if(!n)i=s,g=s;else{var b=Vr(n),B=G[n+8>>2];B==1073741823?i=s:B==1073741822?i=-1:i=b*1e3+B/1e6,n+=16,b=Vr(n),B=G[n+8>>2],B==1073741823?g=s:B==1073741822?g=-1:g=b*1e3+B/1e6}return(g!=-1||i!=-1)&&c.utime(t,i,g),0}catch(H){if(typeof c>"u"||H.name!=="ErrnoError")throw H;return-H.errno}}var ws=1,xs=()=>ws,vs=e=>e%4===0&&(e%100!==0||e%400===0),Es=[0,31,60,91,121,152,182,213,244,274,305,335],Ss=[0,31,59,90,120,151,181,212,243,273,304,334],As=e=>{var t=vs(e.getFullYear()),n=t?Es:Ss,o=n[e.getMonth()]+e.getDate()-1;return o};function Is(e,t){e=Qt(e);var n=new Date(e*1e3);G[t>>2]=n.getSeconds(),G[t+4>>2]=n.getMinutes(),G[t+8>>2]=n.getHours(),G[t+12>>2]=n.getDate(),G[t+16>>2]=n.getMonth(),G[t+20>>2]=n.getFullYear()-1900,G[t+24>>2]=n.getDay();var o=As(n)|0;G[t+28>>2]=o,G[t+36>>2]=-(n.getTimezoneOffset()*60);var s=new Date(n.getFullYear(),0,1),i=new Date(n.getFullYear(),6,1).getTimezoneOffset(),g=s.getTimezoneOffset(),b=(i!=g&&n.getTimezoneOffset()==Math.min(g,i))|0;G[t+32>>2]=b}function ks(e,t,n,o,s,i,g){s=Qt(s);try{if(isNaN(s))return 61;var b=Te.getStreamFromFD(o),B=c.mmap(b,e,s,t,n),H=B.ptr;return G[i>>2]=B.allocated,Y[g>>2]=H,0}catch(re){if(typeof c>"u"||re.name!=="ErrnoError")throw re;return-re.errno}}function Ts(e,t,n,o,s,i){i=Qt(i);try{var g=Te.getStreamFromFD(s);n&2&&Te.doMsync(e,g,t,o,i)}catch(b){if(typeof c>"u"||b.name!=="ErrnoError")throw b;return-b.errno}}var Fs=(e,t,n,o)=>{var s=new Date().getFullYear(),i=new Date(s,0,1),g=new Date(s,6,1),b=i.getTimezoneOffset(),B=g.getTimezoneOffset(),H=Math.max(b,B);Y[e>>2]=H*60,G[t>>2]=+(b!=B);var re=L=>{var C=L>=0?"-":"+",M=Math.abs(L),I=String(Math.floor(M/60)).padStart(2,"0"),w=String(M%60).padStart(2,"0");return`UTC${C}${I}${w}`},Z=re(b),ie=re(B);B<b?(Dt(Z,n,17),Dt(ie,o,17)):(Dt(Z,o,17),Dt(ie,n,17))},Os=()=>Date.now(),Ps=()=>performance.now(),Ls=()=>2147483648,Cs=e=>{var t=ht.buffer,n=(e-t.byteLength+65535)/65536|0;try{return ht.grow(n),De(),1}catch{}},Rs=e=>{var t=xt.length;e>>>=0;var n=Ls();if(e>n)return!1;for(var o=1;o<=4;o*=2){var s=t*(1+.2/o);s=Math.min(s,e+100663296);var i=Math.min(n,Wr(Math.max(e,s),65536)),g=Cs(i);if(g)return!0}return!1},mr={},Ds=()=>Ne||"./this.program",Vt=()=>{if(!Vt.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Ds()};for(var n in mr)mr[n]===void 0?delete t[n]:t[n]=mr[n];var o=[];for(var n in t)o.push(`${n}=${t[n]}`);Vt.strings=o}return Vt.strings},Ns=(e,t)=>{for(var n=0;n<e.length;++n)Xe[t++]=e.charCodeAt(n);Xe[t]=0},Ms=(e,t)=>{var n=0;return Vt().forEach((o,s)=>{var i=t+n;Y[e+s*4>>2]=i,Ns(o,i),n+=o.length+1}),0},Us=(e,t)=>{var n=Vt();Y[e>>2]=n.length;var o=0;return n.forEach(s=>o+=s.length+1),Y[t>>2]=o,0};function Bs(e){try{var t=Te.getStreamFromFD(e);return c.close(t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function js(e,t){try{var n=0,o=0,s=0,i=Te.getStreamFromFD(e),g=i.tty?2:c.isDir(i.mode)?3:c.isLink(i.mode)?7:4;return Xe[t]=g,N[t+2>>1]=s,ge[t+8>>3]=BigInt(n),ge[t+16>>3]=BigInt(o),0}catch(b){if(typeof c>"u"||b.name!=="ErrnoError")throw b;return b.errno}}var zs=(e,t,n,o)=>{for(var s=0,i=0;i<n;i++){var g=Y[t>>2],b=Y[t+4>>2];t+=8;var B=c.read(e,Xe,g,b,o);if(B<0)return-1;if(s+=B,B<b)break;typeof o<"u"&&(o+=B)}return s};function Ws(e,t,n,o){try{var s=Te.getStreamFromFD(e),i=zs(s,t,n);return Y[o>>2]=i,0}catch(g){if(typeof c>"u"||g.name!=="ErrnoError")throw g;return g.errno}}function Qs(e,t,n,o){t=Qt(t);try{if(isNaN(t))return 61;var s=Te.getStreamFromFD(e);return c.llseek(s,t,n),ge[o>>3]=BigInt(s.position),s.getdents&&t===0&&n===0&&(s.getdents=null),0}catch(i){if(typeof c>"u"||i.name!=="ErrnoError")throw i;return i.errno}}function Vs(e){try{var t=Te.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return n.errno}}var Hs=(e,t,n,o)=>{for(var s=0,i=0;i<n;i++){var g=Y[t>>2],b=Y[t+4>>2];t+=8;var B=c.write(e,Xe,g,b,o);if(B<0)return-1;if(s+=B,B<b)break;typeof o<"u"&&(o+=B)}return s};function $s(e,t,n,o){try{var s=Te.getStreamFromFD(e),i=Hs(s,t,n);return Y[o>>2]=i,0}catch(g){if(typeof c>"u"||g.name!=="ErrnoError")throw g;return g.errno}}c.createPreloadedFile=Yn,c.staticInit();var Hr={__syscall_chmod:ts,__syscall_faccessat:rs,__syscall_fchmod:ns,__syscall_fchown32:ss,__syscall_fcntl64:is,__syscall_fstat64:os,__syscall_ftruncate64:cs,__syscall_getcwd:_s,__syscall_ioctl:us,__syscall_lstat64:fs,__syscall_mkdirat:ds,__syscall_newfstatat:ps,__syscall_openat:hs,__syscall_readlinkat:ms,__syscall_rmdir:gs,__syscall_stat64:ys,__syscall_unlinkat:bs,__syscall_utimensat:qs,_emscripten_get_now_is_monotonic:xs,_localtime_js:Is,_mmap_js:ks,_munmap_js:Ts,_tzset_js:Fs,emscripten_date_now:Os,emscripten_get_now:Ps,emscripten_resize_heap:Rs,environ_get:Ms,environ_sizes_get:Us,fd_close:Bs,fd_fdstat_get:js,fd_read:Ws,fd_seek:Qs,fd_sync:Vs,fd_write:$s,memory:ht},y=Qn(),Gs=()=>(Gs=y.__wasm_call_ctors)(),Ks=r._sqlite3_status64=(e,t,n,o)=>(Ks=r._sqlite3_status64=y.sqlite3_status64)(e,t,n,o),Js=r._sqlite3_status=(e,t,n,o)=>(Js=r._sqlite3_status=y.sqlite3_status)(e,t,n,o),Xs=r._sqlite3_db_status=(e,t,n,o,s)=>(Xs=r._sqlite3_db_status=y.sqlite3_db_status)(e,t,n,o,s),Ys=r._sqlite3_msize=e=>(Ys=r._sqlite3_msize=y.sqlite3_msize)(e),Zs=r._sqlite3_vfs_find=e=>(Zs=r._sqlite3_vfs_find=y.sqlite3_vfs_find)(e),ei=r._sqlite3_initialize=()=>(ei=r._sqlite3_initialize=y.sqlite3_initialize)(),ti=r._sqlite3_malloc=e=>(ti=r._sqlite3_malloc=y.sqlite3_malloc)(e),ri=r._sqlite3_free=e=>(ri=r._sqlite3_free=y.sqlite3_free)(e),ni=r._sqlite3_vfs_register=(e,t)=>(ni=r._sqlite3_vfs_register=y.sqlite3_vfs_register)(e,t),si=r._sqlite3_vfs_unregister=e=>(si=r._sqlite3_vfs_unregister=y.sqlite3_vfs_unregister)(e),ii=r._sqlite3_malloc64=e=>(ii=r._sqlite3_malloc64=y.sqlite3_malloc64)(e),oi=r._sqlite3_realloc=(e,t)=>(oi=r._sqlite3_realloc=y.sqlite3_realloc)(e,t),ai=r._sqlite3_realloc64=(e,t)=>(ai=r._sqlite3_realloc64=y.sqlite3_realloc64)(e,t),li=r._sqlite3_value_text=e=>(li=r._sqlite3_value_text=y.sqlite3_value_text)(e),ci=r._sqlite3_randomness=(e,t)=>(ci=r._sqlite3_randomness=y.sqlite3_randomness)(e,t),_i=r._sqlite3_stricmp=(e,t)=>(_i=r._sqlite3_stricmp=y.sqlite3_stricmp)(e,t),ui=r._sqlite3_strnicmp=(e,t,n)=>(ui=r._sqlite3_strnicmp=y.sqlite3_strnicmp)(e,t,n),fi=r._sqlite3_uri_parameter=(e,t)=>(fi=r._sqlite3_uri_parameter=y.sqlite3_uri_parameter)(e,t),di=r._sqlite3_uri_boolean=(e,t,n)=>(di=r._sqlite3_uri_boolean=y.sqlite3_uri_boolean)(e,t,n),pi=r._sqlite3_serialize=(e,t,n,o)=>(pi=r._sqlite3_serialize=y.sqlite3_serialize)(e,t,n,o),hi=r._sqlite3_prepare_v2=(e,t,n,o,s)=>(hi=r._sqlite3_prepare_v2=y.sqlite3_prepare_v2)(e,t,n,o,s),mi=r._sqlite3_step=e=>(mi=r._sqlite3_step=y.sqlite3_step)(e),gi=r._sqlite3_column_int64=(e,t)=>(gi=r._sqlite3_column_int64=y.sqlite3_column_int64)(e,t),yi=r._sqlite3_reset=e=>(yi=r._sqlite3_reset=y.sqlite3_reset)(e),bi=r._sqlite3_exec=(e,t,n,o,s)=>(bi=r._sqlite3_exec=y.sqlite3_exec)(e,t,n,o,s),qi=r._sqlite3_column_int=(e,t)=>(qi=r._sqlite3_column_int=y.sqlite3_column_int)(e,t),wi=r._sqlite3_finalize=e=>(wi=r._sqlite3_finalize=y.sqlite3_finalize)(e),xi=r._sqlite3_file_control=(e,t,n,o)=>(xi=r._sqlite3_file_control=y.sqlite3_file_control)(e,t,n,o),vi=r._sqlite3_column_name=(e,t)=>(vi=r._sqlite3_column_name=y.sqlite3_column_name)(e,t),Ei=r._sqlite3_column_text=(e,t)=>(Ei=r._sqlite3_column_text=y.sqlite3_column_text)(e,t),Si=r._sqlite3_column_type=(e,t)=>(Si=r._sqlite3_column_type=y.sqlite3_column_type)(e,t),Ai=r._sqlite3_errmsg=e=>(Ai=r._sqlite3_errmsg=y.sqlite3_errmsg)(e),Ii=r._sqlite3_deserialize=(e,t,n,o,s,i)=>(Ii=r._sqlite3_deserialize=y.sqlite3_deserialize)(e,t,n,o,s,i),ki=r._sqlite3_clear_bindings=e=>(ki=r._sqlite3_clear_bindings=y.sqlite3_clear_bindings)(e),Ti=r._sqlite3_value_blob=e=>(Ti=r._sqlite3_value_blob=y.sqlite3_value_blob)(e),Fi=r._sqlite3_value_bytes=e=>(Fi=r._sqlite3_value_bytes=y.sqlite3_value_bytes)(e),Oi=r._sqlite3_value_double=e=>(Oi=r._sqlite3_value_double=y.sqlite3_value_double)(e),Pi=r._sqlite3_value_int=e=>(Pi=r._sqlite3_value_int=y.sqlite3_value_int)(e),Li=r._sqlite3_value_int64=e=>(Li=r._sqlite3_value_int64=y.sqlite3_value_int64)(e),Ci=r._sqlite3_value_subtype=e=>(Ci=r._sqlite3_value_subtype=y.sqlite3_value_subtype)(e),Ri=r._sqlite3_value_pointer=(e,t)=>(Ri=r._sqlite3_value_pointer=y.sqlite3_value_pointer)(e,t),Di=r._sqlite3_value_type=e=>(Di=r._sqlite3_value_type=y.sqlite3_value_type)(e),Ni=r._sqlite3_value_nochange=e=>(Ni=r._sqlite3_value_nochange=y.sqlite3_value_nochange)(e),Mi=r._sqlite3_value_frombind=e=>(Mi=r._sqlite3_value_frombind=y.sqlite3_value_frombind)(e),Ui=r._sqlite3_value_dup=e=>(Ui=r._sqlite3_value_dup=y.sqlite3_value_dup)(e),Bi=r._sqlite3_value_free=e=>(Bi=r._sqlite3_value_free=y.sqlite3_value_free)(e),ji=r._sqlite3_result_blob=(e,t,n,o)=>(ji=r._sqlite3_result_blob=y.sqlite3_result_blob)(e,t,n,o),zi=r._sqlite3_result_error_toobig=e=>(zi=r._sqlite3_result_error_toobig=y.sqlite3_result_error_toobig)(e),Wi=r._sqlite3_result_error_nomem=e=>(Wi=r._sqlite3_result_error_nomem=y.sqlite3_result_error_nomem)(e),Qi=r._sqlite3_result_double=(e,t)=>(Qi=r._sqlite3_result_double=y.sqlite3_result_double)(e,t),Vi=r._sqlite3_result_error=(e,t,n)=>(Vi=r._sqlite3_result_error=y.sqlite3_result_error)(e,t,n),Hi=r._sqlite3_result_int=(e,t)=>(Hi=r._sqlite3_result_int=y.sqlite3_result_int)(e,t),$i=r._sqlite3_result_int64=(e,t)=>($i=r._sqlite3_result_int64=y.sqlite3_result_int64)(e,t),Gi=r._sqlite3_result_null=e=>(Gi=r._sqlite3_result_null=y.sqlite3_result_null)(e),Ki=r._sqlite3_result_pointer=(e,t,n,o)=>(Ki=r._sqlite3_result_pointer=y.sqlite3_result_pointer)(e,t,n,o),Ji=r._sqlite3_result_subtype=(e,t)=>(Ji=r._sqlite3_result_subtype=y.sqlite3_result_subtype)(e,t),Xi=r._sqlite3_result_text=(e,t,n,o)=>(Xi=r._sqlite3_result_text=y.sqlite3_result_text)(e,t,n,o),Yi=r._sqlite3_result_zeroblob=(e,t)=>(Yi=r._sqlite3_result_zeroblob=y.sqlite3_result_zeroblob)(e,t),Zi=r._sqlite3_result_zeroblob64=(e,t)=>(Zi=r._sqlite3_result_zeroblob64=y.sqlite3_result_zeroblob64)(e,t),eo=r._sqlite3_result_error_code=(e,t)=>(eo=r._sqlite3_result_error_code=y.sqlite3_result_error_code)(e,t),to=r._sqlite3_user_data=e=>(to=r._sqlite3_user_data=y.sqlite3_user_data)(e),ro=r._sqlite3_context_db_handle=e=>(ro=r._sqlite3_context_db_handle=y.sqlite3_context_db_handle)(e),no=r._sqlite3_vtab_nochange=e=>(no=r._sqlite3_vtab_nochange=y.sqlite3_vtab_nochange)(e),so=r._sqlite3_vtab_in_first=(e,t)=>(so=r._sqlite3_vtab_in_first=y.sqlite3_vtab_in_first)(e,t),io=r._sqlite3_vtab_in_next=(e,t)=>(io=r._sqlite3_vtab_in_next=y.sqlite3_vtab_in_next)(e,t),oo=r._sqlite3_aggregate_context=(e,t)=>(oo=r._sqlite3_aggregate_context=y.sqlite3_aggregate_context)(e,t),ao=r._sqlite3_get_auxdata=(e,t)=>(ao=r._sqlite3_get_auxdata=y.sqlite3_get_auxdata)(e,t),lo=r._sqlite3_set_auxdata=(e,t,n,o)=>(lo=r._sqlite3_set_auxdata=y.sqlite3_set_auxdata)(e,t,n,o),co=r._sqlite3_column_count=e=>(co=r._sqlite3_column_count=y.sqlite3_column_count)(e),_o=r._sqlite3_data_count=e=>(_o=r._sqlite3_data_count=y.sqlite3_data_count)(e),uo=r._sqlite3_column_blob=(e,t)=>(uo=r._sqlite3_column_blob=y.sqlite3_column_blob)(e,t),fo=r._sqlite3_column_bytes=(e,t)=>(fo=r._sqlite3_column_bytes=y.sqlite3_column_bytes)(e,t),po=r._sqlite3_column_double=(e,t)=>(po=r._sqlite3_column_double=y.sqlite3_column_double)(e,t),ho=r._sqlite3_column_value=(e,t)=>(ho=r._sqlite3_column_value=y.sqlite3_column_value)(e,t),mo=r._sqlite3_column_decltype=(e,t)=>(mo=r._sqlite3_column_decltype=y.sqlite3_column_decltype)(e,t),go=r._sqlite3_bind_blob=(e,t,n,o,s)=>(go=r._sqlite3_bind_blob=y.sqlite3_bind_blob)(e,t,n,o,s),yo=r._sqlite3_bind_double=(e,t,n)=>(yo=r._sqlite3_bind_double=y.sqlite3_bind_double)(e,t,n),bo=r._sqlite3_bind_int=(e,t,n)=>(bo=r._sqlite3_bind_int=y.sqlite3_bind_int)(e,t,n),qo=r._sqlite3_bind_int64=(e,t,n)=>(qo=r._sqlite3_bind_int64=y.sqlite3_bind_int64)(e,t,n),wo=r._sqlite3_bind_null=(e,t)=>(wo=r._sqlite3_bind_null=y.sqlite3_bind_null)(e,t),xo=r._sqlite3_bind_pointer=(e,t,n,o,s)=>(xo=r._sqlite3_bind_pointer=y.sqlite3_bind_pointer)(e,t,n,o,s),vo=r._sqlite3_bind_text=(e,t,n,o,s)=>(vo=r._sqlite3_bind_text=y.sqlite3_bind_text)(e,t,n,o,s),Eo=r._sqlite3_bind_parameter_count=e=>(Eo=r._sqlite3_bind_parameter_count=y.sqlite3_bind_parameter_count)(e),So=r._sqlite3_bind_parameter_name=(e,t)=>(So=r._sqlite3_bind_parameter_name=y.sqlite3_bind_parameter_name)(e,t),Ao=r._sqlite3_bind_parameter_index=(e,t)=>(Ao=r._sqlite3_bind_parameter_index=y.sqlite3_bind_parameter_index)(e,t),Io=r._sqlite3_db_handle=e=>(Io=r._sqlite3_db_handle=y.sqlite3_db_handle)(e),ko=r._sqlite3_stmt_readonly=e=>(ko=r._sqlite3_stmt_readonly=y.sqlite3_stmt_readonly)(e),To=r._sqlite3_stmt_isexplain=e=>(To=r._sqlite3_stmt_isexplain=y.sqlite3_stmt_isexplain)(e),Fo=r._sqlite3_stmt_explain=(e,t)=>(Fo=r._sqlite3_stmt_explain=y.sqlite3_stmt_explain)(e,t),Oo=r._sqlite3_stmt_busy=e=>(Oo=r._sqlite3_stmt_busy=y.sqlite3_stmt_busy)(e),Po=r._sqlite3_stmt_status=(e,t,n)=>(Po=r._sqlite3_stmt_status=y.sqlite3_stmt_status)(e,t,n),Lo=r._sqlite3_sql=e=>(Lo=r._sqlite3_sql=y.sqlite3_sql)(e),Co=r._sqlite3_expanded_sql=e=>(Co=r._sqlite3_expanded_sql=y.sqlite3_expanded_sql)(e),Ro=r._sqlite3_preupdate_old=(e,t,n)=>(Ro=r._sqlite3_preupdate_old=y.sqlite3_preupdate_old)(e,t,n),Do=r._sqlite3_preupdate_count=e=>(Do=r._sqlite3_preupdate_count=y.sqlite3_preupdate_count)(e),No=r._sqlite3_preupdate_depth=e=>(No=r._sqlite3_preupdate_depth=y.sqlite3_preupdate_depth)(e),Mo=r._sqlite3_preupdate_blobwrite=e=>(Mo=r._sqlite3_preupdate_blobwrite=y.sqlite3_preupdate_blobwrite)(e),Uo=r._sqlite3_preupdate_new=(e,t,n)=>(Uo=r._sqlite3_preupdate_new=y.sqlite3_preupdate_new)(e,t,n),Bo=r._sqlite3_value_numeric_type=e=>(Bo=r._sqlite3_value_numeric_type=y.sqlite3_value_numeric_type)(e),jo=r._sqlite3_set_authorizer=(e,t,n)=>(jo=r._sqlite3_set_authorizer=y.sqlite3_set_authorizer)(e,t,n),zo=r._sqlite3_strglob=(e,t)=>(zo=r._sqlite3_strglob=y.sqlite3_strglob)(e,t),Wo=r._sqlite3_strlike=(e,t,n)=>(Wo=r._sqlite3_strlike=y.sqlite3_strlike)(e,t,n),Qo=r._sqlite3_auto_extension=e=>(Qo=r._sqlite3_auto_extension=y.sqlite3_auto_extension)(e),Vo=r._sqlite3_cancel_auto_extension=e=>(Vo=r._sqlite3_cancel_auto_extension=y.sqlite3_cancel_auto_extension)(e),Ho=r._sqlite3_reset_auto_extension=()=>(Ho=r._sqlite3_reset_auto_extension=y.sqlite3_reset_auto_extension)(),$o=r._sqlite3_prepare_v3=(e,t,n,o,s,i)=>($o=r._sqlite3_prepare_v3=y.sqlite3_prepare_v3)(e,t,n,o,s,i),Go=r._sqlite3_create_module=(e,t,n,o)=>(Go=r._sqlite3_create_module=y.sqlite3_create_module)(e,t,n,o),Ko=r._sqlite3_create_module_v2=(e,t,n,o,s)=>(Ko=r._sqlite3_create_module_v2=y.sqlite3_create_module_v2)(e,t,n,o,s),Jo=r._sqlite3_drop_modules=(e,t)=>(Jo=r._sqlite3_drop_modules=y.sqlite3_drop_modules)(e,t),Xo=r._sqlite3_declare_vtab=(e,t)=>(Xo=r._sqlite3_declare_vtab=y.sqlite3_declare_vtab)(e,t),Yo=r._sqlite3_vtab_on_conflict=e=>(Yo=r._sqlite3_vtab_on_conflict=y.sqlite3_vtab_on_conflict)(e),Zo=r._sqlite3_vtab_collation=(e,t)=>(Zo=r._sqlite3_vtab_collation=y.sqlite3_vtab_collation)(e,t),ea=r._sqlite3_vtab_in=(e,t,n)=>(ea=r._sqlite3_vtab_in=y.sqlite3_vtab_in)(e,t,n),ta=r._sqlite3_vtab_rhs_value=(e,t,n)=>(ta=r._sqlite3_vtab_rhs_value=y.sqlite3_vtab_rhs_value)(e,t,n),ra=r._sqlite3_vtab_distinct=e=>(ra=r._sqlite3_vtab_distinct=y.sqlite3_vtab_distinct)(e),na=r._sqlite3_keyword_name=(e,t,n)=>(na=r._sqlite3_keyword_name=y.sqlite3_keyword_name)(e,t,n),sa=r._sqlite3_keyword_count=()=>(sa=r._sqlite3_keyword_count=y.sqlite3_keyword_count)(),ia=r._sqlite3_keyword_check=(e,t)=>(ia=r._sqlite3_keyword_check=y.sqlite3_keyword_check)(e,t),oa=r._sqlite3_complete=e=>(oa=r._sqlite3_complete=y.sqlite3_complete)(e),aa=r._sqlite3_libversion=()=>(aa=r._sqlite3_libversion=y.sqlite3_libversion)(),la=r._sqlite3_libversion_number=()=>(la=r._sqlite3_libversion_number=y.sqlite3_libversion_number)(),ca=r._sqlite3_shutdown=()=>(ca=r._sqlite3_shutdown=y.sqlite3_shutdown)(),_a=r._sqlite3_last_insert_rowid=e=>(_a=r._sqlite3_last_insert_rowid=y.sqlite3_last_insert_rowid)(e),ua=r._sqlite3_set_last_insert_rowid=(e,t)=>(ua=r._sqlite3_set_last_insert_rowid=y.sqlite3_set_last_insert_rowid)(e,t),fa=r._sqlite3_changes64=e=>(fa=r._sqlite3_changes64=y.sqlite3_changes64)(e),da=r._sqlite3_changes=e=>(da=r._sqlite3_changes=y.sqlite3_changes)(e),pa=r._sqlite3_total_changes64=e=>(pa=r._sqlite3_total_changes64=y.sqlite3_total_changes64)(e),ha=r._sqlite3_total_changes=e=>(ha=r._sqlite3_total_changes=y.sqlite3_total_changes)(e),ma=r._sqlite3_txn_state=(e,t)=>(ma=r._sqlite3_txn_state=y.sqlite3_txn_state)(e,t),ga=r._sqlite3_close_v2=e=>(ga=r._sqlite3_close_v2=y.sqlite3_close_v2)(e),ya=r._sqlite3_busy_handler=(e,t,n)=>(ya=r._sqlite3_busy_handler=y.sqlite3_busy_handler)(e,t,n),ba=r._sqlite3_progress_handler=(e,t,n,o)=>(ba=r._sqlite3_progress_handler=y.sqlite3_progress_handler)(e,t,n,o),qa=r._sqlite3_busy_timeout=(e,t)=>(qa=r._sqlite3_busy_timeout=y.sqlite3_busy_timeout)(e,t),wa=r._sqlite3_interrupt=e=>(wa=r._sqlite3_interrupt=y.sqlite3_interrupt)(e),xa=r._sqlite3_is_interrupted=e=>(xa=r._sqlite3_is_interrupted=y.sqlite3_is_interrupted)(e),va=r._sqlite3_create_function=(e,t,n,o,s,i,g,b)=>(va=r._sqlite3_create_function=y.sqlite3_create_function)(e,t,n,o,s,i,g,b),Ea=r._sqlite3_create_function_v2=(e,t,n,o,s,i,g,b,B)=>(Ea=r._sqlite3_create_function_v2=y.sqlite3_create_function_v2)(e,t,n,o,s,i,g,b,B),Sa=r._sqlite3_create_window_function=(e,t,n,o,s,i,g,b,B,H)=>(Sa=r._sqlite3_create_window_function=y.sqlite3_create_window_function)(e,t,n,o,s,i,g,b,B,H),Aa=r._sqlite3_overload_function=(e,t,n)=>(Aa=r._sqlite3_overload_function=y.sqlite3_overload_function)(e,t,n),Ia=r._sqlite3_trace_v2=(e,t,n,o)=>(Ia=r._sqlite3_trace_v2=y.sqlite3_trace_v2)(e,t,n,o),ka=r._sqlite3_commit_hook=(e,t,n)=>(ka=r._sqlite3_commit_hook=y.sqlite3_commit_hook)(e,t,n),Ta=r._sqlite3_update_hook=(e,t,n)=>(Ta=r._sqlite3_update_hook=y.sqlite3_update_hook)(e,t,n),Fa=r._sqlite3_rollback_hook=(e,t,n)=>(Fa=r._sqlite3_rollback_hook=y.sqlite3_rollback_hook)(e,t,n),Oa=r._sqlite3_preupdate_hook=(e,t,n)=>(Oa=r._sqlite3_preupdate_hook=y.sqlite3_preupdate_hook)(e,t,n),Pa=r._sqlite3_error_offset=e=>(Pa=r._sqlite3_error_offset=y.sqlite3_error_offset)(e),La=r._sqlite3_errcode=e=>(La=r._sqlite3_errcode=y.sqlite3_errcode)(e),Ca=r._sqlite3_extended_errcode=e=>(Ca=r._sqlite3_extended_errcode=y.sqlite3_extended_errcode)(e),Ra=r._sqlite3_errstr=e=>(Ra=r._sqlite3_errstr=y.sqlite3_errstr)(e),Da=r._sqlite3_limit=(e,t,n)=>(Da=r._sqlite3_limit=y.sqlite3_limit)(e,t,n),Na=r._sqlite3_open=(e,t)=>(Na=r._sqlite3_open=y.sqlite3_open)(e,t),Ma=r._sqlite3_open_v2=(e,t,n,o)=>(Ma=r._sqlite3_open_v2=y.sqlite3_open_v2)(e,t,n,o),Ua=r._sqlite3_create_collation=(e,t,n,o,s)=>(Ua=r._sqlite3_create_collation=y.sqlite3_create_collation)(e,t,n,o,s),Ba=r._sqlite3_create_collation_v2=(e,t,n,o,s,i)=>(Ba=r._sqlite3_create_collation_v2=y.sqlite3_create_collation_v2)(e,t,n,o,s,i),ja=r._sqlite3_collation_needed=(e,t,n)=>(ja=r._sqlite3_collation_needed=y.sqlite3_collation_needed)(e,t,n),za=r._sqlite3_get_autocommit=e=>(za=r._sqlite3_get_autocommit=y.sqlite3_get_autocommit)(e),Wa=r._sqlite3_table_column_metadata=(e,t,n,o,s,i,g,b,B)=>(Wa=r._sqlite3_table_column_metadata=y.sqlite3_table_column_metadata)(e,t,n,o,s,i,g,b,B),Qa=r._sqlite3_extended_result_codes=(e,t)=>(Qa=r._sqlite3_extended_result_codes=y.sqlite3_extended_result_codes)(e,t),Va=r._sqlite3_uri_key=(e,t)=>(Va=r._sqlite3_uri_key=y.sqlite3_uri_key)(e,t),Ha=r._sqlite3_uri_int64=(e,t,n)=>(Ha=r._sqlite3_uri_int64=y.sqlite3_uri_int64)(e,t,n),$a=r._sqlite3_db_name=(e,t)=>($a=r._sqlite3_db_name=y.sqlite3_db_name)(e,t),Ga=r._sqlite3_db_filename=(e,t)=>(Ga=r._sqlite3_db_filename=y.sqlite3_db_filename)(e,t),Ka=r._sqlite3_db_readonly=(e,t)=>(Ka=r._sqlite3_db_readonly=y.sqlite3_db_readonly)(e,t),Ja=r._sqlite3_compileoption_used=e=>(Ja=r._sqlite3_compileoption_used=y.sqlite3_compileoption_used)(e),Xa=r._sqlite3_compileoption_get=e=>(Xa=r._sqlite3_compileoption_get=y.sqlite3_compileoption_get)(e),Ya=r._sqlite3session_diff=(e,t,n,o)=>(Ya=r._sqlite3session_diff=y.sqlite3session_diff)(e,t,n,o),Za=r._sqlite3session_attach=(e,t)=>(Za=r._sqlite3session_attach=y.sqlite3session_attach)(e,t),el=r._sqlite3session_create=(e,t,n)=>(el=r._sqlite3session_create=y.sqlite3session_create)(e,t,n),tl=r._sqlite3session_delete=e=>(tl=r._sqlite3session_delete=y.sqlite3session_delete)(e),rl=r._sqlite3session_table_filter=(e,t,n)=>(rl=r._sqlite3session_table_filter=y.sqlite3session_table_filter)(e,t,n),nl=r._sqlite3session_changeset=(e,t,n)=>(nl=r._sqlite3session_changeset=y.sqlite3session_changeset)(e,t,n),sl=r._sqlite3session_changeset_strm=(e,t,n)=>(sl=r._sqlite3session_changeset_strm=y.sqlite3session_changeset_strm)(e,t,n),il=r._sqlite3session_patchset_strm=(e,t,n)=>(il=r._sqlite3session_patchset_strm=y.sqlite3session_patchset_strm)(e,t,n),ol=r._sqlite3session_patchset=(e,t,n)=>(ol=r._sqlite3session_patchset=y.sqlite3session_patchset)(e,t,n),al=r._sqlite3session_enable=(e,t)=>(al=r._sqlite3session_enable=y.sqlite3session_enable)(e,t),ll=r._sqlite3session_indirect=(e,t)=>(ll=r._sqlite3session_indirect=y.sqlite3session_indirect)(e,t),cl=r._sqlite3session_isempty=e=>(cl=r._sqlite3session_isempty=y.sqlite3session_isempty)(e),_l=r._sqlite3session_memory_used=e=>(_l=r._sqlite3session_memory_used=y.sqlite3session_memory_used)(e),ul=r._sqlite3session_object_config=(e,t,n)=>(ul=r._sqlite3session_object_config=y.sqlite3session_object_config)(e,t,n),fl=r._sqlite3session_changeset_size=e=>(fl=r._sqlite3session_changeset_size=y.sqlite3session_changeset_size)(e),dl=r._sqlite3changeset_start=(e,t,n)=>(dl=r._sqlite3changeset_start=y.sqlite3changeset_start)(e,t,n),pl=r._sqlite3changeset_start_v2=(e,t,n,o)=>(pl=r._sqlite3changeset_start_v2=y.sqlite3changeset_start_v2)(e,t,n,o),hl=r._sqlite3changeset_start_strm=(e,t,n)=>(hl=r._sqlite3changeset_start_strm=y.sqlite3changeset_start_strm)(e,t,n),ml=r._sqlite3changeset_start_v2_strm=(e,t,n,o)=>(ml=r._sqlite3changeset_start_v2_strm=y.sqlite3changeset_start_v2_strm)(e,t,n,o),gl=r._sqlite3changeset_next=e=>(gl=r._sqlite3changeset_next=y.sqlite3changeset_next)(e),yl=r._sqlite3changeset_op=(e,t,n,o,s)=>(yl=r._sqlite3changeset_op=y.sqlite3changeset_op)(e,t,n,o,s),bl=r._sqlite3changeset_pk=(e,t,n)=>(bl=r._sqlite3changeset_pk=y.sqlite3changeset_pk)(e,t,n),ql=r._sqlite3changeset_old=(e,t,n)=>(ql=r._sqlite3changeset_old=y.sqlite3changeset_old)(e,t,n),wl=r._sqlite3changeset_new=(e,t,n)=>(wl=r._sqlite3changeset_new=y.sqlite3changeset_new)(e,t,n),xl=r._sqlite3changeset_conflict=(e,t,n)=>(xl=r._sqlite3changeset_conflict=y.sqlite3changeset_conflict)(e,t,n),vl=r._sqlite3changeset_fk_conflicts=(e,t)=>(vl=r._sqlite3changeset_fk_conflicts=y.sqlite3changeset_fk_conflicts)(e,t),El=r._sqlite3changeset_finalize=e=>(El=r._sqlite3changeset_finalize=y.sqlite3changeset_finalize)(e),Sl=r._sqlite3changeset_invert=(e,t,n,o)=>(Sl=r._sqlite3changeset_invert=y.sqlite3changeset_invert)(e,t,n,o),Al=r._sqlite3changeset_invert_strm=(e,t,n,o)=>(Al=r._sqlite3changeset_invert_strm=y.sqlite3changeset_invert_strm)(e,t,n,o),Il=r._sqlite3changeset_apply_v2=(e,t,n,o,s,i,g,b,B)=>(Il=r._sqlite3changeset_apply_v2=y.sqlite3changeset_apply_v2)(e,t,n,o,s,i,g,b,B),kl=r._sqlite3changeset_apply=(e,t,n,o,s,i)=>(kl=r._sqlite3changeset_apply=y.sqlite3changeset_apply)(e,t,n,o,s,i),Tl=r._sqlite3changeset_apply_v2_strm=(e,t,n,o,s,i,g,b,B)=>(Tl=r._sqlite3changeset_apply_v2_strm=y.sqlite3changeset_apply_v2_strm)(e,t,n,o,s,i,g,b,B),Fl=r._sqlite3changeset_apply_strm=(e,t,n,o,s,i)=>(Fl=r._sqlite3changeset_apply_strm=y.sqlite3changeset_apply_strm)(e,t,n,o,s,i),Ol=r._sqlite3changegroup_new=e=>(Ol=r._sqlite3changegroup_new=y.sqlite3changegroup_new)(e),Pl=r._sqlite3changegroup_add=(e,t,n)=>(Pl=r._sqlite3changegroup_add=y.sqlite3changegroup_add)(e,t,n),Ll=r._sqlite3changegroup_output=(e,t,n)=>(Ll=r._sqlite3changegroup_output=y.sqlite3changegroup_output)(e,t,n),Cl=r._sqlite3changegroup_add_strm=(e,t,n)=>(Cl=r._sqlite3changegroup_add_strm=y.sqlite3changegroup_add_strm)(e,t,n),Rl=r._sqlite3changegroup_output_strm=(e,t,n)=>(Rl=r._sqlite3changegroup_output_strm=y.sqlite3changegroup_output_strm)(e,t,n),Dl=r._sqlite3changegroup_delete=e=>(Dl=r._sqlite3changegroup_delete=y.sqlite3changegroup_delete)(e),Nl=r._sqlite3changeset_concat=(e,t,n,o,s,i)=>(Nl=r._sqlite3changeset_concat=y.sqlite3changeset_concat)(e,t,n,o,s,i),Ml=r._sqlite3changeset_concat_strm=(e,t,n,o,s,i)=>(Ml=r._sqlite3changeset_concat_strm=y.sqlite3changeset_concat_strm)(e,t,n,o,s,i),Ul=r._sqlite3session_config=(e,t)=>(Ul=r._sqlite3session_config=y.sqlite3session_config)(e,t),Bl=r._sqlite3_sourceid=()=>(Bl=r._sqlite3_sourceid=y.sqlite3_sourceid)(),jl=r._sqlite3__wasm_pstack_ptr=()=>(jl=r._sqlite3__wasm_pstack_ptr=y.sqlite3__wasm_pstack_ptr)(),zl=r._sqlite3__wasm_pstack_restore=e=>(zl=r._sqlite3__wasm_pstack_restore=y.sqlite3__wasm_pstack_restore)(e),Wl=r._sqlite3__wasm_pstack_alloc=e=>(Wl=r._sqlite3__wasm_pstack_alloc=y.sqlite3__wasm_pstack_alloc)(e),Ql=r._sqlite3__wasm_pstack_remaining=()=>(Ql=r._sqlite3__wasm_pstack_remaining=y.sqlite3__wasm_pstack_remaining)(),Vl=r._sqlite3__wasm_pstack_quota=()=>(Vl=r._sqlite3__wasm_pstack_quota=y.sqlite3__wasm_pstack_quota)(),Hl=r._sqlite3__wasm_db_error=(e,t,n)=>(Hl=r._sqlite3__wasm_db_error=y.sqlite3__wasm_db_error)(e,t,n),$l=r._sqlite3__wasm_test_struct=e=>($l=r._sqlite3__wasm_test_struct=y.sqlite3__wasm_test_struct)(e),Gl=r._sqlite3__wasm_enum_json=()=>(Gl=r._sqlite3__wasm_enum_json=y.sqlite3__wasm_enum_json)(),Kl=r._sqlite3__wasm_vfs_unlink=(e,t)=>(Kl=r._sqlite3__wasm_vfs_unlink=y.sqlite3__wasm_vfs_unlink)(e,t),Jl=r._sqlite3__wasm_db_vfs=(e,t)=>(Jl=r._sqlite3__wasm_db_vfs=y.sqlite3__wasm_db_vfs)(e,t),Xl=r._sqlite3__wasm_db_reset=e=>(Xl=r._sqlite3__wasm_db_reset=y.sqlite3__wasm_db_reset)(e),Yl=r._sqlite3__wasm_db_export_chunked=(e,t)=>(Yl=r._sqlite3__wasm_db_export_chunked=y.sqlite3__wasm_db_export_chunked)(e,t),Zl=r._sqlite3__wasm_db_serialize=(e,t,n,o,s)=>(Zl=r._sqlite3__wasm_db_serialize=y.sqlite3__wasm_db_serialize)(e,t,n,o,s),ec=r._sqlite3__wasm_vfs_create_file=(e,t,n,o)=>(ec=r._sqlite3__wasm_vfs_create_file=y.sqlite3__wasm_vfs_create_file)(e,t,n,o),tc=r._sqlite3__wasm_posix_create_file=(e,t,n)=>(tc=r._sqlite3__wasm_posix_create_file=y.sqlite3__wasm_posix_create_file)(e,t,n),rc=r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(rc=r._sqlite3__wasm_kvvfsMakeKeyOnPstack=y.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),nc=r._sqlite3__wasm_kvvfs_methods=()=>(nc=r._sqlite3__wasm_kvvfs_methods=y.sqlite3__wasm_kvvfs_methods)(),sc=r._sqlite3__wasm_vtab_config=(e,t,n)=>(sc=r._sqlite3__wasm_vtab_config=y.sqlite3__wasm_vtab_config)(e,t,n),ic=r._sqlite3__wasm_db_config_ip=(e,t,n,o)=>(ic=r._sqlite3__wasm_db_config_ip=y.sqlite3__wasm_db_config_ip)(e,t,n,o),oc=r._sqlite3__wasm_db_config_pii=(e,t,n,o,s)=>(oc=r._sqlite3__wasm_db_config_pii=y.sqlite3__wasm_db_config_pii)(e,t,n,o,s),ac=r._sqlite3__wasm_db_config_s=(e,t,n)=>(ac=r._sqlite3__wasm_db_config_s=y.sqlite3__wasm_db_config_s)(e,t,n),lc=r._sqlite3__wasm_config_i=(e,t)=>(lc=r._sqlite3__wasm_config_i=y.sqlite3__wasm_config_i)(e,t),cc=r._sqlite3__wasm_config_ii=(e,t,n)=>(cc=r._sqlite3__wasm_config_ii=y.sqlite3__wasm_config_ii)(e,t,n),_c=r._sqlite3__wasm_config_j=(e,t)=>(_c=r._sqlite3__wasm_config_j=y.sqlite3__wasm_config_j)(e,t),uc=r._sqlite3__wasm_qfmt_token=(e,t)=>(uc=r._sqlite3__wasm_qfmt_token=y.sqlite3__wasm_qfmt_token)(e,t),fc=r._sqlite3__wasm_init_wasmfs=e=>(fc=r._sqlite3__wasm_init_wasmfs=y.sqlite3__wasm_init_wasmfs)(e),dc=r._sqlite3__wasm_test_intptr=e=>(dc=r._sqlite3__wasm_test_intptr=y.sqlite3__wasm_test_intptr)(e),pc=r._sqlite3__wasm_test_voidptr=e=>(pc=r._sqlite3__wasm_test_voidptr=y.sqlite3__wasm_test_voidptr)(e),hc=r._sqlite3__wasm_test_int64_max=()=>(hc=r._sqlite3__wasm_test_int64_max=y.sqlite3__wasm_test_int64_max)(),mc=r._sqlite3__wasm_test_int64_min=()=>(mc=r._sqlite3__wasm_test_int64_min=y.sqlite3__wasm_test_int64_min)(),gc=r._sqlite3__wasm_test_int64_times2=e=>(gc=r._sqlite3__wasm_test_int64_times2=y.sqlite3__wasm_test_int64_times2)(e),yc=r._sqlite3__wasm_test_int64_minmax=(e,t)=>(yc=r._sqlite3__wasm_test_int64_minmax=y.sqlite3__wasm_test_int64_minmax)(e,t),bc=r._sqlite3__wasm_test_int64ptr=e=>(bc=r._sqlite3__wasm_test_int64ptr=y.sqlite3__wasm_test_int64ptr)(e),qc=r._sqlite3__wasm_test_stack_overflow=e=>(qc=r._sqlite3__wasm_test_stack_overflow=y.sqlite3__wasm_test_stack_overflow)(e),wc=r._sqlite3__wasm_test_str_hello=e=>(wc=r._sqlite3__wasm_test_str_hello=y.sqlite3__wasm_test_str_hello)(e),xc=r._sqlite3__wasm_SQLTester_strglob=(e,t)=>(xc=r._sqlite3__wasm_SQLTester_strglob=y.sqlite3__wasm_SQLTester_strglob)(e,t),vc=r._malloc=e=>(vc=r._malloc=y.malloc)(e),Ec=r._free=e=>(Ec=r._free=y.free)(e),Sc=r._realloc=(e,t)=>(Sc=r._realloc=y.realloc)(e,t),$r=(e,t)=>($r=y.emscripten_builtin_memalign)(e,t),Gr=e=>(Gr=y._emscripten_stack_restore)(e),Ac=e=>(Ac=y._emscripten_stack_alloc)(e),Kr=()=>(Kr=y.emscripten_stack_get_current)();r.wasmMemory=ht;var er,Jr;Wt=function e(){er||Xr(),er||(Wt=e)};function Xr(){if(Tt>0||!Jr&&(Jr=1,Ln(),Tt>0))return;function e(){er||(er=1,r.calledRun=1,!jt&&(Cn(),E(r),r.onRuntimeInitialized?.(),Rn()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),e()},1)):e()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Xr(),r.runSQLite3PostLoadInit=function(e){"use strict";"use strict";if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;let o=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof r<"u"&&r.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(o,{allocExportName:o.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:o.useStdAlloc?"free":"sqlite3_free",reallocExportName:o.useStdAlloc?"realloc":"sqlite3_realloc"},o),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof o[l]=="function"&&(o[l]=o[l]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;let s=Object.create(null),i=Object.create(null),g=l=>s.sqlite3_js_rc_str&&s.sqlite3_js_rc_str(l)||"Unknown result code #"+l,b=l=>typeof l=="number"&&l===(l|0);class B extends Error{constructor(...f){let u;if(f.length)if(b(f[0]))if(u=f[0],f.length===1)super(g(f[0]));else{let x=g(u);typeof f[1]=="object"?super(x,f[1]):(f[0]=x+":",super(f.join(" ")))}else f.length===2&&typeof f[1]=="object"?super(...f):super(f.join(" "));this.resultCode=u||s.SQLITE_ERROR,this.name="SQLite3Error"}}B.toss=(...l)=>{throw new B(...l)};let H=B.toss;o.wasmfsOpfsDir&&!/^\/[^/]+$/.test(o.wasmfsOpfsDir)&&H("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");let re=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,Z=function l(f){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),f>=l._min&&f<=l._max},ie=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,L=function l(f){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),f>=l._min&&f<=l._max},C=l=>l&&l.constructor&&re(l.constructor.BYTES_PER_ELEMENT)?l:!1,M=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,I=l=>l.buffer instanceof M,w=(l,f,u)=>I(l)?l.slice(f,u):l.subarray(f,u),U=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),V=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),$=l=>U(l)||H("Value is not of a supported TypedArray type."),S=new TextDecoder("utf-8"),J=function(l,f,u){return S.decode(w(l,f,u))},d=function(l){return V(l)?J(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(i.isPtr(l)&&(l=i.cstrToJs(l)),l)};class h extends Error{constructor(...f){f.length===2&&typeof f[1]=="object"?super(...f):f.length?super(f.join(" ")):super("Allocation failed."),this.resultCode=s.SQLITE_NOMEM,this.name="WasmAllocError"}}h.toss=(...l)=>{throw new h(...l)},Object.assign(s,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,f,u,x,X,_e,xe,he,Se)=>{},sqlite3_create_function:(l,f,u,x,X,_e,xe,he)=>{},sqlite3_create_window_function:(l,f,u,x,X,_e,xe,he,Se,Oe)=>{},sqlite3_prepare_v3:(l,f,u,x,X,_e)=>{},sqlite3_prepare_v2:(l,f,u,x,X)=>{},sqlite3_exec:(l,f,u,x,X)=>{},sqlite3_randomness:(l,f)=>{}});let k={affirmBindableTypedArray:$,flexibleString:d,bigIntFits32:ie,bigIntFits64:Z,bigIntFitsDouble:L,isBindableTypedArray:U,isInt32:re,isSQLableTypedArray:V,isTypedArray:C,typedArrayToString:J,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:I,toss:function(...l){throw new Error(l.join(" "))},toss3:H,typedArrayPart:w,affirmDbHeader:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));let f="SQLite format 3";f.length>l.byteLength&&H("Input does not contain an SQLite3 database header.");for(let u=0;u<f.length;++u)f.charCodeAt(u)!==l[u]&&H("Input does not contain an SQLite3 database header.")},affirmIsDb:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));let f=l.byteLength;(f<512||f%512!==0)&&H("Byte array size",f,"is invalid for an SQLite3 db."),k.affirmDbHeader(l)}};Object.assign(i,{ptrSizeof:o.wasmPtrSizeof||4,ptrIR:o.wasmPtrIR||"i32",bigIntEnabled:!!o.bigIntEnabled,exports:o.exports||H("Missing API config.exports (WASM module exports)."),memory:o.memory||o.exports.memory||H("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),i.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),$(l);let f=i.alloc(l.byteLength||1);return i.heapForSize(l.constructor).set(l.byteLength?l:[0],f),f};{let l=o.allocExportName,f=o.deallocExportName,u=o.reallocExportName;for(let x of[l,f,u])i.exports[x]instanceof Function||H("Missing required exports[",x,"] function.");i.alloc=function x(X){return x.impl(X)||h.toss("Failed to allocate",X," bytes.")},i.alloc.impl=i.exports[l],i.realloc=function x(X,_e){let xe=x.impl(X,_e);return _e?xe||h.toss("Failed to reallocate",_e," bytes."):0},i.realloc.impl=i.exports[u],i.dealloc=i.exports[f]}i.compileOptionUsed=function l(f){if(arguments.length){if(Array.isArray(f)){let u={};return f.forEach(x=>{u[x]=s.sqlite3_compileoption_used(x)}),u}else if(typeof f=="object")return Object.keys(f).forEach(u=>{f[u]=s.sqlite3_compileoption_used(u)}),f}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(xe,he){let Se=l._rx.exec(xe);he[0]=Se?Se[1]:xe,he[1]=Se?l._rxInt.test(Se[2])?+Se[2]:Se[2]:!0});let u={},x=[0,0],X=0,_e;for(;_e=s.sqlite3_compileoption_get(X++);)l._opt(_e,x),u[x[0]]=x[1];return l._result=u}return typeof f=="string"?!!s.sqlite3_compileoption_used(f):!1},i.pstack=Object.assign(Object.create(null),{restore:i.exports.sqlite3__wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=i.sizeofIR(l))&&h.toss("Invalid value for pstack.alloc(",arguments[0],")"),i.exports.sqlite3__wasm_pstack_alloc(l)||h.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,f){typeof f=="string"&&!(f=i.sizeofIR(f))&&h.toss("Invalid size value for allocChunks(",arguments[1],")");let u=i.pstack.alloc(l*f),x=[],X=0,_e=0;for(;X<l;++X,_e+=f)x.push(u+_e);return x},allocPtr:(l=1,f=!0)=>l===1?i.pstack.alloc(f?8:i.ptrSizeof):i.pstack.allocChunks(l,f?8:i.ptrSizeof),call:function(l){let f=i.pstack.pointer;try{return l(m)}finally{i.pstack.restore(f)}}}),Object.defineProperties(i.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3__wasm_pstack_remaining}}),s.sqlite3_randomness=(...l)=>{if(l.length===1&&k.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){let f=l[0];if(f.byteLength===0)return i.exports.sqlite3_randomness(0,0),f;let u=i.pstack.pointer;try{let x=f.byteLength,X=0,_e=i.exports.sqlite3_randomness,xe=i.heap8u(),he=x<512?x:512,Se=i.pstack.alloc(he);do{let Oe=x>he?he:x;_e(Oe,Se),f.set(w(xe,Se,Se+Oe),X),x-=Oe,X+=Oe}while(x>0)}catch(x){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",x)}finally{i.pstack.restore(u)}return f}i.exports.sqlite3_randomness(...l)};let W;if(s.sqlite3_wasmfs_opfs_dir=function(){if(W!==void 0)return W;let l=o.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return W="";try{return l&&i.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],l)===0?W=l:W=""}catch{return W=""}},s.sqlite3_wasmfs_filename_is_persistent=function(l){let f=s.sqlite3_wasmfs_opfs_dir();return f&&l?l.startsWith(f+"/"):!1},s.sqlite3_js_db_uses_vfs=function(l,f,u=0){try{let x=s.sqlite3_vfs_find(f);return x?l?x===s.sqlite3_js_db_vfs(l,u)?x:!1:x===s.sqlite3_vfs_find(0)?x:!1:!1}catch{return!1}},s.sqlite3_js_vfs_list=function(){let l=[],f=s.sqlite3_vfs_find(0);for(;f;){let u=new s.sqlite3_vfs(f);l.push(i.cstrToJs(u.$zName)),f=u.$pNext,u.dispose()}return l},s.sqlite3_js_db_export=function(l,f=0){l=i.xWrap.testConvertArg("sqlite3*",l),l||H("Invalid sqlite3* argument."),i.bigIntEnabled||H("BigInt64 support is not enabled.");let u=i.scopedAllocPush(),x;try{let X=i.scopedAlloc(8+i.ptrSizeof),_e=X+8,xe=f?i.isPtr(f)?f:i.scopedAllocCString(""+f):0,he=i.exports.sqlite3__wasm_db_serialize(l,xe,_e,X,0);he&&H("Database serialization failed with code",m.capi.sqlite3_js_rc_str(he)),x=i.peekPtr(_e);let Se=i.peek(X,"i64");return he=Se?i.heap8u().slice(x,x+Number(Se)):new Uint8Array,he}finally{x&&i.exports.sqlite3_free(x),i.scopedAllocPop(u)}},s.sqlite3_js_db_vfs=(l,f=0)=>k.sqlite3__wasm_db_vfs(l,f),s.sqlite3_js_aggregate_context=(l,f)=>s.sqlite3_aggregate_context(l,f)||(f?h.toss("Cannot allocate",f,"bytes for sqlite3_aggregate_context()"):0),s.sqlite3_js_posix_create_file=function(l,f,u){let x;f&&i.isPtr(f)?x=f:f instanceof ArrayBuffer||f instanceof Uint8Array?(x=i.allocFromTypedArray(f),(arguments.length<3||!k.isInt32(u)||u<0)&&(u=f.byteLength)):B.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!k.isInt32(u)||u<0)&&B.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");let X=k.sqlite3__wasm_posix_create_file(l,x,u);X&&B.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(X))}finally{i.dealloc(x)}},s.sqlite3_js_vfs_create_file=function(l,f,u,x){o.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let X;u?(i.isPtr(u)?X=u:u instanceof ArrayBuffer&&(u=new Uint8Array(u)),u instanceof Uint8Array?(X=i.allocFromTypedArray(u),(arguments.length<4||!k.isInt32(x)||x<0)&&(x=u.byteLength)):B.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):X=0,(!k.isInt32(x)||x<0)&&(i.dealloc(X),B.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{let _e=k.sqlite3__wasm_vfs_create_file(l,f,X,x);_e&&B.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(_e))}finally{i.dealloc(X)}},s.sqlite3_js_sql_to_string=l=>{if(typeof l=="string")return l;let f=d(v);return f===v?void 0:f},k.isUIThread()){let l=function(f){let u=Object.create(null);return u.prefix="kvvfs-"+f,u.stores=[],(f==="session"||f==="")&&u.stores.push(globalThis.sessionStorage),(f==="local"||f==="")&&u.stores.push(globalThis.localStorage),u};s.sqlite3_js_kvvfs_clear=function(f=""){let u=0,x=l(f);return x.stores.forEach(X=>{let _e=[],xe;for(xe=0;xe<X.length;++xe){let he=X.key(xe);he.startsWith(x.prefix)&&_e.push(he)}_e.forEach(he=>X.removeItem(he)),u+=_e.length}),u},s.sqlite3_js_kvvfs_size=function(f=""){let u=0,x=l(f);return x.stores.forEach(X=>{let _e;for(_e=0;_e<X.length;++_e){let xe=X.key(_e);xe.startsWith(x.prefix)&&(u+=xe.length,u+=X.getItem(xe).length)}}),u*2}}s.sqlite3_db_config=function(l,f,...u){switch(f){case s.SQLITE_DBCONFIG_ENABLE_FKEY:case s.SQLITE_DBCONFIG_ENABLE_TRIGGER:case s.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case s.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case s.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case s.SQLITE_DBCONFIG_ENABLE_QPSG:case s.SQLITE_DBCONFIG_TRIGGER_EQP:case s.SQLITE_DBCONFIG_RESET_DATABASE:case s.SQLITE_DBCONFIG_DEFENSIVE:case s.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case s.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case s.SQLITE_DBCONFIG_DQS_DML:case s.SQLITE_DBCONFIG_DQS_DDL:case s.SQLITE_DBCONFIG_ENABLE_VIEW:case s.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case s.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case s.SQLITE_DBCONFIG_STMT_SCANSTATUS:case s.SQLITE_DBCONFIG_REVERSE_SCANORDER:case s.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case s.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case s.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=i.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(l,f,u[0],u[1]||0);case s.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=i.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(l,f,u[0],u[1],u[2]);case s.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=i.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(l,f,u[0]);default:return s.SQLITE_MISUSE}}.bind(Object.create(null)),s.sqlite3_value_to_js=function(l,f=!0){let u,x=s.sqlite3_value_type(l);switch(x){case s.SQLITE_INTEGER:i.bigIntEnabled?(u=s.sqlite3_value_int64(l),k.bigIntFitsDouble(u)&&(u=Number(u))):u=s.sqlite3_value_double(l);break;case s.SQLITE_FLOAT:u=s.sqlite3_value_double(l);break;case s.SQLITE_TEXT:u=s.sqlite3_value_text(l);break;case s.SQLITE_BLOB:{let X=s.sqlite3_value_bytes(l),_e=s.sqlite3_value_blob(l);X&&!_e&&m.WasmAllocError.toss("Cannot allocate memory for blob argument of",X,"byte(s)"),u=X?i.heap8u().slice(_e,_e+Number(X)):null;break}case s.SQLITE_NULL:u=null;break;default:f&&H(s.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",x),u=void 0}return u},s.sqlite3_values_to_js=function(l,f,u=!0){let x,X=[];for(x=0;x<l;++x)X.push(s.sqlite3_value_to_js(i.peekPtr(f+i.ptrSizeof*x),u));return X},s.sqlite3_result_error_js=function(l,f){f instanceof h?s.sqlite3_result_error_nomem(l):s.sqlite3_result_error(l,""+f,-1)},s.sqlite3_result_js=function(l,f){if(f instanceof Error){s.sqlite3_result_error_js(l,f);return}try{switch(typeof f){case"undefined":break;case"boolean":s.sqlite3_result_int(l,f?1:0);break;case"bigint":k.bigIntFits32(f)?s.sqlite3_result_int(l,Number(f)):k.bigIntFitsDouble(f)?s.sqlite3_result_double(l,Number(f)):i.bigIntEnabled?k.bigIntFits64(f)?s.sqlite3_result_int64(l,f):H("BigInt value",f.toString(),"is too BigInt for int64."):H("BigInt value",f.toString(),"is too BigInt.");break;case"number":{let u;k.isInt32(f)?u=s.sqlite3_result_int:i.bigIntEnabled&&Number.isInteger(f)&&k.bigIntFits64(BigInt(f))?u=s.sqlite3_result_int64:u=s.sqlite3_result_double,u(l,f);break}case"string":{let[u,x]=i.allocCString(f,!0);s.sqlite3_result_text(l,u,x,s.SQLITE_WASM_DEALLOC);break}case"object":if(f===null){s.sqlite3_result_null(l);break}else if(k.isBindableTypedArray(f)){let u=i.allocFromTypedArray(f);s.sqlite3_result_blob(l,u,f.byteLength,s.SQLITE_WASM_DEALLOC);break}default:H("Don't not how to handle this UDF result value:",typeof f,f)}}catch(u){s.sqlite3_result_error_js(l,u)}},s.sqlite3_column_js=function(l,f,u=!0){let x=s.sqlite3_column_value(l,f);return x===0?void 0:s.sqlite3_value_to_js(x,u)};let Q=function(l,f,u){u=s[u],this.ptr?i.pokePtr(this.ptr,0):this.ptr=i.allocPtr();let x=u(l,f,this.ptr);if(x)return B.toss(x,arguments[2]+"() failed with code "+x);let X=i.peekPtr(this.ptr);return X?s.sqlite3_value_to_js(X,!0):void 0}.bind(Object.create(null));s.sqlite3_preupdate_new_js=(l,f)=>Q(l,f,"sqlite3_preupdate_new"),s.sqlite3_preupdate_old_js=(l,f)=>Q(l,f,"sqlite3_preupdate_old"),s.sqlite3changeset_new_js=(l,f)=>Q(l,f,"sqlite3changeset_new"),s.sqlite3changeset_old_js=(l,f)=>Q(l,f,"sqlite3changeset_old");let m={WasmAllocError:h,SQLite3Error:B,capi:s,util:k,wasm:i,config:o,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let f=t.initializersAsync;delete t.initializersAsync;let u=async()=>(m.__isUnderTest||(delete m.util,delete m.StructBinder),m),x=_e=>{throw o.error("an async sqlite3 initializer failed:",_e),_e};if(!f||!f.length)return l.isReady=u().catch(x);f=f.map(_e=>_e instanceof Function?async xe=>_e(m):_e),f.push(u);let X=Promise.resolve(m);for(;f.length;)X=X.then(f.shift());return l.isReady=X.catch(x)},scriptInfo:void 0};try{t.initializers.forEach(l=>{l(m)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete t.initializers,t.sqlite3=m,m},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){"use strict";t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);let n=(...d)=>{throw new Error(d.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});let o=t.pointerIR||"i32",s=t.ptrSizeof=o==="i32"?4:o==="i64"?8:n("Unhandled ptrSizeof:",o),i=Object.create(null);i.heapSize=0,i.memory=null,i.freeFuncIndexes=[],i.scopedAlloc=[],i.utf8Decoder=new TextDecoder,i.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=d=>{switch(d){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return s;default:return(""+d).endsWith("*")?s:void 0}};let g=function(){if(!i.memory)i.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(i.heapSize===i.memory.buffer.byteLength)return i;let d=i.memory.buffer;return i.HEAP8=new Int8Array(d),i.HEAP8U=new Uint8Array(d),i.HEAP16=new Int16Array(d),i.HEAP16U=new Uint16Array(d),i.HEAP32=new Int32Array(d),i.HEAP32U=new Uint32Array(d),t.bigIntEnabled&&(i.HEAP64=new BigInt64Array(d),i.HEAP64U=new BigUint64Array(d)),i.HEAP32F=new Float32Array(d),i.HEAP64F=new Float64Array(d),i.heapSize=d.byteLength,i};t.heap8=()=>g().HEAP8,t.heap8u=()=>g().HEAP8U,t.heap16=()=>g().HEAP16,t.heap16u=()=>g().HEAP16U,t.heap32=()=>g().HEAP32,t.heap32u=()=>g().HEAP32U,t.heapForSize=function(d,h=!0){let k,W=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:g();switch(d){case Int8Array:return W.HEAP8;case Uint8Array:return W.HEAP8U;case Int16Array:return W.HEAP16;case Uint16Array:return W.HEAP16U;case Int32Array:return W.HEAP32;case Uint32Array:return W.HEAP32U;case 8:return h?W.HEAP8U:W.HEAP8;case 16:return h?W.HEAP16U:W.HEAP16;case 32:return h?W.HEAP32U:W.HEAP32;case 64:if(W.HEAP64)return h?W.HEAP64U:W.HEAP64;break;default:if(t.bigIntEnabled){if(d===globalThis.BigUint64Array)return W.HEAP64U;if(d===globalThis.BigInt64Array)return W.HEAP64;break}}n("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(d){let h=t.functionTable();return d<h.length?h.get(d):void 0},t.jsFuncToWasm=function d(h,k){if(d._||(d._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(m,l,f){f<128?m[l](f):m[l](f%128|128,f>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(m){let l=d._.rxJSig.exec(m);return l?l[2]:m.substr(1)},letterType:m=>d._.sigTypes[m]||n("Invalid signature letter:",m),pushSigType:(m,l)=>m.push(d._.typeCodes[d._.letterType(l)])}),typeof h=="string"){let m=k;k=h,h=m}let W=d._.sigParams(k),Q=[1,96];d._.uleb128Encode(Q,"push",W.length);for(let m of W)d._.pushSigType(Q,m);return k[0]==="v"?Q.push(0):(Q.push(1),d._.pushSigType(Q,k[0])),d._.uleb128Encode(Q,"unshift",Q.length),Q.unshift(0,97,115,109,1,0,0,0,1),Q.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(Q)),{e:{f:h}}).exports.f};let b=function(h,k,W){if(W&&!i.scopedAlloc.length&&n("No scopedAllocPush() scope is active."),typeof h=="string"){let f=k;k=h,h=f}(typeof k!="string"||!(h instanceof Function))&&n("Invalid arguments: expecting (function,signature) or (signature,function).");let Q=t.functionTable(),m=Q.length,l;for(;i.freeFuncIndexes.length&&(l=i.freeFuncIndexes.pop(),Q.get(l));){l=null;continue}l||(l=m,Q.grow(1));try{return Q.set(l,h),W&&i.scopedAlloc[i.scopedAlloc.length-1].push(l),l}catch(f){if(!(f instanceof TypeError))throw l===m&&i.freeFuncIndexes.push(m),f}try{let f=t.jsFuncToWasm(h,k);Q.set(l,f),W&&i.scopedAlloc[i.scopedAlloc.length-1].push(l)}catch(f){throw l===m&&i.freeFuncIndexes.push(m),f}return l};t.installFunction=(d,h)=>b(d,h,!1),t.scopedInstallFunction=(d,h)=>b(d,h,!0),t.uninstallFunction=function(d){if(!d&&d!==0)return;let h=i.freeFuncIndexes,k=t.functionTable();h.push(d);let W=k.get(d);return k.set(d,null),W},t.peek=function(h,k="i8"){k.endsWith("*")&&(k=o);let W=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:g(),Q=Array.isArray(h)?[]:void 0,m;do{switch(Q&&(h=arguments[0].shift()),k){case"i1":case"i8":m=W.HEAP8[h>>0];break;case"i16":m=W.HEAP16[h>>1];break;case"i32":m=W.HEAP32[h>>2];break;case"float":case"f32":m=W.HEAP32F[h>>2];break;case"double":case"f64":m=Number(W.HEAP64F[h>>3]);break;case"i64":if(t.bigIntEnabled){m=BigInt(W.HEAP64[h>>3]);break}default:n("Invalid type for peek():",k)}Q&&Q.push(m)}while(Q&&arguments[0].length);return Q||m},t.poke=function(d,h,k="i8"){k.endsWith("*")&&(k=o);let W=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:g();for(let Q of Array.isArray(d)?d:[d])switch(k){case"i1":case"i8":W.HEAP8[Q>>0]=h;continue;case"i16":W.HEAP16[Q>>1]=h;continue;case"i32":W.HEAP32[Q>>2]=h;continue;case"float":case"f32":W.HEAP32F[Q>>2]=h;continue;case"double":case"f64":W.HEAP64F[Q>>3]=h;continue;case"i64":if(W.HEAP64){W.HEAP64[Q>>3]=BigInt(h);continue}default:n("Invalid type for poke(): "+k)}return this},t.peekPtr=(...d)=>t.peek(d.length===1?d[0]:d,o),t.pokePtr=(d,h=0)=>t.poke(d,h,o),t.peek8=(...d)=>t.peek(d.length===1?d[0]:d,"i8"),t.poke8=(d,h)=>t.poke(d,h,"i8"),t.peek16=(...d)=>t.peek(d.length===1?d[0]:d,"i16"),t.poke16=(d,h)=>t.poke(d,h,"i16"),t.peek32=(...d)=>t.peek(d.length===1?d[0]:d,"i32"),t.poke32=(d,h)=>t.poke(d,h,"i32"),t.peek64=(...d)=>t.peek(d.length===1?d[0]:d,"i64"),t.poke64=(d,h)=>t.poke(d,h,"i64"),t.peek32f=(...d)=>t.peek(d.length===1?d[0]:d,"f32"),t.poke32f=(d,h)=>t.poke(d,h,"f32"),t.peek64f=(...d)=>t.peek(d.length===1?d[0]:d,"f64"),t.poke64f=(d,h)=>t.poke(d,h,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=d=>typeof d=="number"&&d===(d|0)&&d>=0,t.isPtr=t.isPtr32,t.cstrlen=function(d){if(!d||!t.isPtr(d))return null;let h=g().HEAP8U,k=d;for(;h[k]!==0;++k);return k-d};let B=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,H=function(d,h,k){return i.utf8Decoder.decode(d.buffer instanceof B?d.slice(h,k):d.subarray(h,k))};t.cstrToJs=function(d){let h=t.cstrlen(d);return h?H(g().HEAP8U,d,d+h):h===null?h:""},t.jstrlen=function(d){if(typeof d!="string")return null;let h=d.length,k=0;for(let W=0;W<h;++W){let Q=d.charCodeAt(W);Q>=55296&&Q<=57343&&(Q=65536+((Q&1023)<<10)|d.charCodeAt(++W)&1023),Q<=127?++k:Q<=2047?k+=2:Q<=65535?k+=3:k+=4}return k},t.jstrcpy=function(d,h,k=0,W=-1,Q=!0){if((!h||!(h instanceof Int8Array)&&!(h instanceof Uint8Array))&&n("jstrcpy() target must be an Int8Array or Uint8Array."),W<0&&(W=h.length-k),!(W>0)||!(k>=0))return 0;let m=0,l=d.length,f=k,u=k+W-(Q?1:0);for(;m<l&&k<u;++m){let x=d.charCodeAt(m);if(x>=55296&&x<=57343&&(x=65536+((x&1023)<<10)|d.charCodeAt(++m)&1023),x<=127){if(k>=u)break;h[k++]=x}else if(x<=2047){if(k+1>=u)break;h[k++]=192|x>>6,h[k++]=128|x&63}else if(x<=65535){if(k+2>=u)break;h[k++]=224|x>>12,h[k++]=128|x>>6&63,h[k++]=128|x&63}else{if(k+3>=u)break;h[k++]=240|x>>18,h[k++]=128|x>>12&63,h[k++]=128|x>>6&63,h[k++]=128|x&63}}return Q&&(h[k++]=0),k-f},t.cstrncpy=function(d,h,k){if((!d||!h)&&n("cstrncpy() does not accept NULL strings."),k<0)k=t.cstrlen(strPtr)+1;else if(!(k>0))return 0;let W=t.heap8u(),Q=0,m;for(;Q<k&&(m=W[h+Q]);++Q)W[d+Q]=m;return Q<k&&(W[d+Q++]=0),Q},t.jstrToUintArray=(d,h=!1)=>i.utf8Encoder.encode(h?d+"\0":d);let re=(d,h)=>{(!(d.alloc instanceof Function)||!(d.dealloc instanceof Function))&&n("Object is missing alloc() and/or dealloc() function(s)","required by",h+"().")},Z=function(d,h,k,W){if(re(t,W),typeof d!="string")return null;{let Q=i.utf8Encoder.encode(d),m=k(Q.length+1),l=g().HEAP8U;return l.set(Q,m),l[m+Q.length]=0,h?[m,Q.length]:m}};t.allocCString=(d,h=!1)=>Z(d,h,t.alloc,"allocCString()"),t.scopedAllocPush=function(){re(t,"scopedAllocPush");let d=[];return i.scopedAlloc.push(d),d},t.scopedAllocPop=function(d){re(t,"scopedAllocPop");let h=arguments.length?i.scopedAlloc.indexOf(d):i.scopedAlloc.length-1;h<0&&n("Invalid state object for scopedAllocPop()."),arguments.length===0&&(d=i.scopedAlloc[h]),i.scopedAlloc.splice(h,1);for(let k;k=d.pop();)t.functionEntry(k)?t.uninstallFunction(k):t.dealloc(k)},t.scopedAlloc=function(d){i.scopedAlloc.length||n("No scopedAllocPush() scope is active.");let h=t.alloc(d);return i.scopedAlloc[i.scopedAlloc.length-1].push(h),h},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>i.scopedAlloc.length,set:()=>n("The 'active' property is read-only.")}),t.scopedAllocCString=(d,h=!1)=>Z(d,h,t.scopedAlloc,"scopedAllocCString()");let ie=function(d,h){let k=t[d?"scopedAlloc":"alloc"]((h.length+1)*t.ptrSizeof),W=0;return h.forEach(Q=>{t.pokePtr(k+t.ptrSizeof*W++,t[d?"scopedAllocCString":"allocCString"](""+Q))}),t.pokePtr(k+t.ptrSizeof*W,0),k};t.scopedAllocMainArgv=d=>ie(!0,d),t.allocMainArgv=d=>ie(!1,d),t.cArgvToJs=(d,h)=>{let k=[];for(let W=0;W<d;++W){let Q=t.peekPtr(h+t.ptrSizeof*W);k.push(Q?t.cstrToJs(Q):null)}return k},t.scopedAllocCall=function(d){t.scopedAllocPush();try{return d()}finally{t.scopedAllocPop()}};let L=function(d,h,k){re(t,k);let W=h?"i64":o,Q=t[k](d*(h?8:s));if(t.poke(Q,0,W),d===1)return Q;let m=[Q];for(let l=1;l<d;++l)Q+=h?8:s,m[l]=Q,t.poke(Q,0,W);return m};t.allocPtr=(d=1,h=!0)=>L(d,h,"alloc"),t.scopedAllocPtr=(d=1,h=!0)=>L(d,h,"scopedAlloc"),t.xGet=function(d){return t.exports[d]||n("Cannot find exported symbol:",d)};let C=(d,h)=>n(d+"() requires",h,"argument(s).");t.xCall=function(d,...h){let k=d instanceof Function?d:t.xGet(d);return k instanceof Function||n("Exported symbol",d,"is not a function."),k.length!==h.length&&C(k===d?k.name:d,k.length),arguments.length===2&&Array.isArray(arguments[1])?k.apply(null,arguments[1]):k.apply(null,h)},i.xWrap=Object.create(null),i.xWrap.convert=Object.create(null),i.xWrap.convert.arg=new Map,i.xWrap.convert.result=new Map;let M=i.xWrap.convert.arg,I=i.xWrap.convert.result;t.bigIntEnabled&&M.set("i64",d=>BigInt(d));let w=o==="i32"?d=>d|0:d=>BigInt(d)|BigInt(0);M.set("i32",w).set("i16",d=>(d|0)&65535).set("i8",d=>(d|0)&255).set("f32",d=>Number(d).valueOf()).set("float",M.get("f32")).set("f64",M.get("f32")).set("double",M.get("f64")).set("int",M.get("i32")).set("null",d=>d).set(null,M.get("null")).set("**",w).set("*",w),I.set("*",w).set("pointer",w).set("number",d=>Number(d)).set("void",d=>{}).set("null",d=>d).set(null,I.get("null"));{let d=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&d.push("i64");let h=M.get(o);for(let k of d)M.set(k+"*",h),I.set(k+"*",h),I.set(k,M.get(k)||n("Missing arg converter:",k))}let U=function(d){return typeof d=="string"?t.scopedAllocCString(d):d?w(d):null};M.set("string",U).set("utf8",U).set("pointer",U),I.set("string",d=>t.cstrToJs(d)).set("utf8",I.get("string")).set("string:dealloc",d=>{try{return d?t.cstrToJs(d):null}finally{t.dealloc(d)}}).set("utf8:dealloc",I.get("string:dealloc")).set("json",d=>JSON.parse(t.cstrToJs(d))).set("json:dealloc",d=>{try{return d?JSON.parse(t.cstrToJs(d)):null}finally{t.dealloc(d)}});let V=class{constructor(d){this.name=d.name||"unnamed adapter"}convertArg(d,h,k){n("AbstractArgAdapter must be subclassed.")}};M.FuncPtrAdapter=class qt extends V{constructor(h){super(h),M.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",h),this.name=h.name||"unnamed",this.signature=h.signature,h.contextKey instanceof Function&&(this.contextKey=h.contextKey,h.bindScope||(h.bindScope="context")),this.bindScope=h.bindScope||n("FuncPtrAdapter options requires a bindScope (explicit or implied)."),qt.bindScopes.indexOf(h.bindScope)<0&&n("Invalid options.bindScope ("+h.bindMod+") for FuncPtrAdapter. Expecting one of: ("+qt.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=h.callProxy instanceof Function?h.callProxy:void 0}contextKey(h,k){return this}contextMap(h){let k=this.__cmap||(this.__cmap=new Map),W=k.get(h);return W===void 0&&k.set(h,W=[]),W}convertArg(h,k,W){let Q=this.singleton;if(!Q&&this.isContext&&(Q=this.contextMap(this.contextKey(k,W))),Q&&Q[0]===h)return Q[1];if(h instanceof Function){this.callProxy&&(h=this.callProxy(h));let m=b(h,this.signature,this.isTransient);if(qt.debugFuncInstall&&qt.debugOut("FuncPtrAdapter installed",this,this.contextKey(k,W),"@"+m,h),Q){if(Q[1]){qt.debugFuncInstall&&qt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(k,W),"@"+Q[1],h);try{i.scopedAlloc[i.scopedAlloc.length-1].push(Q[1])}catch{}}Q[0]=h,Q[1]=m}return m}else if(t.isPtr(h)||h===null||h===void 0){if(Q&&Q[1]&&Q[1]!==h){qt.debugFuncInstall&&qt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(k,W),"@"+Q[1],h);try{i.scopedAlloc[i.scopedAlloc.length-1].push(Q[1])}catch{}Q[0]=Q[1]=h|0}return h||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},M.FuncPtrAdapter.warnOnUse=!1,M.FuncPtrAdapter.debugFuncInstall=!1,M.FuncPtrAdapter.debugOut=console.debug.bind(console),M.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];let $=d=>M.get(d)||n("Argument adapter not found:",d),S=d=>I.get(d)||n("Result adapter not found:",d);i.xWrap.convertArg=(d,...h)=>$(d)(...h),i.xWrap.convertArgNoCheck=(d,...h)=>M.get(d)(...h),i.xWrap.convertResult=(d,h)=>d===null?h:d?S(d)(h):void 0,i.xWrap.convertResultNoCheck=(d,h)=>d===null?h:d?I.get(d)(h):void 0,t.xWrap=function(d,h,...k){arguments.length===3&&Array.isArray(arguments[2])&&(k=arguments[2]),t.isPtr(d)&&(d=t.functionEntry(d)||n("Function pointer not found in WASM function table."));let W=d instanceof Function,Q=W?d:t.xGet(d);if(W&&(d=Q.name||"unnamed function"),k.length!==Q.length&&C(d,Q.length),h===null&&Q.length===0)return Q;h!=null&&S(h);for(let l of k)l instanceof V?M.set(l,(...f)=>l.convertArg(...f)):$(l);let m=i.xWrap;return Q.length===0?(...l)=>l.length?C(d,Q.length):m.convertResult(h,Q.call(null)):function(...l){l.length!==Q.length&&C(d,Q.length);let f=t.scopedAllocPush();try{let u=0;for(;u<l.length;++u)l[u]=m.convertArgNoCheck(k[u],l[u],l,u);return m.convertResultNoCheck(h,Q.apply(null,l))}finally{t.scopedAllocPop(f)}}};let J=function(d,h,k,W,Q,m){if(typeof k=="string"){if(h===1)return m.get(k);if(h===2){if(W)W instanceof Function||n(Q,"requires a function argument.");else return m.delete(k),d;return m.set(k,W),d}}n("Invalid arguments to",Q)};return t.xWrap.resultAdapter=function d(h,k){return J(d,arguments.length,h,k,"resultAdapter()",I)},t.xWrap.argAdapter=function d(h,k){return J(d,arguments.length,h,k,"argAdapter()",M)},t.xWrap.FuncPtrAdapter=M.FuncPtrAdapter,t.xCallWrapped=function(d,h,k,...W){return Array.isArray(arguments[3])&&(W=arguments[3]),t.xWrap(d,h,k||[]).apply(null,W||[])},t.xWrap.testConvertArg=i.xWrap.convertArg,t.xWrap.testConvertResult=i.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=function(t){let n=()=>fetch(t.uri,{credentials:"same-origin"}),o=this,s=function(g){if(t.wasmUtilTarget){let b=(...H)=>{throw new Error(H.join(" "))},B=t.wasmUtilTarget;if(B.module=g.module,B.instance=g.instance,B.instance.exports.memory||(B.memory=t.imports&&t.imports.env&&t.imports.env.memory||b("Missing 'memory' object!")),!B.alloc&&g.instance.exports.malloc){let H=g.instance.exports;B.alloc=function(re){return H.malloc(re)||b("Allocation of",re,"bytes failed.")},B.dealloc=function(re){H.free(re)}}o(B)}return t.onload&&t.onload(g,t),g};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(n(),t.imports||{}).then(s)}:function(){return n().then(b=>b.arrayBuffer()).then(b=>WebAssembly.instantiate(b,t.imports||{})).then(s)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(n){let o=(...R)=>{throw new Error(R.join(" "))};!(n.heap instanceof WebAssembly.Memory)&&!(n.heap instanceof Function)&&o("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(R){n[R]instanceof Function||o("Config option '"+R+"' must be a function.")});let s=t,i=n.heap instanceof Function?n.heap:()=>new Uint8Array(n.heap.buffer),g=n.alloc,b=n.dealloc,B=n.log||console.log.bind(console),H=n.memberPrefix||"",re=n.memberSuffix||"",Z=n.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!n.bigIntEnabled,ie=globalThis.BigInt,L=globalThis.BigInt64Array,C=n.ptrSizeof||4,M=n.ptrIR||"i32";s.debugFlags||(s.__makeDebugFlags=function(R=null){R&&R.__flags&&(R=R.__flags);let ae=function le(de){return arguments.length===0?le.__flags:(de<0?(delete le.__flags.getter,delete le.__flags.setter,delete le.__flags.alloc,delete le.__flags.dealloc):(le.__flags.getter=(1&de)!==0,le.__flags.setter=(2&de)!==0,le.__flags.alloc=(4&de)!==0,le.__flags.dealloc=(8&de)!==0),le._flags)};return Object.defineProperty(ae,"__flags",{iterable:!1,writable:!1,value:Object.create(R)}),R||ae(0),ae},s.debugFlags=s.__makeDebugFlags());let I=(function(){let R=new ArrayBuffer(2);return new DataView(R).setInt16(0,256,!0),new Int16Array(R)[0]===256})(),w=R=>R[1]==="(",U=R=>R==="p"||R==="P",V=R=>R==="P",$=R=>w(R)?"p":R[0],S=function(R){switch($(R)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return M;case"j":return"i64";case"f":return"float";case"d":return"double"}o("Unhandled signature IR:",R)},J=L?()=>!0:()=>o("BigInt64Array is not available."),d=function(R){switch($(R)){case"p":case"P":case"s":{switch(C){case 4:return"getInt32";case 8:return J()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return J()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}o("Unhandled DataView getter for signature:",R)},h=function(R){switch($(R)){case"p":case"P":case"s":{switch(C){case 4:return"setInt32";case 8:return J()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return J()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}o("Unhandled DataView setter for signature:",R)},k=function(R){switch($(R)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return J()&&ie;case"p":case"P":case"s":switch(C){case 4:return Number;case 8:return J()&&ie}break}o("Unhandled DataView set wrapper for signature:",R)},W=(R,ae)=>R+"::"+ae,Q=function(R,ae){return()=>o(W(R,ae),"is read-only.")},m=new WeakMap,l="(pointer-is-external)",f=function(R,ae,le){if(le||(le=m.get(ae)),le){if(m.delete(ae),Array.isArray(ae.ondispose)){let de;for(;de=ae.ondispose.shift();)try{de instanceof Function?de.call(ae):de instanceof Ee?de.dispose():typeof de=="number"&&b(de)}catch(Ue){console.warn("ondispose() for",R.structName,"@",le,"threw. NOT propagating it.",Ue)}}else if(ae.ondispose instanceof Function)try{ae.ondispose()}catch(de){console.warn("ondispose() for",R.structName,"@",le,"threw. NOT propagating it.",de)}delete ae.ondispose,R.debugFlags.__flags.dealloc&&B("debug.dealloc:",ae[l]?"EXTERNAL":"",R.structName,"instance:",R.structInfo.sizeof,"bytes @"+le),ae[l]||b(le)}},u=R=>({configurable:!1,writable:!1,iterable:!1,value:R}),x=function(R,ae,le){let de=!le;le?Object.defineProperty(ae,l,u(le)):(le=g(R.structInfo.sizeof),le||o("Allocation of",R.structName,"structure failed."));try{R.debugFlags.__flags.alloc&&B("debug.alloc:",de?"":"EXTERNAL",R.structName,"instance:",R.structInfo.sizeof,"bytes @"+le),de&&i().fill(0,le,le+R.structInfo.sizeof),m.set(ae,le)}catch(Ue){throw f(R,ae,le),Ue}},X=function(){let R=this.pointer;return R?new Uint8Array(i().slice(R,R+this.structInfo.sizeof)):null},xe=u(R=>H+R+re),he=function(R,ae,le=!0){let de=R.members[ae];if(!de&&(H||re)){for(let Ue of Object.values(R.members))if(Ue.key===ae){de=Ue;break}!de&&le&&o(W(R.name,ae),"is not a mapped struct member.")}return de},Se=function R(ae,le,de=!1){R._||(R._=Ve=>Ve.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));let Ue=he(ae.structInfo,le,!0);return de?R._(Ue.signature):Ue.signature},Oe={configurable:!1,enumerable:!1,get:function(){return m.get(this)},set:()=>o("Cannot assign the 'pointer' property of a struct.")},Fe=u(function(){let R=[];for(let ae of Object.keys(this.structInfo.members))R.push(this.memberKey(ae));return R}),ne=new TextDecoder("utf-8"),A=new TextEncoder,z=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ee=function(R,ae,le){return ne.decode(R.buffer instanceof z?R.slice(ae,le):R.subarray(ae,le))},q=function(R,ae,le=!1){let de=he(R.structInfo,ae,le);return de&&de.signature.length===1&&de.signature[0]==="s"?de:!1},P=function(R){R.signature!=="s"&&o("Invalid member type signature for C-string value:",JSON.stringify(R))},j=function(ae,le){let de=he(ae.structInfo,le,!0);P(de);let Ue=ae[de.key];if(!Ue)return null;let Ve=Ue,ze=i();for(;ze[Ve]!==0;++Ve);return Ue===Ve?"":ee(ze,Ue,Ve)},se=function(R,...ae){R.ondispose?Array.isArray(R.ondispose)||(R.ondispose=[R.ondispose]):R.ondispose=[],R.ondispose.push(...ae)},te=function(R){let ae=A.encode(R),le=g(ae.length+1);le||o("Allocation error while duplicating string:",R);let de=i();return de.set(ae,le),de[le+ae.length]=0,le},be=function(R,ae,le){let de=he(R.structInfo,ae,!0);P(de);let Ue=te(le);return R[de.key]=Ue,se(R,Ue),R},Ee=function(ae,le){arguments[2]!==u&&o("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:u(ae),structInfo:u(le)})};Ee.prototype=Object.create(null,{dispose:u(function(){f(this.constructor,this)}),lookupMember:u(function(R,ae=!0){return he(this.structInfo,R,ae)}),memberToJsString:u(function(R){return j(this,R)}),memberIsString:u(function(R,ae=!0){return q(this,R,ae)}),memberKey:xe,memberKeys:Fe,memberSignature:u(function(R,ae=!1){return Se(this,R,ae)}),memoryDump:u(X),pointer:Oe,setMemberCString:u(function(R,ae){return be(this,R,ae)})}),Object.assign(Ee.prototype,{addOnDispose:function(...R){return se(this,...R),this}}),Object.defineProperties(Ee,{allocCString:u(te),isA:u(R=>R instanceof Ee),hasExternalPointer:u(R=>R instanceof Ee&&!!R[l]),memberKey:xe});let pe=R=>Number.isFinite(R)||R instanceof(ie||Number),et=function R(ae,le,de){if(!R._){R._={getters:{},setters:{},sw:{}};let ot=["i","c","C","p","P","s","f","d","v()"];Z&&ot.push("j"),ot.forEach(function(gt){R._.getters[gt]=d(gt),R._.setters[gt]=h(gt),R._.sw[gt]=k(gt)});let Ic=/^[ipPsjfdcC]$/,kc=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;R.sigCheck=function(gt,Tc,Yr,gr){Object.prototype.hasOwnProperty.call(gt,Yr)&&o(gt.structName,"already has a property named",Yr+"."),Ic.test(gr)||kc.test(gr)||o("Malformed signature for",W(gt.structName,Tc)+":",gr)}}let Ue=ae.memberKey(le);R.sigCheck(ae.prototype,le,Ue,de.signature),de.key=Ue,de.name=le;let Ve=$(de.signature),ze=W(ae.prototype.structName,Ue),Ge=ae.prototype.debugFlags.__flags,Nt=Object.create(null);Nt.configurable=!1,Nt.enumerable=!1,Nt.get=function(){Ge.getter&&B("debug.getter:",R._.getters[Ve],"for",S(Ve),ze,"@",this.pointer,"+",de.offset,"sz",de.sizeof);let ot=new DataView(i().buffer,this.pointer+de.offset,de.sizeof)[R._.getters[Ve]](0,I);return Ge.getter&&B("debug.getter:",ze,"result =",ot),ot},de.readOnly?Nt.set=Q(ae.prototype.structName,Ue):Nt.set=function(ot){if(Ge.setter&&B("debug.setter:",R._.setters[Ve],"for",S(Ve),ze,"@",this.pointer,"+",de.offset,"sz",de.sizeof,ot),this.pointer||o("Cannot set struct property on disposed instance."),ot===null)ot=0;else for(;!pe(ot);){if(V(de.signature)&&ot instanceof Ee){ot=ot.pointer||0,Ge.setter&&B("debug.setter:",ze,"resolved to",ot);break}o("Invalid value for pointer-type",ze+".")}new DataView(i().buffer,this.pointer+de.offset,de.sizeof)[R._.setters[Ve]](0,R._.sw[Ve](ot),I)},Object.defineProperty(ae.prototype,Ue,Nt)},Ze=function R(ae,le){arguments.length===1?(le=ae,ae=le.name):le.name||(le.name=ae),ae||o("Struct name is required.");let de=!1;Object.keys(le.members).forEach(ze=>{let Ge=le.members[ze];Ge.sizeof?Ge.sizeof===1?Ge.signature==="c"||Ge.signature==="C"||o("Unexpected sizeof==1 member",W(le.name,ze),"with signature",Ge.signature):(Ge.sizeof%4!==0&&(console.warn("Invalid struct member description =",Ge,"from",le),o(ae,"member",ze,"sizeof is not aligned. sizeof="+Ge.sizeof)),Ge.offset%4!==0&&(console.warn("Invalid struct member description =",Ge,"from",le),o(ae,"member",ze,"offset is not aligned. offset="+Ge.offset))):o(ae,"member",ze,"is missing sizeof."),(!de||de.offset<Ge.offset)&&(de=Ge)}),de?le.sizeof<de.offset+de.sizeof&&o("Invalid struct config:",ae,"max member offset ("+de.offset+") ","extends past end of struct (sizeof="+le.sizeof+")."):o("No member property descriptions found.");let Ue=u(s.__makeDebugFlags(R.debugFlags)),Ve=function ze(Ge){this instanceof ze?arguments.length?((Ge!==(Ge|0)||Ge<=0)&&o("Invalid pointer value for",ae,"constructor."),x(ze,this,Ge)):x(ze,this):o("The",ae,"constructor may only be called via 'new'.")};return Object.defineProperties(Ve,{debugFlags:Ue,isA:u(ze=>ze instanceof Ve),memberKey:xe,memberKeys:Fe,methodInfoForKey:u(function(ze){}),structInfo:u(le),structName:u(ae)}),Ve.prototype=new Ee(ae,le,u),Object.defineProperties(Ve.prototype,{debugFlags:Ue,constructor:u(Ve)}),Object.keys(le.members).forEach(ze=>et(Ve,ze,le.members[ze])),Ve};return Ze.StructType=Ee,Ze.config=n,Ze.allocCString=te,Ze.debugFlags||(Ze.debugFlags=s.__makeDebugFlags(s.debugFlags)),Ze},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let n=(...I)=>{throw new Error(I.join(" "))},o=t.SQLite3Error.toss,s=t.capi,i=t.wasm,g=t.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(I,w)=>I[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:I=>I[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:I=>{let w;return(U,V,$,S)=>{try{let J=i.cArgvToJs(V,$);return w||(w=i.cArgvToJs(V,S)),I(J,w)|0}catch(J){return J.resultCode||s.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:I=>I[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(I,w)=>I[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.exports.sqlite3_progress_handler&&i.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(I,w)=>I[0]}),"*"]]),i.exports.sqlite3_stmt_explain&&i.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),i.exports.sqlite3_set_authorizer&&i.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(I,w)=>I[0],callProxy:I=>(w,U,V,$,S,J)=>{try{return V=V&&i.cstrToJs(V),$=$&&i.cstrToJs($),S=S&&i.cstrToJs(S),J=J&&i.cstrToJs(J),I(w,U,V,$,S,J)||0}catch(d){return d.resultCode||s.SQLITE_ERROR}}}),"*"]]),i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:I=>I[0],callProxy:I=>(w,U,V,$,S)=>{I(w,U,i.cstrToJs(V),i.cstrToJs($),S)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],i.bigIntEnabled&&i.exports.sqlite3_declare_vtab&&i.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),i.bigIntEnabled&&i.exports.sqlite3_preupdate_hook&&i.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:I=>I[0],callProxy:I=>(w,U,V,$,S,J,d)=>{I(w,U,V,i.cstrToJs($),i.cstrToJs(S),J,d)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),i.bigIntEnabled&&i.exports.sqlite3changegroup_add&&i.exports.sqlite3session_create&&i.exports.sqlite3_preupdate_hook){let I={signature:"i(ps)",callProxy:w=>(U,V)=>{try{return w(U,i.cstrToJs(V))|0}catch($){return $.resultCode||s.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...I,contextKey:(w,U)=>w[0]}),"*"]])}i.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{let I=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",S=>I(g.flexibleString(S))),i.xWrap.argAdapter("string:static",function(S){return i.isPtr(S)?S:(S=""+S,this[S]||(this[S]=i.allocCString(S)))}.bind(Object.create(null)));let w=i.xWrap.argAdapter("*"),U=function(){};i.xWrap.argAdapter("sqlite3_filename",w)("sqlite3_context*",w)("sqlite3_value*",w)("void*",w)("sqlite3_changegroup*",w)("sqlite3_changeset_iter*",w)("sqlite3_session*",w)("sqlite3_stmt*",S=>w(S instanceof(t?.oo1?.Stmt||U)?S.pointer:S))("sqlite3*",S=>w(S instanceof(t?.oo1?.DB||U)?S.pointer:S))("sqlite3_vfs*",S=>typeof S=="string"?s.sqlite3_vfs_find(S)||t.SQLite3Error.toss(s.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",S):w(S instanceof(s.sqlite3_vfs||U)?S.pointer:S)),i.exports.sqlite3_declare_vtab&&i.xWrap.argAdapter("sqlite3_index_info*",S=>w(S instanceof(s.sqlite3_index_info||U)?S.pointer:S))("sqlite3_module*",S=>w(S instanceof(s.sqlite3_module||U)?S.pointer:S));let V=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",V)("sqlite3_context*",V)("sqlite3_stmt*",V)("sqlite3_value*",V)("sqlite3_vfs*",V)("void*",V),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(let S of i.bindingSignatures)s[S[0]]=i.xWrap.apply(null,S);for(let S of i.bindingSignatures.wasmInternal)g[S[0]]=i.xWrap.apply(null,S);let $=function(S){return()=>n(S+"() is unavailable due to lack","of BigInt support in this build.")};for(let S of i.bindingSignatures.int64)s[S[0]]=i.bigIntEnabled?i.xWrap.apply(null,S):$(S[0]);if(delete i.bindingSignatures,i.exports.sqlite3__wasm_db_error){let S=i.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");g.sqlite3__wasm_db_error=function(J,d,h){return d instanceof t.WasmAllocError?(d=s.SQLITE_NOMEM,h=0):d instanceof Error&&(h=h||""+d,d=d.resultCode||s.SQLITE_ERROR),J?S(J,d,h):d}}else g.sqlite3__wasm_db_error=function(S,J,d){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),J}}{let I=i.xCall("sqlite3__wasm_enum_json");I||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(I));let w=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&w.push("serialize","session","vtab");for(let $ of w)for(let S of Object.entries(i.ctype[$]))s[S[0]]=S[1];i.functionEntry(s.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+s.SQLITE_WASM_DEALLOC+").");let U=Object.create(null);for(let $ of["resultCodes"])for(let S of Object.entries(i.ctype[$]))U[S[1]]=S[0];s.sqlite3_js_rc_str=$=>U[$];let V=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!g.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(let $ of i.ctype.structs)V[$.name]||(s[$.name]=t.StructBinder($));if(s.sqlite3_index_info){for(let $ of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])s.sqlite3_index_info[$]=s[$],delete s[$];s.sqlite3_vtab_config=i.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}let b=(I,w,U)=>g.sqlite3__wasm_db_error(I,s.SQLITE_MISUSE,w+"() requires "+U+" argument"+(U===1?"":"s")+"."),B=I=>g.sqlite3__wasm_db_error(I,s.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),H=I=>i.xWrap.argAdapter("sqlite3*")(I),re=I=>i.isPtr(I)?i.cstrToJs(I):I,Z=function(I,w){I=H(I);let U=this.dbMap.get(I);if(w)!U&&w>0&&this.dbMap.set(I,U=Object.create(null));else return this.dbMap.delete(I),U;return U}.bind(Object.assign(Object.create(null),{dbMap:new Map}));Z.addCollation=function(I,w){let U=Z(I,1);U.collation||(U.collation=new Set),U.collation.add(re(w).toLowerCase())},Z._addUDF=function(I,w,U,V){w=re(w).toLowerCase();let $=V.get(w);$||V.set(w,$=new Set),$.add(U<0?-1:U)},Z.addFunction=function(I,w,U){let V=Z(I,1);V.udf||(V.udf=new Map),this._addUDF(I,w,U,V.udf)},i.exports.sqlite3_create_window_function&&(Z.addWindowFunc=function(I,w,U){let V=Z(I,1);V.wudf||(V.wudf=new Map),this._addUDF(I,w,U,V.wudf)}),Z.cleanup=function(I){I=H(I);let w=[I];for(let $ of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){let S=i.exports[$];if(S){w.length=S.length;try{s[$](...w)}catch(J){t.config.warn("close-time call of",$+"(",w,") threw:",J)}}}let U=Z(I,0);if(!U)return;if(U.collation){for(let $ of U.collation)try{s.sqlite3_create_collation_v2(I,$,s.SQLITE_UTF8,0,0,0)}catch{}delete U.collation}let V;for(V=0;V<2;++V){let $=V?U.wudf:U.udf;if(!$)continue;let S=V?s.sqlite3_create_window_function:s.sqlite3_create_function_v2;for(let J of $){let d=J[0],h=J[1],k=[I,d,0,s.SQLITE_UTF8,0,0,0,0,0];V&&k.push(0);for(let W of h)try{k[2]=W,S.apply(null,k)}catch{}h.clear()}$.clear()}delete U.udf,delete U.wudf};{let I=i.xWrap("sqlite3_close_v2","int","sqlite3*");s.sqlite3_close_v2=function(w){if(arguments.length!==1)return b(w,"sqlite3_close_v2",1);if(w)try{Z.cleanup(w)}catch{}return I(w)}}if(s.sqlite3session_create){let I=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);s.sqlite3session_delete=function(w){if(arguments.length!==1)return b(pDb,"sqlite3session_delete",1);w&&s.sqlite3session_table_filter(w,0,0),I(w)}}{let I=(U,V)=>"argv["+V+"]:"+U[0]+":"+i.cstrToJs(U[1]).toLowerCase(),w=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:I}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:I})]);s.sqlite3_create_collation_v2=function(U,V,$,S,J,d){if(arguments.length!==6)return b(U,"sqlite3_create_collation_v2",6);if(($&15)===0)$|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==($&15))return B(U);try{let h=w(U,V,$,S,J,d);return h===0&&J instanceof Function&&Z.addCollation(U,V),h}catch(h){return g.sqlite3__wasm_db_error(U,h)}},s.sqlite3_create_collation=(U,V,$,S,J)=>arguments.length===5?s.sqlite3_create_collation_v2(U,V,$,S,J,0):b(U,"sqlite3_create_collation",5)}{let I=function($,S){return $[0]+":"+($[2]<0?-1:$[2])+":"+S+":"+i.cstrToJs($[1]).toLowerCase()},w=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:I,callProxy:$=>(S,J,d)=>{try{$(S,...s.sqlite3_values_to_js(J,d))}catch(h){s.sqlite3_result_error_js(S,h)}}},xFinalAndValue:{signature:"v(p)",contextKey:I,callProxy:$=>S=>{try{s.sqlite3_result_js(S,$(S))}catch(J){s.sqlite3_result_error_js(S,J)}}},xFunc:{signature:"v(pip)",contextKey:I,callProxy:$=>(S,J,d)=>{try{s.sqlite3_result_js(S,$(S,...s.sqlite3_values_to_js(J,d)))}catch(h){s.sqlite3_result_error_js(S,h)}}},xDestroy:{signature:"v(p)",contextKey:I,callProxy:$=>S=>{try{$(S)}catch(J){console.error("UDF xDestroy method threw:",J)}}}}),U=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...w.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...w.xDestroy})]),V=i.exports.sqlite3_create_window_function?i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...w.xDestroy})]):void 0;s.sqlite3_create_function_v2=function $(S,J,d,h,k,W,Q,m,l){if($.length!==arguments.length)return b(S,"sqlite3_create_function_v2",$.length);if((h&15)===0)h|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(h&15))return B(S);try{let f=U(S,J,d,h,k,W,Q,m,l);return f===0&&(W instanceof Function||Q instanceof Function||m instanceof Function||l instanceof Function)&&Z.addFunction(S,J,d),f}catch(f){return console.error("sqlite3_create_function_v2() setup threw:",f),g.sqlite3__wasm_db_error(S,f,"Creation of UDF threw: "+f)}},s.sqlite3_create_function=function $(S,J,d,h,k,W,Q,m){return $.length===arguments.length?s.sqlite3_create_function_v2(S,J,d,h,k,W,Q,m,0):b(S,"sqlite3_create_function",$.length)},V?s.sqlite3_create_window_function=function $(S,J,d,h,k,W,Q,m,l,f){if($.length!==arguments.length)return b(S,"sqlite3_create_window_function",$.length);if((h&15)===0)h|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(h&15))return B(S);try{let u=V(S,J,d,h,k,W,Q,m,l,f);return u===0&&(W instanceof Function||Q instanceof Function||m instanceof Function||l instanceof Function||f instanceof Function)&&Z.addWindowFunc(S,J,d),u}catch(u){return console.error("sqlite3_create_window_function() setup threw:",u),g.sqlite3__wasm_db_error(S,u,"Creation of UDF threw: "+u)}}:delete s.sqlite3_create_window_function,s.sqlite3_create_function_v2.udfSetResult=s.sqlite3_create_function.udfSetResult=s.sqlite3_result_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfSetResult=s.sqlite3_result_js),s.sqlite3_create_function_v2.udfConvertArgs=s.sqlite3_create_function.udfConvertArgs=s.sqlite3_values_to_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfConvertArgs=s.sqlite3_values_to_js),s.sqlite3_create_function_v2.udfSetError=s.sqlite3_create_function.udfSetError=s.sqlite3_result_error_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfSetError=s.sqlite3_result_error_js)}{let I=(U,V)=>(typeof U=="string"?V=-1:g.isSQLableTypedArray(U)?(V=U.byteLength,U=g.typedArrayToString(U instanceof ArrayBuffer?new Uint8Array(U):U)):Array.isArray(U)&&(U=U.join(""),V=-1),[U,V]),w={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};s.sqlite3_prepare_v3=function U(V,$,S,J,d,h){if(U.length!==arguments.length)return b(V,"sqlite3_prepare_v3",U.length);let[k,W]=I($,S);switch(typeof k){case"string":return w.basic(V,k,W,J,d,null);case"number":return w.full(V,k,W,J,d,h);default:return g.sqlite3__wasm_db_error(V,s.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},s.sqlite3_prepare_v2=function U(V,$,S,J,d){return U.length===arguments.length?s.sqlite3_prepare_v3(V,$,S,0,J,d):b(V,"sqlite3_prepare_v2",U.length)}}{let I=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),w=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);s.sqlite3_bind_text=function U(V,$,S,J,d){if(U.length!==arguments.length)return b(s.sqlite3_db_handle(V),"sqlite3_bind_text",U.length);if(i.isPtr(S)||S===null)return I(V,$,S,J,d);S instanceof ArrayBuffer?S=new Uint8Array(S):Array.isArray(pMem)&&(S=pMem.join(""));let h,k;try{if(g.isSQLableTypedArray(S))h=i.allocFromTypedArray(S),k=S.byteLength;else if(typeof S=="string")[h,k]=i.allocCString(S);else return g.sqlite3__wasm_db_error(s.sqlite3_db_handle(V),s.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return I(V,$,h,k,s.SQLITE_WASM_DEALLOC)}catch(W){return i.dealloc(h),g.sqlite3__wasm_db_error(s.sqlite3_db_handle(V),W)}},s.sqlite3_bind_blob=function U(V,$,S,J,d){if(U.length!==arguments.length)return b(s.sqlite3_db_handle(V),"sqlite3_bind_blob",U.length);if(i.isPtr(S)||S===null)return w(V,$,S,J,d);S instanceof ArrayBuffer?S=new Uint8Array(S):Array.isArray(S)&&(S=S.join(""));let h,k;try{if(g.isBindableTypedArray(S))h=i.allocFromTypedArray(S),k=J>=0?J:S.byteLength;else if(typeof S=="string")[h,k]=i.allocCString(S);else return g.sqlite3__wasm_db_error(s.sqlite3_db_handle(V),s.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return w(V,$,h,k,s.SQLITE_WASM_DEALLOC)}catch(W){return i.dealloc(h),g.sqlite3__wasm_db_error(s.sqlite3_db_handle(V),W)}}}s.sqlite3_config=function(I,...w){if(arguments.length<2)return s.SQLITE_MISUSE;switch(I){case s.SQLITE_CONFIG_COVERING_INDEX_SCAN:case s.SQLITE_CONFIG_MEMSTATUS:case s.SQLITE_CONFIG_SMALL_MALLOC:case s.SQLITE_CONFIG_SORTERREF_SIZE:case s.SQLITE_CONFIG_STMTJRNL_SPILL:case s.SQLITE_CONFIG_URI:return i.exports.sqlite3__wasm_config_i(I,w[0]);case s.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3__wasm_config_ii(I,w[0],w[1]);case s.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3__wasm_config_j(I,w[0]);case s.SQLITE_CONFIG_GETMALLOC:case s.SQLITE_CONFIG_GETMUTEX:case s.SQLITE_CONFIG_GETPCACHE2:case s.SQLITE_CONFIG_GETPCACHE:case s.SQLITE_CONFIG_HEAP:case s.SQLITE_CONFIG_LOG:case s.SQLITE_CONFIG_MALLOC:case s.SQLITE_CONFIG_MMAP_SIZE:case s.SQLITE_CONFIG_MULTITHREAD:case s.SQLITE_CONFIG_MUTEX:case s.SQLITE_CONFIG_PAGECACHE:case s.SQLITE_CONFIG_PCACHE2:case s.SQLITE_CONFIG_PCACHE:case s.SQLITE_CONFIG_PCACHE_HDRSZ:case s.SQLITE_CONFIG_PMASZ:case s.SQLITE_CONFIG_SERIALIZED:case s.SQLITE_CONFIG_SINGLETHREAD:case s.SQLITE_CONFIG_SQLLOG:case s.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return s.SQLITE_NOTFOUND}};{let I=new Set;s.sqlite3_auto_extension=function(w){if(w instanceof Function)w=i.installFunction("i(ppp)",w);else if(arguments.length!==1||!i.isPtr(w))return s.SQLITE_MISUSE;let U=i.exports.sqlite3_auto_extension(w);return w!==arguments[0]&&(U===0?I.add(w):i.uninstallFunction(w)),U},s.sqlite3_cancel_auto_extension=function(w){return!w||arguments.length!==1||!i.isPtr(w)?0:i.exports.sqlite3_cancel_auto_extension(w)},s.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(let w of I)i.uninstallFunction(w);I.clear()}}let ie=s.sqlite3_vfs_find("kvvfs");if(ie)if(g.isUIThread()){let I=new s.sqlite3_kvvfs_methods(i.exports.sqlite3__wasm_kvvfs_methods());delete s.sqlite3_kvvfs_methods;let w=i.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,U=i.pstack,V=S=>i.peek(S)===115?sessionStorage:localStorage,$={xRead:(S,J,d,h)=>{let k=U.pointer,W=i.scopedAllocPush();try{let Q=w(S,J);if(!Q)return-3;let m=i.cstrToJs(Q),l=V(S).getItem(m);if(!l)return-1;let f=l.length;if(h<=0)return f;if(h===1)return i.poke(d,0),f;let u=i.scopedAllocCString(l);return h>f+1&&(h=f+1),i.heap8u().copyWithin(d,u,u+h-1),i.poke(d+h-1,0),h-1}catch(Q){return console.error("kvstorageRead()",Q),-2}finally{U.restore(k),i.scopedAllocPop(W)}},xWrite:(S,J,d)=>{let h=U.pointer;try{let k=w(S,J);if(!k)return 1;let W=i.cstrToJs(k);return V(S).setItem(W,i.cstrToJs(d)),0}catch(k){return console.error("kvstorageWrite()",k),s.SQLITE_IOERR}finally{U.restore(h)}},xDelete:(S,J)=>{let d=U.pointer;try{let h=w(S,J);return h?(V(S).removeItem(i.cstrToJs(h)),0):1}catch(h){return console.error("kvstorageDelete()",h),s.SQLITE_IOERR}finally{U.restore(d)}}};for(let S of Object.keys($))I[I.memberKey(S)]=i.installFunction(I.memberSignature(S),$[S])}else s.sqlite3_vfs_unregister(ie);i.xWrap.FuncPtrAdapter.warnOnUse=!0;let L=t.StructBinder,C=function I(w,U,V,$=I.installMethodArgcCheck){if(w instanceof L.StructType?!(V instanceof Function)&&!i.isPtr(V)&&n("Usage error: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(h,k)=>I(w,h,k,$);I.argcProxy||(I.argcProxy=function(h,k,W,Q){return function(...m){return W.length!==arguments.length&&n("Argument mismatch for",h.structInfo.name+"::"+k+": Native signature is:",Q),W.apply(this,m)}},I.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((h,k)=>{if(typeof h=="number")try{i.uninstallFunction(h)}catch{}}),delete this.ondispose.__removeFuncList)});let S=w.memberSignature(U);S.length<2&&n("Member",U,"does not have a function pointer signature:",S);let J=w.memberKey(U),d=$&&!i.isPtr(V)?I.argcProxy(w,J,V,S):V;if(i.isPtr(d))d&&!i.functionEntry(d)&&n("Pointer",d,"is not a WASM function table entry."),w[J]=d;else{let h=i.installFunction(d,w.memberSignature(U,!0));w[J]=h,(!w.ondispose||!w.ondispose.__removeFuncList)&&(w.addOnDispose("ondispose.__removeFuncList handler",I.removeFuncList),w.ondispose.__removeFuncList=[]),w.ondispose.__removeFuncList.push(J,h)}return(h,k)=>I(w,h,k,$)};C.installMethodArgcCheck=!1;let M=function(I,w,U=C.installMethodArgcCheck){let V=new Map;for(let $ of Object.keys(w)){let S=w[$],J=V.get(S);if(J){let d=I.memberKey($);I[d]=I[I.memberKey(J)]}else C(I,$,S,U),V.set(S,$)}return I};L.StructType.prototype.installMethod=function(w,U,V=C.installMethodArgcCheck){return arguments.length<3&&w&&typeof w=="object"?M(this,...arguments):C(this,...arguments)},L.StructType.prototype.installMethods=function(I,w=C.installMethodArgcCheck){return M(this,I,w)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.50.4",libVersionNumber:3050004,sourceId:"2025-07-30 19:33:53 4d8adfb30e03f9cf27f800a2c1ba3c48fb4ca1b08b0f5ed59a4d5ecbf45e20a3",downloadVersion:3500400}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=(...m)=>{throw new Error(m.join(" "))},o=(...m)=>{throw new t.SQLite3Error(...m)},s=t.capi,i=t.wasm,g=t.util,b=new WeakMap,B=new WeakMap,H=(m,l,f)=>{let u=Object.getOwnPropertyDescriptor(m,l);return u?u.value:f},re=function(m,l){return l&&(m instanceof C&&(m=m.pointer),o(l,"sqlite3 result code",l+":",m?s.sqlite3_errmsg(m):s.sqlite3_errstr(l))),arguments[0]},Z=i.installFunction("i(ippp)",function(m,l,f,u){s.SQLITE_TRACE_STMT===m&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+l+":",i.cstrToJs(u))}.bind({counter:0})),ie=Object.create(null),L=function m(...l){if(!m._name2vfs){m._name2vfs=Object.create(null);let Fe=typeof importScripts=="function"?ne=>o("The VFS for",ne,"is only available in the main window thread."):!1;m._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:Fe||(()=>"local")},m._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:Fe||(()=>"session")}}let f=m.normalizeArgs(...l),u=f.filename,x=f.vfs,X=f.flags;(typeof u!="string"&&typeof u!="number"||typeof X!="string"||x&&typeof x!="string"&&typeof x!="number")&&(t.config.error("Invalid DB ctor args",f,arguments),o("Invalid arguments for DB constructor."));let _e=typeof u=="number"?i.cstrToJs(u):u,xe=m._name2vfs[_e];xe&&(x=xe.vfs,u=_e=xe.filename(_e));let he,Se=0;X.indexOf("c")>=0&&(Se|=s.SQLITE_OPEN_CREATE|s.SQLITE_OPEN_READWRITE),X.indexOf("w")>=0&&(Se|=s.SQLITE_OPEN_READWRITE),Se===0&&(Se|=s.SQLITE_OPEN_READONLY),Se|=s.SQLITE_OPEN_EXRESCODE;let Oe=i.pstack.pointer;try{let Fe=i.pstack.allocPtr(),ne=s.sqlite3_open_v2(u,Fe,Se,x||0);he=i.peekPtr(Fe),re(he,ne),s.sqlite3_extended_result_codes(he,1),X.indexOf("t")>=0&&s.sqlite3_trace_v2(he,s.SQLITE_TRACE_STMT,Z,he)}catch(Fe){throw he&&s.sqlite3_close_v2(he),Fe}finally{i.pstack.restore(Oe)}this.filename=_e,b.set(this,he),B.set(this,Object.create(null));try{let Fe=s.sqlite3_js_db_vfs(he)||o("Internal error: cannot get VFS for new db handle."),ne=ie[Fe];ne&&(ne instanceof Function?ne(this,t):re(he,s.sqlite3_exec(he,ne,0,0,0)))}catch(Fe){throw this.close(),Fe}};L.setVfsPostOpenCallback=function(m,l){l instanceof Function||o("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),ie[m]=l},L.normalizeArgs=function(m=":memory:",l="c",f=null){let u={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(u,arguments[0]),u.flags===void 0&&(u.flags="c"),u.vfs===void 0&&(u.vfs=null),u.filename===void 0&&(u.filename=":memory:")):(u.filename=m,u.flags=l,u.vfs=f),u};let C=function(...m){L.apply(this,m)};C.dbCtorHelper=L;let M={null:1,number:2,string:3,boolean:4,blob:5};M.undefined==M.null,i.bigIntEnabled&&(M.bigint=M.number);let I=function(){M!==arguments[2]&&o(s.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],b.set(this,arguments[1]),this.parameterCount=s.sqlite3_bind_parameter_count(this.pointer)},w=function(m){return m.pointer||o("DB has been closed."),m},U=function(m,l){return(l!==(l|0)||l<0||l>=m.columnCount)&&o("Column index",l,"is out of range."),m},V=function(m,l){let f=Object.create(null);switch(f.opt=Object.create(null),l.length){case 1:typeof l[0]=="string"||g.isSQLableTypedArray(l[0])||Array.isArray(l[0])?f.sql=l[0]:l[0]&&typeof l[0]=="object"&&(f.opt=l[0],f.sql=f.opt.sql);break;case 2:f.sql=l[0],f.opt=l[1];break;default:o("Invalid argument count for exec().")}f.sql=g.flexibleString(f.sql),typeof f.sql!="string"&&o("Missing SQL argument or unsupported SQL value type.");let u=f.opt;switch(u.returnValue){case"resultRows":u.resultRows||(u.resultRows=[]),f.returnVal=()=>u.resultRows;break;case"saveSql":u.saveSql||(u.saveSql=[]),f.returnVal=()=>u.saveSql;break;case void 0:case"this":f.returnVal=()=>m;break;default:o("Invalid returnValue value:",u.returnValue)}if(!u.callback&&!u.returnValue&&u.rowMode!==void 0&&(u.resultRows||(u.resultRows=[]),f.returnVal=()=>u.resultRows),u.callback||u.resultRows)switch(u.rowMode===void 0?"array":u.rowMode){case"object":f.cbArg=(x,X)=>{X.columnNames||(X.columnNames=x.getColumnNames([]));let _e=x.get([]),xe=Object.create(null);for(let he in X.columnNames)xe[X.columnNames[he]]=_e[he];return xe};break;case"array":f.cbArg=x=>x.get([]);break;case"stmt":Array.isArray(u.resultRows)&&o("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),f.cbArg=x=>x;break;default:if(g.isInt32(u.rowMode)){f.cbArg=x=>x.get(u.rowMode);break}else if(typeof u.rowMode=="string"&&u.rowMode.length>1&&u.rowMode[0]==="$"){let x=u.rowMode.substr(1);f.cbArg=X=>{let _e=X.get(Object.create(null))[x];return _e===void 0?o(s.SQLITE_NOTFOUND,"exec(): unknown result column:",x):_e};break}o("Invalid rowMode:",u.rowMode)}return f},$=(m,l,f,...u)=>{let x=m.prepare(l);try{let X=x.bind(f).step()?x.get(...u):void 0;return x.reset(),X}finally{x.finalize()}},S=(m,l,f,u)=>m.exec({sql:l,bind:f,rowMode:u,returnValue:"resultRows"});C.checkRc=(m,l)=>re(m,l),C.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return w(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}let m=this.pointer;if(Object.keys(B.get(this)).forEach((l,f)=>{if(f&&f.pointer)try{f.finalize()}catch{}}),b.delete(this),B.delete(this),s.sqlite3_close_v2(m),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(m=!1,l=!1){let f=w(this).pointer;return m?l?s.sqlite3_total_changes64(f):s.sqlite3_total_changes(f):l?s.sqlite3_changes64(f):s.sqlite3_changes(f)},dbFilename:function(m="main"){return s.sqlite3_db_filename(w(this).pointer,m)},dbName:function(m=0){return s.sqlite3_db_name(w(this).pointer,m)},dbVfsName:function(m=0){let l,f=s.sqlite3_js_db_vfs(w(this).pointer,m);if(f){let u=new s.sqlite3_vfs(f);try{l=i.cstrToJs(u.$zName)}finally{u.dispose()}}return l},prepare:function(m){w(this);let l=i.pstack.pointer,f,u;try{f=i.pstack.alloc(8),C.checkRc(this,s.sqlite3_prepare_v2(this.pointer,m,-1,f,null)),u=i.peekPtr(f)}finally{i.pstack.restore(l)}u||o("Cannot prepare empty SQL.");let x=new I(this,u,M);return B.get(this)[u]=x,x},exec:function(){w(this);let m=V(this,arguments);if(!m.sql)return o("exec() requires an SQL string.");let l=m.opt,f=l.callback,u=Array.isArray(l.resultRows)?l.resultRows:void 0,x,X=l.bind,_e=!!(m.cbArg||l.columnNames||u),xe=i.scopedAllocPush(),he=Array.isArray(l.saveSql)?l.saveSql:void 0;try{let Se=g.isSQLableTypedArray(m.sql),Oe=Se?m.sql.byteLength:i.jstrlen(m.sql),Fe=i.scopedAlloc(2*i.ptrSizeof+(Oe+1)),ne=Fe+i.ptrSizeof,A=ne+i.ptrSizeof,z=A+Oe;for(Se?i.heap8().set(m.sql,A):i.jstrcpy(m.sql,i.heap8(),A,Oe,!1),i.poke(A+Oe,0);A&&i.peek(A,"i8");){i.pokePtr([Fe,ne],0),C.checkRc(this,s.sqlite3_prepare_v3(this.pointer,A,Oe,0,Fe,ne));let ee=i.peekPtr(Fe);if(A=i.peekPtr(ne),Oe=z-A,!!ee){if(he&&he.push(s.sqlite3_sql(ee).trim()),x=new I(this,ee,M),X&&x.parameterCount&&(x.bind(X),X=null),_e&&x.columnCount){let q=Array.isArray(l.columnNames)?0:1;if(_e=!1,m.cbArg||u){let P=Object.create(null);for(;x.step();x._lockedByExec=!1){q++===0&&x.getColumnNames(P.columnNames=l.columnNames||[]),x._lockedByExec=!0;let j=m.cbArg(x,P);if(u&&u.push(j),f&&f.call(l,j,x)===!1)break}x._lockedByExec=!1}q===0&&x.getColumnNames(l.columnNames)}else x.step();x.reset().finalize(),x=null}}}finally{i.scopedAllocPop(xe),x&&(delete x._lockedByExec,x.finalize())}return m.returnVal()},createFunction:function(l,f,u){let x=P=>P instanceof Function;switch(arguments.length){case 1:u=l,l=u.name,f=u.xFunc||0;break;case 2:x(f)||(u=f,f=u.xFunc||0);break;case 3:break;default:break}u||(u={}),typeof l!="string"&&o("Invalid arguments: missing function name.");let X=u.xStep||0,_e=u.xFinal||0,xe=u.xValue||0,he=u.xInverse||0,Se;x(f)?(Se=!1,(x(X)||x(_e))&&o("Ambiguous arguments: scalar or aggregate?"),X=_e=null):x(X)?(x(_e)||o("Missing xFinal() callback for aggregate or window UDF."),f=null):x(_e)?o("Missing xStep() callback for aggregate or window UDF."):o("Missing function-type properties."),Se===!1?(x(xe)||x(he))&&o("xValue and xInverse are not permitted for non-window UDFs."):x(xe)?(x(he)||o("xInverse must be provided if xValue is."),Se=!0):x(he)&&o("xValue must be provided if xInverse is.");let Oe=u.pApp;Oe!=null&&(typeof Oe!="number"||!g.isInt32(Oe))&&o("Invalid value for pApp property. Must be a legal WASM pointer value.");let Fe=u.xDestroy||0;Fe&&!x(Fe)&&o("xDestroy property must be a function.");let ne=0;H(u,"deterministic")&&(ne|=s.SQLITE_DETERMINISTIC),H(u,"directOnly")&&(ne|=s.SQLITE_DIRECTONLY),H(u,"innocuous")&&(ne|=s.SQLITE_INNOCUOUS),l=l.toLowerCase();let A=f||X,z=H(u,"arity"),ee=typeof z=="number"?z:A.length?A.length-1:0,q;return Se?q=s.sqlite3_create_window_function(this.pointer,l,ee,s.SQLITE_UTF8|ne,Oe||0,X,_e,xe,he,Fe):q=s.sqlite3_create_function_v2(this.pointer,l,ee,s.SQLITE_UTF8|ne,Oe||0,f,X,_e,Fe),C.checkRc(this,q),this},selectValue:function(m,l,f){return $(this,m,l,0,f)},selectValues:function(m,l,f){let u=this.prepare(m),x=[];try{for(u.bind(l);u.step();)x.push(u.get(0,f));u.reset()}finally{u.finalize()}return x},selectArray:function(m,l){return $(this,m,l,[])},selectObject:function(m,l){return $(this,m,l,{})},selectArrays:function(m,l){return S(this,m,l,"array")},selectObjects:function(m,l){return S(this,m,l,"object")},openStatementCount:function(){return this.pointer?Object.keys(B.get(this)).length:0},transaction:function(m){let l="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&o(s.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),l+=" "+arguments[0],m=arguments[1]),w(this).exec(l);try{let f=m(this);return this.exec("COMMIT"),f}catch(f){throw this.exec("ROLLBACK"),f}},savepoint:function(m){w(this).exec("SAVEPOINT oo1");try{let l=m(this);return this.exec("RELEASE oo1"),l}catch(l){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),l}},checkRc:function(m){return re(this,m)}};let J=function(m){return m.pointer||o("Stmt has been closed."),m},d=function(m){let l=M[m==null?"null":typeof m];switch(l){case M.boolean:case M.null:case M.number:case M.string:return l;case M.bigint:if(i.bigIntEnabled)return l;default:return g.isBindableTypedArray(m)?M.blob:void 0}},h=function(m){return d(m)||o("Unsupported bind() argument type:",typeof m)},k=function(m,l){let f=typeof l=="number"?l:s.sqlite3_bind_parameter_index(m.pointer,l);return f===0||!g.isInt32(f)?o("Invalid bind() parameter name: "+l):(f<1||f>m.parameterCount)&&o("Bind index",l,"is out of range."),f},W=function(m,l){return m._lockedByExec&&o("Operation is illegal when statement is locked:",l),m},Q=function m(l,f,u,x){W(J(l),"bind()"),m._||(m._tooBigInt=_e=>o("BigInt value is too big to store without precision loss:",_e),m._={string:function(_e,xe,he,Se){let[Oe,Fe]=i.allocCString(he,!0);return(Se?s.sqlite3_bind_blob:s.sqlite3_bind_text)(_e.pointer,xe,Oe,Fe,s.SQLITE_WASM_DEALLOC)}}),h(x),f=k(l,f);let X=0;switch(x==null?M.null:u){case M.null:X=s.sqlite3_bind_null(l.pointer,f);break;case M.string:X=m._.string(l,f,x,!1);break;case M.number:{let _e;g.isInt32(x)?_e=s.sqlite3_bind_int:typeof x=="bigint"?g.bigIntFits64(x)?i.bigIntEnabled?_e=s.sqlite3_bind_int64:g.bigIntFitsDouble(x)?(x=Number(x),_e=s.sqlite3_bind_double):m._tooBigInt(x):m._tooBigInt(x):(x=Number(x),i.bigIntEnabled&&Number.isInteger(x)?_e=s.sqlite3_bind_int64:_e=s.sqlite3_bind_double),X=_e(l.pointer,f,x);break}case M.boolean:X=s.sqlite3_bind_int(l.pointer,f,x?1:0);break;case M.blob:{if(typeof x=="string"){X=m._.string(l,f,x,!0);break}else x instanceof ArrayBuffer?x=new Uint8Array(x):g.isBindableTypedArray(x)||o("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");let _e=i.alloc(x.byteLength||1);i.heap8().set(x.byteLength?x:[0],_e),X=s.sqlite3_bind_blob(l.pointer,f,_e,x.byteLength,s.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",x),o("Unsupported bind() argument type: "+typeof x)}return X&&C.checkRc(l.db.pointer,X),l._mayGet=!1,l};I.prototype={finalize:function(){if(this.pointer){W(this,"finalize()");let m=s.sqlite3_finalize(this.pointer);return delete B.get(this.db)[this.pointer],b.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,m}},clearBindings:function(){return W(J(this),"clearBindings()"),s.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(m){W(this,"reset()"),m&&this.clearBindings();let l=s.sqlite3_reset(J(this).pointer);return this._mayGet=!1,re(this.db,l),this},bind:function(){J(this);let m,l;switch(arguments.length){case 1:m=1,l=arguments[0];break;case 2:m=arguments[0],l=arguments[1];break;default:o("Invalid bind() arguments.")}return l===void 0?this:(this.parameterCount||o("This statement has no bindable parameters."),this._mayGet=!1,l===null?Q(this,m,M.null,l):Array.isArray(l)?(arguments.length!==1&&o("When binding an array, an index argument is not permitted."),l.forEach((f,u)=>Q(this,u+1,h(f),f)),this):(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),typeof l=="object"&&!g.isBindableTypedArray(l)?(arguments.length!==1&&o("When binding an object, an index argument is not permitted."),Object.keys(l).forEach(f=>Q(this,f,h(l[f]),l[f])),this):Q(this,m,h(l),l)))},bindAsBlob:function(m,l){J(this),arguments.length===1&&(l=m,m=1);let f=h(l);return M.string!==f&&M.blob!==f&&M.null!==f&&o("Invalid value type for bindAsBlob()"),Q(this,m,M.blob,l)},step:function(){W(this,"step()");let m=s.sqlite3_step(J(this).pointer);switch(m){case s.SQLITE_DONE:return this._mayGet=!1;case s.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",m,s.sqlite3_js_rc_str(m),"SQL =",s.sqlite3_sql(this.pointer)),C.checkRc(this.db.pointer,m)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{let m=this.step();return this.reset(),m}finally{try{this.finalize()}catch{}}},get:function(m,l){if(J(this)._mayGet||o("Stmt.step() has not (recently) returned true."),Array.isArray(m)){let f=0,u=this.columnCount;for(;f<u;)m[f]=this.get(f++);return m}else if(m&&typeof m=="object"){let f=0,u=this.columnCount;for(;f<u;)m[s.sqlite3_column_name(this.pointer,f)]=this.get(f++);return m}switch(U(this,m),l===void 0?s.sqlite3_column_type(this.pointer,m):l){case s.SQLITE_NULL:return null;case s.SQLITE_INTEGER:if(i.bigIntEnabled){let f=s.sqlite3_column_int64(this.pointer,m);return f>=Number.MIN_SAFE_INTEGER&&f<=Number.MAX_SAFE_INTEGER?Number(f).valueOf():f}else{let f=s.sqlite3_column_double(this.pointer,m);return(f>Number.MAX_SAFE_INTEGER||f<Number.MIN_SAFE_INTEGER)&&o("Integer is out of range for JS integer range: "+f),g.isInt32(f)?f|0:f}case s.SQLITE_FLOAT:return s.sqlite3_column_double(this.pointer,m);case s.SQLITE_TEXT:return s.sqlite3_column_text(this.pointer,m);case s.SQLITE_BLOB:{let f=s.sqlite3_column_bytes(this.pointer,m),u=s.sqlite3_column_blob(this.pointer,m),x=new Uint8Array(f);return f&&x.set(i.heap8u().slice(u,u+f),0),f&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(x.buffer),x}default:o("Don't know how to translate","type of result column #"+m+".")}o("Not reached.")},getInt:function(m){return this.get(m,s.SQLITE_INTEGER)},getFloat:function(m){return this.get(m,s.SQLITE_FLOAT)},getString:function(m){return this.get(m,s.SQLITE_TEXT)},getBlob:function(m){return this.get(m,s.SQLITE_BLOB)},getJSON:function(m){let l=this.get(m,s.SQLITE_STRING);return l===null?l:JSON.parse(l)},getColumnName:function(m){return s.sqlite3_column_name(U(J(this),m).pointer,m)},getColumnNames:function(m=[]){U(J(this),0);let l=this.columnCount;for(let f=0;f<l;++f)m.push(s.sqlite3_column_name(this.pointer,f));return m},getParamIndex:function(m){return J(this).parameterCount?s.sqlite3_bind_parameter_index(this.pointer,m):void 0},getParamName:function(m){return J(this).parameterCount?s.sqlite3_bind_parameter_name(this.pointer,m):void 0},isBusy:function(){return s.sqlite3_stmt_busy(J(this))!==0},isReadOnly:function(){return s.sqlite3_stmt_readonly(J(this))!==0}};{let m={enumerable:!0,get:function(){return b.get(this)},set:()=>o("The pointer property is read-only.")};Object.defineProperty(I.prototype,"pointer",m),Object.defineProperty(C.prototype,"pointer",m)}if(Object.defineProperty(I.prototype,"columnCount",{enumerable:!1,get:function(){return s.sqlite3_column_count(this.pointer)},set:()=>o("The columnCount property is read-only.")}),t.oo1={DB:C,Stmt:I},g.isUIThread()){t.oo1.JsStorageDb=function(l="session"){let f=L.normalizeArgs(...arguments);l=f.filename,l!=="session"&&l!=="local"&&o("JsStorageDb db name must be one of 'session' or 'local'."),f.vfs="kvvfs",L.call(this,f)};let m=t.oo1.JsStorageDb;m.prototype=Object.create(C.prototype),m.clearStorage=s.sqlite3_js_kvvfs_clear,m.prototype.clearStorage=function(){return m.clearStorage(w(this).filename)},m.storageSize=s.sqlite3_js_kvvfs_size,m.prototype.storageSize=function(){return m.storageSize(w(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=t.util;t.initWorker1API=function(){"use strict";let o=(...L)=>{throw new Error(L.join(" "))};globalThis.WorkerGlobalScope instanceof Function||o("initWorker1API() must be run from a Worker thread.");let s=this.sqlite3||o("Missing this.sqlite3 object."),i=s.oo1.DB,g=function(L){let C=b.idMap.get(L);return C||(C="db#"+ ++b.idSeq+"@"+L.pointer,b.idMap.set(L,C),C)},b={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(L){let C=new i(L);return this.dbs[g(C)]=C,this.dbList.indexOf(C)<0&&this.dbList.push(C),C},close:function(L,C){if(L){delete this.dbs[g(L)];let M=L.filename,I=n.sqlite3__wasm_db_vfs(L.pointer,0);L.close();let w=this.dbList.indexOf(L);w>=0&&this.dbList.splice(w,1),C&&M&&I&&n.sqlite3__wasm_vfs_unlink(I,M)}},post:function(L,C){C&&C.length?(globalThis.postMessage(L,Array.from(C)),C.length=0):globalThis.postMessage(L)},dbs:Object.create(null),getDb:function(L,C=!0){return this.dbs[L]||(C?o("Unknown (or closed) DB ID:",L):void 0)}},B=function(L=b.dbList[0]){return L&&L.pointer?L:o("DB is not opened.")},H=function(L,C=!0){let M=b.getDb(L.dbId,!1)||b.dbList[0];return C?B(M):M},re=function(){return b.dbList[0]&&g(b.dbList[0])},Z=L=>L===""||L[0]===":",ie={open:function(L){let C=Object.create(null),M=L.args||Object.create(null);M.simulateError&&o("Throwing because of simulateError flag.");let I=Object.create(null);C.vfs=M.vfs,C.filename=M.filename||"";let w=b.open(C);return I.filename=w.filename,I.persistent=!!s.capi.sqlite3_js_db_uses_vfs(w.pointer,"opfs"),I.dbId=g(w),I.vfs=w.dbVfsName(),I},close:function(L){let C=H(L,!1),M={filename:C&&C.filename};if(C){let I=L.args&&typeof L.args=="object"?!!L.args.unlink:!1;b.close(C,I)}return M},exec:function(L){let C=typeof L.args=="string"?{sql:L.args}:L.args||Object.create(null);C.rowMode==="stmt"?o("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):C.sql||o("'exec' requires input SQL.");let M=H(L);(C.callback||Array.isArray(C.resultRows))&&(M._blobXfer=b.xfer);let I=C.callback,w=0,U=!!C.columnNames;typeof I=="string"&&(U||(C.columnNames=[]),C.callback=function(V,$){b.post({type:I,columnNames:C.columnNames,rowNumber:++w,row:V},b.xfer)});try{let V=C.countChanges?M.changes(!0,C.countChanges===64):void 0;M.exec(C),V!==void 0&&(C.changeCount=M.changes(!0,C.countChanges===64)-V);let $=C.lastInsertRowId?s.capi.sqlite3_last_insert_rowid(M):void 0;$!==void 0&&(C.lastInsertRowId=$),C.callback instanceof Function&&(C.callback=I,b.post({type:I,columnNames:C.columnNames,rowNumber:null,row:void 0}))}finally{delete M._blobXfer,C.callback&&(C.callback=I)}return C},"config-get":function(){let L=Object.create(null),C=s.config;return["bigIntEnabled"].forEach(function(M){Object.getOwnPropertyDescriptor(C,M)&&(L[M]=C[M])}),L.version=s.version,L.vfsList=s.capi.sqlite3_js_vfs_list(),L},export:function(L){let C=H(L),M={byteArray:s.capi.sqlite3_js_db_export(C.pointer),filename:C.filename,mimetype:"application/x-sqlite3"};return b.xfer.push(M.byteArray.buffer),M},toss:function(L){o("Testing worker exception")}};globalThis.onmessage=async function(L){L=L.data;let C,M=L.dbId,I=L.type,w=performance.now();try{ie.hasOwnProperty(I)&&ie[I]instanceof Function?C=await ie[I](L):o("Unknown db worker message type:",L.type)}catch(U){I="error",C={operation:L.type,message:U.message,errorClass:U.name,input:L},U.stack&&(C.stack=typeof U.stack=="string"?U.stack.split(/\n\s*/):U.stack)}M||(M=C.dbId||re()),b.post({type:I,dbId:M,messageId:L.messageId,workerReceivedTime:w,workerRespondTime:performance.now(),departureTime:L.departureTime,result:C},b.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=t.wasm,o=t.capi,s=t.util.toss3,i=Object.create(null);t.vfs=i,o.sqlite3_vfs.prototype.registerVfs=function(g=!1){this instanceof t.capi.sqlite3_vfs||s("Expecting a sqlite3_vfs-type argument.");let b=o.sqlite3_vfs_register(this,g?1:0);return b&&s("sqlite3_vfs_register(",this,") failed with rc",b),this.pointer!==o.sqlite3_vfs_find(this.$zName)&&s("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},i.installVfs=function(g){let b=0,B=["io","vfs"];for(let H of B){let re=g[H];re&&(++b,re.struct.installMethods(re.methods,!!re.applyArgcCheck),H==="vfs"&&(!re.struct.$zName&&typeof re.name=="string"&&re.struct.addOnDispose(re.struct.$zName=n.allocCString(re.name)),re.struct.registerVfs(!!re.asDefault)))}return b||s("Misuse: installVfs() options object requires at least","one of:",B),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;let n=t.wasm,o=t.capi,s=t.util.toss3,i=Object.create(null);t.vtab=i;let g=o.sqlite3_index_info;g.prototype.nthConstraint=function(H,re=!1){if(H<0||H>=this.$nConstraint)return!1;let Z=this.$aConstraint+g.sqlite3_index_constraint.structInfo.sizeof*H;return re?Z:new g.sqlite3_index_constraint(Z)},g.prototype.nthConstraintUsage=function(H,re=!1){if(H<0||H>=this.$nConstraint)return!1;let Z=this.$aConstraintUsage+g.sqlite3_index_constraint_usage.structInfo.sizeof*H;return re?Z:new g.sqlite3_index_constraint_usage(Z)},g.prototype.nthOrderBy=function(H,re=!1){if(H<0||H>=this.$nOrderBy)return!1;let Z=this.$aOrderBy+g.sqlite3_index_orderby.structInfo.sizeof*H;return re?Z:new g.sqlite3_index_orderby(Z)};let b=function(H,re){return function(Z,ie=!1){if(arguments.length===0&&(Z=new re),Z instanceof re)return this.set(Z.pointer,Z),Z;n.isPtr(Z)||t.SQLite3Error.toss("Invalid argument to",H+"()");let L=this.get(Z);return ie&&this.delete(Z),L}.bind(new Map)},B=function(H,re){let Z=b(H,re);return Object.assign(Object.create(null),{StructType:re,create:ie=>{let L=Z();return n.pokePtr(ie,L.pointer),L},get:ie=>Z(ie),unget:ie=>Z(ie,!0),dispose:ie=>{let L=Z(ie,!0);L&&L.dispose()}})};i.xVtab=B("xVtab",o.sqlite3_vtab),i.xCursor=B("xCursor",o.sqlite3_vtab_cursor),i.xIndexInfo=H=>new o.sqlite3_index_info(H),i.xError=function H(re,Z,ie){if(H.errorReporter instanceof Function)try{H.errorReporter("sqlite3_module::"+re+"(): "+Z.message)}catch{}let L;return Z instanceof t.WasmAllocError?L=o.SQLITE_NOMEM:arguments.length>2?L=ie:Z instanceof t.SQLite3Error&&(L=Z.resultCode),L||o.SQLITE_ERROR},i.xError.errorReporter=console.error.bind(console),i.xRowid=(H,re)=>n.poke(H,re,"i64"),i.setupModule=function(H){let re=!1,Z=this instanceof o.sqlite3_module?this:H.struct||(re=new o.sqlite3_module);try{let ie=H.methods||s("Missing 'methods' object.");for(let L of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){let C=L[0],M=L[1];ie[C]===!0?ie[C]=ie[M]:ie[M]===!0&&(ie[M]=ie[C])}if(H.catchExceptions){let L=function(I,w){return["xConnect","xCreate"].indexOf(I)>=0?function(U,V,$,S,J,d){try{return w(...arguments)||0}catch(h){return h instanceof t.WasmAllocError||(n.dealloc(n.peekPtr(d)),n.pokePtr(d,n.allocCString(h.message))),i.xError(I,h)}}:function(...U){try{return w(...U)||0}catch(V){return i.xError(I,V)}}},C=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],M=Object.create(null);for(let I of C){let w=ie[I];if(w instanceof Function)I==="xConnect"&&ie.xCreate===w?M[I]=ie.xCreate:I==="xCreate"&&ie.xConnect===w?M[I]=ie.xConnect:M[I]=L(I,w);else continue}Z.installMethods(M,!1)}else Z.installMethods(ie,!!H.applyArgcCheck);if(Z.$iVersion===0){let L;typeof H.iVersion=="number"?L=H.iVersion:Z.$xShadowName?L=3:Z.$xSavePoint||Z.$xRelease||Z.$xRollbackTo?L=2:L=1,Z.$iVersion=L}}catch(ie){throw re&&re.dispose(),ie}return Z},o.sqlite3_module.prototype.setupModule=function(H){return i.setupModule.call(this,H)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let n=function o(s){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!s||typeof s!="object")&&(s=Object.create(null));let i=new URL(globalThis.location.href).searchParams;return i.has("opfs-disable")?Promise.resolve(t):(s.verbose===void 0&&(s.verbose=i.has("opfs-verbose")?+i.get("opfs-verbose")||2:1),s.sanityChecks===void 0&&(s.sanityChecks=i.has("opfs-sanity-check")),s.proxyUri===void 0&&(s.proxyUri=o.defaultProxyUri),typeof s.proxyUri=="function"&&(s.proxyUri=s.proxyUri()),new Promise(function(b,B){let H=[t.config.error,t.config.warn,t.config.log],re=(q,...P)=>{s.verbose>q&&H[q]("OPFS syncer:",...P)},Z=(...q)=>re(2,...q),ie=(...q)=>re(1,...q),L=(...q)=>re(0,...q),C=t.util.toss,M=t.capi,I=t.util,w=t.wasm,U=M.sqlite3_vfs,V=M.sqlite3_file,$=M.sqlite3_io_methods,S=Object.create(null),J=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;S.metrics={dump:function(){let q,P=0,j=0,se=0;for(q in u.opIds){let te=x[q];P+=te.count,j+=te.time,se+=te.wait,te.avgTime=te.count&&te.time?te.time/te.count:0,te.avgWait=te.count&&te.wait?te.wait/te.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",x,`
Total of`,P,"op(s) for",j,"ms (incl. "+se+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",x.s11n),m.postMessage({type:"opfs-async-metrics"})},reset:function(){let q,P=se=>se.count=se.time=se.wait=0;for(q in u.opIds)P(x[q]=Object.create(null));let j=x.s11n=Object.create(null);j=j.serialize=Object.create(null),j.count=j.time=0,j=x.s11n.deserialize=Object.create(null),j.count=j.time=0}};let d=new $,h=new U().addOnDispose(()=>d.dispose()),k,W=q=>(k=!0,h.dispose(),B(q)),Q=()=>(k=!1,b(t)),m=new Worker(new URL("sqlite3-opfs-async-proxy.js",import.meta.url));setTimeout(()=>{k===void 0&&W(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),m._originalOnError=m.onerror,m.onerror=function(q){L("Error initializing OPFS asyncer:",q),W(new Error("Loading OPFS async Worker failed for unknown reasons."))};let l=M.sqlite3_vfs_find(null),f=l?new U(l):null;d.$iVersion=1,h.$iVersion=2,h.$szOsFile=M.sqlite3_file.structInfo.sizeof,h.$mxPathname=1024,h.$zName=w.allocCString("opfs"),h.$xDlOpen=h.$xDlError=h.$xDlSym=h.$xDlClose=null,h.addOnDispose("$zName",h.$zName,"cleanup default VFS wrapper",()=>f?f.dispose():null);let u=Object.create(null);u.verbose=s.verbose,u.littleEndian=(()=>{let q=new ArrayBuffer(2);return new DataView(q).setInt16(0,256,!0),new Int16Array(q)[0]===256})(),u.asyncIdleWaitTime=150,u.asyncS11nExceptions=1,u.fileBufferSize=1024*64,u.sabS11nOffset=u.fileBufferSize,u.sabS11nSize=h.$mxPathname*2,u.sabIO=new SharedArrayBuffer(u.fileBufferSize+u.sabS11nSize),u.opIds=Object.create(null);let x=Object.create(null);{let q=0;u.opIds.whichOp=q++,u.opIds.rc=q++,u.opIds.xAccess=q++,u.opIds.xClose=q++,u.opIds.xDelete=q++,u.opIds.xDeleteNoWait=q++,u.opIds.xFileSize=q++,u.opIds.xLock=q++,u.opIds.xOpen=q++,u.opIds.xRead=q++,u.opIds.xSleep=q++,u.opIds.xSync=q++,u.opIds.xTruncate=q++,u.opIds.xUnlock=q++,u.opIds.xWrite=q++,u.opIds.mkdir=q++,u.opIds["opfs-async-metrics"]=q++,u.opIds["opfs-async-shutdown"]=q++,u.opIds.retry=q++,u.sabOP=new SharedArrayBuffer(q*4),S.metrics.reset()}u.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(q=>{(u.sq3Codes[q]=M[q])===void 0&&C("Maintenance required: not found:",q)}),u.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});let X=(q,...P)=>{let j=u.opIds[q]||C("Invalid op ID:",q);u.s11n.serialize(...P),Atomics.store(u.sabOPView,u.opIds.rc,-1),Atomics.store(u.sabOPView,u.opIds.whichOp,j),Atomics.notify(u.sabOPView,u.opIds.whichOp);let se=performance.now();for(;Atomics.wait(u.sabOPView,u.opIds.rc,-1)!=="not-equal";);let te=Atomics.load(u.sabOPView,u.opIds.rc);if(x[q].wait+=performance.now()-se,te&&u.asyncS11nExceptions){let be=u.s11n.deserialize();be&&L(q+"() async error:",...be)}return te};S.debug={asyncShutdown:()=>{ie("Shutting down OPFS async listener. The OPFS VFS will no longer work."),X("opfs-async-shutdown")},asyncRestart:()=>{ie("Attempting to restart OPFS VFS async listener. Might work, might not."),m.postMessage({type:"opfs-async-restart"})}};let _e=()=>{if(u.s11n)return u.s11n;let q=new TextDecoder,P=new TextEncoder("utf-8"),j=new Uint8Array(u.sabIO,u.sabS11nOffset,u.sabS11nSize),se=new DataView(u.sabIO,u.sabS11nOffset,u.sabS11nSize);u.s11n=Object.create(null);let te=Object.create(null);te.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},te.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},te.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},te.string={id:4};let be=pe=>te[typeof pe]||C("Maintenance required: this value type cannot be serialized.",pe),Ee=pe=>{switch(pe){case te.number.id:return te.number;case te.bigint.id:return te.bigint;case te.boolean.id:return te.boolean;case te.string.id:return te.string;default:C("Invalid type ID:",pe)}};return u.s11n.deserialize=function(pe=!1){++x.s11n.deserialize.count;let et=performance.now(),Ze=j[0],R=Ze?[]:null;if(Ze){let ae=[],le=1,de,Ue,Ve;for(de=0;de<Ze;++de,++le)ae.push(Ee(j[le]));for(de=0;de<Ze;++de){let ze=ae[de];ze.getter?(Ve=se[ze.getter](le,u.littleEndian),le+=ze.size):(Ue=se.getInt32(le,u.littleEndian),le+=4,Ve=q.decode(j.slice(le,le+Ue)),le+=Ue),R.push(Ve)}}return pe&&(j[0]=0),x.s11n.deserialize.time+=performance.now()-et,R},u.s11n.serialize=function(...pe){let et=performance.now();if(++x.s11n.serialize.count,pe.length){let Ze=[],R=0,ae=1;for(j[0]=pe.length&255;R<pe.length;++R,++ae)Ze.push(be(pe[R])),j[ae]=Ze[R].id;for(R=0;R<pe.length;++R){let le=Ze[R];if(le.setter)se[le.setter](ae,pe[R],u.littleEndian),ae+=le.size;else{let de=P.encode(pe[R]);se.setInt32(ae,de.byteLength,u.littleEndian),ae+=4,j.set(de,ae),ae+=de.byteLength}}}else j[0]=0;x.s11n.serialize.time+=performance.now()-et},u.s11n},xe=function q(P=16){q._chars||(q._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",q._n=q._chars.length);let j=[],se=0;for(;se<P;++se){let te=Math.random()*(q._n*64)%q._n|0;j[se]=q._chars[te]}return j.join("")},he=Object.create(null),Se=Object.create(null);Se.op=void 0,Se.start=void 0;let Oe=q=>{Se.start=performance.now(),Se.op=q,++x[q].count},Fe=()=>x[Se.op].time+=performance.now()-Se.start,ne={xCheckReservedLock:function(q,P){return w.poke(P,0,"i32"),0},xClose:function(q){Oe("xClose");let P=0,j=he[q];return j&&(delete he[q],P=X("xClose",q),j.sq3File&&j.sq3File.dispose()),Fe(),P},xDeviceCharacteristics:function(q){return M.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(q,P,j){return M.SQLITE_NOTFOUND},xFileSize:function(q,P){Oe("xFileSize");let j=X("xFileSize",q);if(j==0)try{let se=u.s11n.deserialize()[0];w.poke(P,se,"i64")}catch(se){L("Unexpected error reading xFileSize() result:",se),j=u.sq3Codes.SQLITE_IOERR}return Fe(),j},xLock:function(q,P){Oe("xLock");let j=he[q],se=0;return j.lockType?j.lockType=P:(se=X("xLock",q,P),se===0&&(j.lockType=P)),Fe(),se},xRead:function(q,P,j,se){Oe("xRead");let te=he[q],be;try{be=X("xRead",q,j,Number(se)),(be===0||M.SQLITE_IOERR_SHORT_READ===be)&&w.heap8u().set(te.sabView.subarray(0,j),P)}catch(Ee){L("xRead(",arguments,") failed:",Ee,te),be=M.SQLITE_IOERR_READ}return Fe(),be},xSync:function(q,P){Oe("xSync"),++x.xSync.count;let j=X("xSync",q,P);return Fe(),j},xTruncate:function(q,P){Oe("xTruncate");let j=X("xTruncate",q,Number(P));return Fe(),j},xUnlock:function(q,P){Oe("xUnlock");let j=he[q],se=0;return M.SQLITE_LOCK_NONE===P&&j.lockType&&(se=X("xUnlock",q,P)),se===0&&(j.lockType=P),Fe(),se},xWrite:function(q,P,j,se){Oe("xWrite");let te=he[q],be;try{te.sabView.set(w.heap8u().subarray(P,P+j)),be=X("xWrite",q,j,Number(se))}catch(Ee){L("xWrite(",arguments,") failed:",Ee,te),be=M.SQLITE_IOERR_WRITE}return Fe(),be}},A={xAccess:function(q,P,j,se){Oe("xAccess");let te=X("xAccess",w.cstrToJs(P));return w.poke(se,te?0:1,"i32"),Fe(),0},xCurrentTime:function(q,P){return w.poke(P,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(q,P){return w.poke(P,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(q,P,j){Oe("xDelete");let se=X("xDelete",w.cstrToJs(P),j,!1);return Fe(),se},xFullPathname:function(q,P,j,se){return w.cstrncpy(se,P,j)<j?0:M.SQLITE_CANTOPEN},xGetLastError:function(q,P,j){return ie("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(P,j,se,te,be){Oe("xOpen");let Ee=0;j===0?j=xe():w.isPtr(j)&&(M.sqlite3_uri_boolean(j,"opfs-unlock-asap",0)&&(Ee|=u.opfsFlags.OPFS_UNLOCK_ASAP),M.sqlite3_uri_boolean(j,"delete-before-open",0)&&(Ee|=u.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),j=w.cstrToJs(j));let pe=Object.create(null);pe.fid=se,pe.filename=j,pe.sab=new SharedArrayBuffer(u.fileBufferSize),pe.flags=te,pe.readOnly=!(t.SQLITE_OPEN_CREATE&te)&&!!(te&M.SQLITE_OPEN_READONLY);let et=X("xOpen",se,j,te,Ee);return et||(pe.readOnly&&w.poke(be,M.SQLITE_OPEN_READONLY,"i32"),he[se]=pe,pe.sabView=u.sabFileBufView,pe.sq3File=new V(se),pe.sq3File.$pMethods=d.pointer,pe.lockType=M.SQLITE_LOCK_NONE),Fe(),et}};f&&(h.$xRandomness=f.$xRandomness,h.$xSleep=f.$xSleep),h.$xRandomness||(A.xRandomness=function(q,P,j){let se=w.heap8u(),te=0;for(;te<P;++te)se[j+te]=Math.random()*255e3&255;return te}),h.$xSleep||(A.xSleep=function(q,P){return Atomics.wait(u.sabOPView,u.opIds.xSleep,0,P),0}),S.getResolvedPath=function(q,P){let j=new URL(q,"file://irrelevant").pathname;return P?j.split("/").filter(se=>!!se):j},S.getDirForFilename=async function(P,j=!1){let se=S.getResolvedPath(P,!0),te=se.pop(),be=S.rootDirectory;for(let Ee of se)Ee&&(be=await be.getDirectoryHandle(Ee,{create:!!j}));return[be,te]},S.mkdir=async function(q){try{return await S.getDirForFilename(q+"/filepart",!0),!0}catch{return!1}},S.entryExists=async function(q){try{let[P,j]=await S.getDirForFilename(q);return await P.getFileHandle(j),!0}catch{return!1}},S.randomFilename=xe,S.treeList=async function(){let q=async function j(se,te){te.name=se.name,te.dirs=[],te.files=[];for await(let be of se.values())if(be.kind==="directory"){let Ee=Object.create(null);te.dirs.push(Ee),await j(be,Ee)}else te.files.push(be.name)},P=Object.create(null);return await q(S.rootDirectory,P),P},S.rmfr=async function(){let q=S.rootDirectory,P={recurse:!0};for await(let j of q.values())q.removeEntry(j.name,P)},S.unlink=async function(q,P=!1,j=!1){try{let[se,te]=await S.getDirForFilename(q,!1);return await se.removeEntry(te,{recursive:P}),!0}catch(se){if(j)throw new Error("unlink(",arguments[0],") failed: "+se.message,{cause:se});return!1}},S.traverse=async function(q){let P={recursive:!0,directory:S.rootDirectory};typeof q=="function"&&(q={callback:q}),q=Object.assign(P,q||{}),async function se(te,be){for await(let Ee of te.values()){if(q.callback(Ee,te,be)===!1)return!1;if(q.recursive&&Ee.kind==="directory"&&await se(Ee,be+1)===!1)break}}(q.directory,0)};let z=async function(q,P){let[j,se]=await S.getDirForFilename(q,!0),be=await(await j.getFileHandle(se,{create:!0})).createSyncAccessHandle(),Ee=0,pe,et=!1,Ze=!1;try{for(be.truncate(0);(pe=await P())!==void 0;)pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),Ee===0&&pe.byteLength>=15&&(I.affirmDbHeader(pe),et=!0),be.write(pe,{at:Ee}),Ee+=pe.byteLength;if((Ee<512||Ee%512!==0)&&C("Input size",Ee,"is not correct for an SQLite database."),!et){let R=new Uint8Array(20);be.read(R,{at:0}),I.affirmDbHeader(R)}return be.write(new Uint8Array([1,1]),{at:18}),Ee}catch(R){throw await be.close(),be=void 0,await j.removeEntry(se).catch(()=>{}),R}finally{be&&await be.close()}};if(S.importDb=async function(q,P){if(P instanceof Function)return z(q,P);P instanceof ArrayBuffer&&(P=new Uint8Array(P)),I.affirmIsDb(P);let j=P.byteLength,[se,te]=await S.getDirForFilename(q,!0),be,Ee,pe=0;try{return be=await(await se.getFileHandle(te,{create:!0})).createSyncAccessHandle(),be.truncate(0),pe=be.write(P,{at:0}),pe!=j&&C("Expected to write "+j+" bytes but wrote "+pe+"."),be.write(new Uint8Array([1,1]),{at:18}),pe}catch(et){throw be&&(await be.close(),be=void 0),await se.removeEntry(te).catch(()=>{}),et}finally{be&&await be.close()}},t.oo1){let q=function(...P){let j=t.oo1.DB.dbCtorHelper.normalizeArgs(...P);j.vfs=h.$zName,t.oo1.DB.dbCtorHelper.call(this,j)};q.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=q,q.importDb=S.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(h.pointer,function(P,j){j.capi.sqlite3_busy_timeout(P,1e4)})}let ee=function(){let q=w.scopedAllocPush(),P=new V;try{let j=P.pointer,se=M.SQLITE_OPEN_CREATE|M.SQLITE_OPEN_READWRITE|M.SQLITE_OPEN_MAIN_DB,te=w.scopedAlloc(8),be="/sanity/check/file"+xe(8),Ee=w.scopedAllocCString(be),pe;if(u.s11n.serialize("This is \xE4 string."),pe=u.s11n.deserialize(),Z("deserialize() says:",pe),pe[0]!=="This is \xE4 string."&&C("String d13n error."),A.xAccess(h.pointer,Ee,0,te),pe=w.peek(te,"i32"),Z("xAccess(",be,") exists ?=",pe),pe=A.xOpen(h.pointer,Ee,j,se,te),Z("open rc =",pe,"state.sabOPView[xOpen] =",u.sabOPView[u.opIds.xOpen]),pe!==0){L("open failed with code",pe);return}A.xAccess(h.pointer,Ee,0,te),pe=w.peek(te,"i32"),pe||C("xAccess() failed to detect file."),pe=ne.xSync(P.pointer,0),pe&&C("sync failed w/ rc",pe),pe=ne.xTruncate(P.pointer,1024),pe&&C("truncate failed w/ rc",pe),w.poke(te,0,"i64"),pe=ne.xFileSize(P.pointer,te),pe&&C("xFileSize failed w/ rc",pe),Z("xFileSize says:",w.peek(te,"i64")),pe=ne.xWrite(P.pointer,Ee,10,1),pe&&C("xWrite() failed!");let et=w.scopedAlloc(16);pe=ne.xRead(P.pointer,et,6,2),w.poke(et+6,0);let Ze=w.cstrToJs(et);Z("xRead() got:",Ze),Ze!=="sanity"&&C("Unexpected xRead() value."),A.xSleep&&(Z("xSleep()ing before close()ing..."),A.xSleep(h.pointer,2e3),Z("waking up from xSleep()")),pe=ne.xClose(j),Z("xClose rc =",pe,"sabOPView =",u.sabOPView),Z("Deleting file:",be),A.xDelete(h.pointer,Ee,4660),A.xAccess(h.pointer,Ee,0,te),pe=w.peek(te,"i32"),pe&&C("Expecting 0 from xAccess(",be,") after xDelete()."),ie("End of OPFS sanity checks.")}finally{P.dispose(),w.scopedAllocPop(q)}};m.onmessage=function({data:q}){switch(q.type){case"opfs-unavailable":W(new Error(q.payload.join(" ")));break;case"opfs-async-loaded":m.postMessage({type:"opfs-async-init",args:u});break;case"opfs-async-inited":{if(k===!0)break;try{t.vfs.installVfs({io:{struct:d,methods:ne},vfs:{struct:h,methods:A}}),u.sabOPView=new Int32Array(u.sabOP),u.sabFileBufView=new Uint8Array(u.sabIO,0,u.fileBufferSize),u.sabS11nView=new Uint8Array(u.sabIO,u.sabS11nOffset,u.sabS11nSize),_e(),s.sanityChecks&&(ie("Running sanity checks because of opfs-sanity-check URL arg..."),ee()),J()?navigator.storage.getDirectory().then(P=>{m.onerror=m._originalOnError,delete m._originalOnError,t.opfs=S,S.rootDirectory=P,Z("End of OPFS sqlite3_vfs setup.",h),Q()}).catch(W):Q()}catch(P){L(P),W(P)}break}default:{let P="Unexpected message from the OPFS async worker: "+JSON.stringify(q);L(P),W(new Error(P));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async o=>{try{let s=n.defaultProxyUri;return o.scriptInfo.sqlite3Dir&&(n.defaultProxyUri=o.scriptInfo.sqlite3Dir+s),n().catch(i=>{o.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",i.message)})}catch(s){return o.config.error("installOpfsVfs() exception:",s),Promise.reject(s)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let n=t.util.toss,o=t.util.toss3,s=Object.create(null),i=t.capi,g=t.util,b=t.wasm,B=4096,H=512,re=4,Z=8,ie=H+re,L=H,C=ie,M=B,I=i.SQLITE_OPEN_MAIN_DB|i.SQLITE_OPEN_MAIN_JOURNAL|i.SQLITE_OPEN_SUPER_JOURNAL|i.SQLITE_OPEN_WAL,w=i.SQLITE_OPEN_MEMORY,U=".opaque",V=()=>Math.random().toString(36).slice(2),$=new TextDecoder,S=new TextEncoder,J=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),d=[t.config.error,t.config.warn,t.config.log],h=t.config.log,k=t.config.warn,W=t.config.error,Q=new Map,m=ne=>Q.get(ne),l=(ne,A)=>{A?Q.set(ne,A):Q.delete(ne)},f=new Map,u=ne=>f.get(ne),x=(ne,A)=>{A?f.set(ne,A):f.delete(ne)},X={xCheckReservedLock:function(ne,A){let z=u(ne);return z.log("xCheckReservedLock"),z.storeErr(),b.poke32(A,1),0},xClose:function(ne){let A=u(ne);A.storeErr();let z=A.getOFileForS3File(ne);if(z)try{A.log(`xClose ${z.path}`),A.mapS3FileToOFile(ne,!1),z.sah.flush(),z.flags&i.SQLITE_OPEN_DELETEONCLOSE&&A.deletePath(z.path)}catch(ee){return A.storeErr(ee,i.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(ne){return i.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(ne,A,z){return i.SQLITE_NOTFOUND},xFileSize:function(ne,A){let z=u(ne);z.log("xFileSize");let q=z.getOFileForS3File(ne).sah.getSize()-M;return b.poke64(A,BigInt(q)),0},xLock:function(ne,A){let z=u(ne);z.log(`xLock ${A}`),z.storeErr();let ee=z.getOFileForS3File(ne);return ee.lockType=A,0},xRead:function(ne,A,z,ee){let q=u(ne);q.storeErr();let P=q.getOFileForS3File(ne);q.log(`xRead ${P.path} ${z} @ ${ee}`);try{let j=P.sah.read(b.heap8u().subarray(A,A+z),{at:M+Number(ee)});return j<z?(b.heap8u().fill(0,A+j,A+z),i.SQLITE_IOERR_SHORT_READ):0}catch(j){return q.storeErr(j,i.SQLITE_IOERR)}},xSectorSize:function(ne){return B},xSync:function(ne,A){let z=u(ne);z.log(`xSync ${A}`),z.storeErr();let ee=z.getOFileForS3File(ne);try{return ee.sah.flush(),0}catch(q){return z.storeErr(q,i.SQLITE_IOERR)}},xTruncate:function(ne,A){let z=u(ne);z.log(`xTruncate ${A}`),z.storeErr();let ee=z.getOFileForS3File(ne);try{return ee.sah.truncate(M+Number(A)),0}catch(q){return z.storeErr(q,i.SQLITE_IOERR)}},xUnlock:function(ne,A){let z=u(ne);z.log("xUnlock");let ee=z.getOFileForS3File(ne);return ee.lockType=A,0},xWrite:function(ne,A,z,ee){let q=u(ne);q.storeErr();let P=q.getOFileForS3File(ne);q.log(`xWrite ${P.path} ${z} ${ee}`);try{let j=P.sah.write(b.heap8u().subarray(A,A+z),{at:M+Number(ee)});return z===j?0:n("Unknown write() failure.")}catch(j){return q.storeErr(j,i.SQLITE_IOERR)}}},_e=new i.sqlite3_io_methods;_e.$iVersion=1,t.vfs.installVfs({io:{struct:_e,methods:X}});let xe={xAccess:function(ne,A,z,ee){let q=m(ne);q.storeErr();try{let P=q.getPath(A);b.poke32(ee,q.hasFilename(P)?1:0)}catch{b.poke32(ee,0)}return 0},xCurrentTime:function(ne,A){return b.poke(A,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(ne,A){return b.poke(A,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(ne,A,z){let ee=m(ne);ee.log(`xDelete ${b.cstrToJs(A)}`),ee.storeErr();try{return ee.deletePath(ee.getPath(A)),0}catch(q){return ee.storeErr(q),i.SQLITE_IOERR_DELETE}},xFullPathname:function(ne,A,z,ee){return b.cstrncpy(ee,A,z)<z?0:i.SQLITE_CANTOPEN},xGetLastError:function(ne,A,z){let ee=m(ne),q=ee.popErr();if(ee.log(`xGetLastError ${A} e =`,q),q){let P=b.scopedAllocPush();try{let[j,se]=b.scopedAllocCString(q.message,!0);b.cstrncpy(z,j,A),se>A&&b.poke8(z+A-1,0)}catch{return i.SQLITE_NOMEM}finally{b.scopedAllocPop(P)}}return q?q.sqlite3Rc||i.SQLITE_IOERR:0},xOpen:function(A,z,ee,q,P){let j=m(A);try{q&=~w,j.log(`xOpen ${b.cstrToJs(z)} ${q}`);let se=z&&b.peek8(z)?j.getPath(z):V(),te=j.getSAHForPath(se);!te&&q&i.SQLITE_OPEN_CREATE&&(j.getFileCount()<j.getCapacity()?(te=j.nextAvailableSAH(),j.setAssociatedPath(te,se,q)):n("SAH pool is full. Cannot create file",se)),te||n("file not found:",se);let be={path:se,flags:q,sah:te};j.mapS3FileToOFile(ee,be),be.lockType=i.SQLITE_LOCK_NONE;let Ee=new i.sqlite3_file(ee);return Ee.$pMethods=_e.pointer,Ee.dispose(),b.poke32(P,q),0}catch(se){return j.storeErr(se),i.SQLITE_CANTOPEN}}},he=function(ne){t.capi.sqlite3_vfs_find(ne)&&o("VFS name is already registered:",ne);let A=new i.sqlite3_vfs,z=i.sqlite3_vfs_find(null),ee=z?new i.sqlite3_vfs(z):null;return A.$iVersion=2,A.$szOsFile=i.sqlite3_file.structInfo.sizeof,A.$mxPathname=H,A.addOnDispose(A.$zName=b.allocCString(ne),()=>l(A.pointer,0)),ee&&(A.$xRandomness=ee.$xRandomness,A.$xSleep=ee.$xSleep,ee.dispose()),!A.$xRandomness&&!xe.xRandomness&&(xe.xRandomness=function(q,P,j){let se=b.heap8u(),te=0;for(;te<P;++te)se[j+te]=Math.random()*255e3&255;return te}),!A.$xSleep&&!xe.xSleep&&(xe.xSleep=(q,P)=>0),t.vfs.installVfs({vfs:{struct:A,methods:xe}}),A};class Se{vfsDir;#e;#o;#c;#n=new Map;#t=new Map;#s=new Set;#a=new Map;#r=new Uint8Array(ie);#l;#i;#u;constructor(A=Object.create(null)){this.#u=A.verbosity??J.verbosity,this.vfsName=A.name||J.name,this.#i=he(this.vfsName),l(this.#i.pointer,this),this.vfsDir=A.directory||"."+this.vfsName,this.#l=new DataView(this.#r.buffer,this.#r.byteOffset),this.isReady=this.reset(!!(A.clearOnInit??J.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(A.initialCapacity||J.initialCapacity)})}#_(A,...z){this.#u>A&&d[A](this.vfsName+":",...z)}log(...A){this.#_(2,...A)}warn(...A){this.#_(1,...A)}error(...A){this.#_(0,...A)}getVfs(){return this.#i}getCapacity(){return this.#n.size}getFileCount(){return this.#t.size}getFileNames(){let A=[];for(let z of this.#t.keys())A.push(z);return A}async addCapacity(A){for(let z=0;z<A;++z){let ee=V(),P=await(await this.#o.getFileHandle(ee,{create:!0})).createSyncAccessHandle();this.#n.set(P,ee),this.setAssociatedPath(P,"",0)}return this.getCapacity()}async reduceCapacity(A){let z=0;for(let ee of Array.from(this.#s)){if(z===A||this.getFileCount()===this.getCapacity())break;let q=this.#n.get(ee);ee.close(),await this.#o.removeEntry(q),this.#n.delete(ee),this.#s.delete(ee),++z}return z}releaseAccessHandles(){for(let A of this.#n.keys())A.close();this.#n.clear(),this.#t.clear(),this.#s.clear()}async acquireAccessHandles(A=!1){let z=[];for await(let[ee,q]of this.#o)q.kind==="file"&&z.push([ee,q]);return Promise.all(z.map(async([ee,q])=>{try{let P=await q.createSyncAccessHandle();if(this.#n.set(P,ee),A)P.truncate(M),this.setAssociatedPath(P,"",0);else{let j=this.getAssociatedPath(P);j?this.#t.set(j,P):this.#s.add(P)}}catch(P){throw this.storeErr(P),this.releaseAccessHandles(),P}}))}getAssociatedPath(A){A.read(this.#r,{at:0});let z=this.#l.getUint32(L);if(this.#r[0]&&(z&i.SQLITE_OPEN_DELETEONCLOSE||(z&I)===0))return k(`Removing file with unexpected flags ${z.toString(16)}`,this.#r),this.setAssociatedPath(A,"",0),"";let ee=new Uint32Array(Z/4);A.read(ee,{at:C});let q=this.computeDigest(this.#r,z);if(ee.every((P,j)=>P===q[j])){let P=this.#r.findIndex(j=>j===0);return P===0&&A.truncate(M),P?$.decode(this.#r.subarray(0,P)):""}else return k("Disassociating file with bad digest."),this.setAssociatedPath(A,"",0),""}setAssociatedPath(A,z,ee){let q=S.encodeInto(z,this.#r);H<=q.written+1&&n("Path too long:",z),z&&ee&&(ee|=w),this.#r.fill(0,q.written,H),this.#l.setUint32(L,ee);let P=this.computeDigest(this.#r,ee);A.write(this.#r,{at:0}),A.write(P,{at:C}),A.flush(),z?(this.#t.set(z,A),this.#s.delete(A)):(A.truncate(M),this.#s.add(A))}computeDigest(A,z){if(z&w){let ee=3735928559,q=1103547991;for(let P of A)ee=Math.imul(ee^P,2654435761),q=Math.imul(q^P,104729);return new Uint32Array([ee>>>0,q>>>0])}else return new Uint32Array([0,0])}async reset(A){await this.isReady;let z=await navigator.storage.getDirectory(),ee,q;for(let P of this.vfsDir.split("/"))P&&(ee=z,z=await z.getDirectoryHandle(P,{create:!0}));return this.#e=z,this.#c=ee,this.#o=await this.#e.getDirectoryHandle(U,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(A)}getPath(A){return b.isPtr(A)&&(A=b.cstrToJs(A)),(A instanceof URL?A:new URL(A,"file://localhost/")).pathname}deletePath(A){let z=this.#t.get(A);return z&&(this.#t.delete(A),this.setAssociatedPath(z,"",0)),!!z}renameFile(A,z){let ee=this.#t.get(A);ee||n("File not found:",A),ee.read(this.#r,{at:0});let q=this.#l.getUint32(L);return this.#t.delete(A),this.setAssociatedPath(ee,z,q),!0}storeErr(A,z){return A&&(A.sqlite3Rc=z||i.SQLITE_IOERR,this.error(A)),this.$error=A,z}popErr(){let A=this.$error;return this.$error=void 0,A}nextAvailableSAH(){let[A]=this.#s.keys();return A}getOFileForS3File(A){return this.#a.get(A)}mapS3FileToOFile(A,z){z?(this.#a.set(A,z),x(A,this)):(this.#a.delete(A),x(A,!1))}hasFilename(A){return this.#t.has(A)}getSAHForPath(A){return this.#t.get(A)}async removeVfs(){if(!this.#i.pointer||!this.#o)return!1;i.sqlite3_vfs_unregister(this.#i.pointer),this.#i.dispose(),delete s[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(U,{recursive:!0}),this.#o=void 0,await this.#c.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#c=void 0}catch(A){t.config.error(this.vfsName,"removeVfs() failed with no recovery strategy:",A)}return!0}pauseVfs(){return this.#a.size>0&&t.SQLite3Error.toss(i.SQLITE_MISUSE,"Cannot pause VFS",this.vfsName,"because it has opened files."),this.#n.size>0&&(i.sqlite3_vfs_unregister(this.vfsName),this.releaseAccessHandles()),this}isPaused(){return this.#n.size===0}async unpauseVfs(){return this.#n.size===0?this.acquireAccessHandles(!1).then(()=>i.sqlite3_vfs_register(this.#i,0),this):this}exportFile(A){let z=this.#t.get(A)||n("File not found:",A),ee=z.getSize()-M,q=new Uint8Array(ee>0?ee:0);if(ee>0){let P=z.read(q,{at:M});P!=ee&&n("Expected to read "+ee+" bytes but read "+P+".")}return q}async importDbChunked(A,z){let ee=this.#t.get(A)||this.nextAvailableSAH()||n("No available handles to import to.");ee.truncate(0);let q=0,P,j=!1,se=!1;try{for(;(P=await z())!==void 0;)P instanceof ArrayBuffer&&(P=new Uint8Array(P)),q===0&&P.byteLength>=15&&(g.affirmDbHeader(P),j=!0),ee.write(P,{at:M+q}),q+=P.byteLength;if((q<512||q%512!==0)&&n("Input size",q,"is not correct for an SQLite database."),!j){let te=new Uint8Array(20);ee.read(te,{at:0}),g.affirmDbHeader(te)}ee.write(new Uint8Array([1,1]),{at:M+18})}catch(te){throw this.setAssociatedPath(ee,"",0),te}return this.setAssociatedPath(ee,A,i.SQLITE_OPEN_MAIN_DB),q}importDb(A,z){if(z instanceof ArrayBuffer)z=new Uint8Array(z);else if(z instanceof Function)return this.importDbChunked(A,z);let ee=this.#t.get(A)||this.nextAvailableSAH()||n("No available handles to import to."),q=z.byteLength;(q<512||q%512!=0)&&n("Byte array size is invalid for an SQLite db.");let P="SQLite format 3";for(let se=0;se<P.length;++se)P.charCodeAt(se)!==z[se]&&n("Input does not contain an SQLite database header.");let j=ee.write(z,{at:M});return j!=q?(this.setAssociatedPath(ee,"",0),n("Expected to write "+q+" bytes but wrote "+j+".")):(ee.write(new Uint8Array([1,1]),{at:M+18}),this.setAssociatedPath(ee,A,i.SQLITE_OPEN_MAIN_DB)),j}}class Oe{#e;constructor(A){this.#e=A,this.vfsName=A.vfsName}async addCapacity(A){return this.#e.addCapacity(A)}async reduceCapacity(A){return this.#e.reduceCapacity(A)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(A){let z=this.#e.getCapacity();return z<A?this.#e.addCapacity(A-z):z}exportFile(A){return this.#e.exportFile(A)}importDb(A,z){return this.#e.importDb(A,z)}async wipeFiles(){return this.#e.reset(!0)}unlink(A){return this.#e.deletePath(A)}renameFile(A,z){return this.#e.renameFile(A,z)}async removeVfs(){return this.#e.removeVfs()}pauseVfs(){return this.#e.pauseVfs(),this}async unpauseVfs(){return this.#e.unpauseVfs().then(()=>this)}isPaused(){return this.#e.isPaused()}}let Fe=async()=>{let ne=await navigator.storage.getDirectory(),A=".opfs-sahpool-sync-check-"+V(),q=(await(await ne.getFileHandle(A,{create:!0})).createSyncAccessHandle()).close();return await q,await ne.removeEntry(A),q?.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(ne=Object.create(null)){ne=Object.assign(Object.create(null),J,ne||{});let A=ne.name;if(ne.$testThrowPhase1)throw ne.$testThrowPhase1;if(s[A])try{return await s[A]}catch(z){if(ne.forceReinitIfPreviouslyFailed)delete s[A];else throw z}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?s[A]=Promise.reject(new Error("Missing required OPFS APIs.")):s[A]=Fe().then(async function(){if(ne.$testThrowPhase2)throw ne.$testThrowPhase2;let z=new Se(ne);return z.isReady.then(async()=>{let ee=new Oe(z);if(t.oo1){let q=t.oo1,P=z.getVfs(),j=function(...se){let te=q.DB.dbCtorHelper.normalizeArgs(...se);te.vfs=P.$zName,q.DB.dbCtorHelper.call(this,te)};j.prototype=Object.create(q.DB.prototype),ee.OpfsSAHPoolDb=j}return z.log("VFS initialized."),ee}).catch(async ee=>{throw await z.removeVfs().catch(()=>{}),ee})}).catch(z=>s[A]=Promise.reject(z))}}),typeof r<"u"){let t=Object.assign(Object.create(null),{exports:typeof y>"u"?r.asm:y,memory:r.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let n;try{n=globalThis.sqlite3ApiBootstrap()}catch(o){throw console.error("sqlite3ApiBootstrap() error:",o),o}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}r.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")},p=K,p}})(),Fc=(function(){let _=yr;if(!_)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");let a=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(a.debugModule=a.urlParams.has("sqlite3.debugModule")?(...p)=>console.warn("sqlite3.debugModule:",...p):()=>{},a.urlParams.has("sqlite3.dir"))a.sqlite3Dir=a.urlParams.get("sqlite3.dir")+"/";else if(a.moduleScript){let p=a.moduleScript.src.split("/");p.pop(),a.sqlite3Dir=p.join("/")+"/"}if(globalThis.sqlite3InitModule=function p(...r){return _(...r).then(E=>{E.runSQLite3PostLoadInit(E);let T=E.sqlite3;T.scriptInfo=a,p.__isUnderTest&&(T.__isUnderTest=!0);let K=T.asyncPostInit;return delete T.asyncPostInit,K()}).catch(E=>{throw console.error("Exception loading sqlite3 module:",E),E})},globalThis.sqlite3InitModule.ready=_.ready,globalThis.sqlite3InitModuleState.moduleScript){let p=globalThis.sqlite3InitModuleState,r=p.moduleScript.src.split("/");r.pop(),p.scriptDir=r.join("/")+"/"}return a.debugModule("sqlite3InitModuleState =",a),globalThis.sqlite3InitModule})();yr=Fc;var Zr=yr;globalThis.sqlite3Worker1Promiser=function _(a=_.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){let ce=a;a=Object.assign(Object.create(null),_.defaultConfig),a.onready=ce}else a=Object.assign(Object.create(null),_.defaultConfig,a);let p=Object.create(null),r=function(){},E=a.onerror||r,T=a.debug||r,K=a.generateMessageId?void 0:Object.create(null),ye=a.generateMessageId||function(ce){return ce.type+"#"+(K[ce.type]=(K[ce.type]||0)+1)},me=(...ce)=>{throw new Error(ce.join(" "))};a.worker||(a.worker=_.defaultConfig.worker),typeof a.worker=="function"&&(a.worker=a.worker());let Ce,$e;return a.worker.onmessage=function(ce){ce=ce.data,T("worker1.onmessage",ce);let ke=p[ce.messageId];if(!ke){if(ce&&ce.type==="sqlite3-api"&&ce.result==="worker1-ready"){a.onready&&a.onready($e);return}if(ke=p[ce.type],ke&&ke.onrow){ke.onrow(ce);return}a.onunhandled?a.onunhandled(arguments[0]):E("sqlite3Worker1Promiser() unhandled worker message:",ce);return}switch(delete p[ce.messageId],ce.type){case"error":ke.reject(ce);return;case"open":Ce||(Ce=ce.dbId);break;case"close":ce.dbId===Ce&&(Ce=void 0);break;default:break}try{ke.resolve(ce)}catch(Be){ke.reject(Be)}},$e=function(){let ce;arguments.length===1?ce=arguments[0]:arguments.length===2?(ce=Object.create(null),ce.type=arguments[0],ce.args=arguments[1],ce.dbId=ce.args.dbId):me("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!ce.dbId&&ce.type!=="open"&&(ce.dbId=Ce),ce.messageId=ye(ce),ce.departureTime=performance.now();let ke=Object.create(null);ke.message=ce;let Be;ce.type==="exec"&&ce.args&&(typeof ce.args.callback=="function"?(Be=ce.messageId+":row",ke.onrow=ce.args.callback,ce.args.callback=Be,p[Be]=ke):typeof ce.args.callback=="string"&&me("exec callback may not be a string when using the Promise interface."));let Ne=new Promise(function(at,He){ke.resolve=at,ke.reject=He,p[ce.messageId]=ke,T("Posting",ce.type,"message to Worker dbId="+(Ce||"default")+":",ce),a.worker.postMessage(ce)});return Be&&(Ne=Ne.finally(()=>delete p[Be])),Ne}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("sqlite3-worker1-bundler-friendly.mjs",import.meta.url),{type:"module"})},onerror:(..._)=>console.error("worker1 promiser error",..._)};sqlite3Worker1Promiser.v2=function(_){let a;typeof _=="function"?(a=_,_={}):typeof _?.onready=="function"&&(a=_.onready,delete _.onready);let p=Object.create(null);_=Object.assign(_||Object.create(null),{onready:async function(E){try{a&&await a(E),p.resolve(E)}catch(T){p.reject(T)}}});let r=new Promise(function(E,T){p.resolve=E,p.reject=T});try{this.original(_)}catch(E){p.reject(E)}return r}.bind({original:sqlite3Worker1Promiser});var S_=sqlite3Worker1Promiser.v2;var T_=globalThis.sqlite3Worker1Promiser,en=Zr;var br=class{logLevel=2;setLogLevel(a){this.logLevel=a}debug(a,...p){this.logLevel>=4&&console.log(`[${a}]`,...p)}info(a,...p){this.logLevel>=3&&console.log(`[${a}] \u2713`,...p)}warn(a,...p){this.logLevel>=2&&console.warn(`[${a}] \u26A0`,...p)}error(a,...p){this.logLevel>=1&&console.error(`[${a}] \u274C`,...p)}},qe=new br;var wr;try{wr=new TextDecoder}catch{}var ue,ft,F=0;var pn=[],xr=pn,vr=0,We={},Le,Et,ut=0,yt=0,rt,wt,lt=[],Pe,tn={useRecords:!1,mapsAsObjects:!0},Ht=class{},Sr=new Ht;Sr.name="MessagePack 0xC1";var St=!1,hn=2,rn,nn,sn;try{new Function("")}catch{hn=1/0}var Ot=class _{constructor(a){a&&(a.useRecords===!1&&a.mapsAsObjects===void 0&&(a.mapsAsObjects=!0),a.sequential&&a.trusted!==!1&&(a.trusted=!0,!a.structures&&a.useRecords!=!1&&(a.structures=[],a.maxSharedStructures||(a.maxSharedStructures=0))),a.structures?a.structures.sharedLength=a.structures.length:a.getStructures&&((a.structures=[]).uninitialized=!0,a.structures.sharedLength=0),a.int64AsNumber&&(a.int64AsType="number")),Object.assign(this,a)}unpack(a,p){if(ue)return qn(()=>(rr(),this?this.unpack(a,p):_.prototype.unpack.call(tn,a,p)));!a.buffer&&a.constructor===ArrayBuffer&&(a=typeof Buffer<"u"?Buffer.from(a):new Uint8Array(a)),typeof p=="object"?(ft=p.end||a.length,F=p.start||0):(F=0,ft=p>-1?p:a.length),vr=0,yt=0,Et=null,xr=pn,rt=null,ue=a;try{Pe=a.dataView||(a.dataView=new DataView(a.buffer,a.byteOffset,a.byteLength))}catch(r){throw ue=null,a instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(a&&typeof a=="object"?a.constructor.name:typeof a))}if(this instanceof _){if(We=this,this.structures)return Le=this.structures,tr(p);(!Le||Le.length>0)&&(Le=[])}else We=tn,(!Le||Le.length>0)&&(Le=[]);return tr(p)}unpackMultiple(a,p){let r,E=0;try{St=!0;let T=a.length,K=this?this.unpack(a,T):sr.unpack(a,T);if(p){if(p(K,E,F)===!1)return;for(;F<T;)if(E=F,p(tr(),E,F)===!1)return}else{for(r=[K];F<T;)E=F,r.push(tr());return r}}catch(T){throw T.lastPosition=E,T.values=r,T}finally{St=!1,rr()}}_mergeStructures(a,p){nn&&(a=nn.call(this,a)),a=a||[],Object.isFrozen(a)&&(a=a.map(r=>r.slice(0)));for(let r=0,E=a.length;r<E;r++){let T=a[r];T&&(T.isShared=!0,r>=32&&(T.highByte=r-32>>5))}a.sharedLength=a.length;for(let r in p||[])if(r>=0){let E=a[r],T=p[r];T&&(E&&((a.restoreStructures||(a.restoreStructures=[]))[r]=E),a[r]=T)}return this.structures=a}decode(a,p){return this.unpack(a,p)}};function tr(_){try{if(!We.trusted&&!St){let p=Le.sharedLength||0;p<Le.length&&(Le.length=p)}let a;if(We.randomAccessStructure&&ue[F]<64&&ue[F]>=32&&rn?(a=rn(ue,F,ft,We),ue=null,!(_&&_.lazy)&&a&&(a=a.toJSON()),F=ft):a=Ye(),rt&&(F=rt.postBundlePosition,rt=null),St&&(Le.restoreStructures=null),F==ft)Le&&Le.restoreStructures&&on(),Le=null,ue=null,wt&&(wt=null);else{if(F>ft)throw new Error("Unexpected end of MessagePack data");if(!St){let p;try{p=JSON.stringify(a,(r,E)=>typeof E=="bigint"?`${E}n`:E).slice(0,100)}catch(r){p="(JSON view not available "+r+")"}throw new Error("Data read, but end of buffer not reached "+p)}}return a}catch(a){throw Le&&Le.restoreStructures&&on(),rr(),(a instanceof RangeError||a.message.startsWith("Unexpected end of buffer")||F>ft)&&(a.incomplete=!0),a}}function on(){for(let _ in Le.restoreStructures)Le[_]=Le.restoreStructures[_];Le.restoreStructures=null}function Ye(){let _=ue[F++];if(_<160)if(_<128){if(_<64)return _;{let a=Le[_&63]||We.getStructures&&mn()[_&63];return a?(a.read||(a.read=Ar(a,_&63)),a.read()):_}}else if(_<144)if(_-=128,We.mapsAsObjects){let a={};for(let p=0;p<_;p++){let r=yn();r==="__proto__"&&(r="__proto_"),a[r]=Ye()}return a}else{let a=new Map;for(let p=0;p<_;p++)a.set(Ye(),Ye());return a}else{_-=144;let a=new Array(_);for(let p=0;p<_;p++)a[p]=Ye();return We.freezeData?Object.freeze(a):a}else if(_<192){let a=_-160;if(yt>=F)return Et.slice(F-ut,(F+=a)-ut);if(yt==0&&ft<140){let p=a<16?Ir(a):gn(a);if(p!=null)return p}return Er(a)}else{let a;switch(_){case 192:return null;case 193:return rt?(a=Ye(),a>0?rt[1].slice(rt.position1,rt.position1+=a):rt[0].slice(rt.position0,rt.position0-=a)):Sr;case 194:return!1;case 195:return!0;case 196:if(a=ue[F++],a===void 0)throw new Error("Unexpected end of buffer");return qr(a);case 197:return a=Pe.getUint16(F),F+=2,qr(a);case 198:return a=Pe.getUint32(F),F+=4,qr(a);case 199:return Ft(ue[F++]);case 200:return a=Pe.getUint16(F),F+=2,Ft(a);case 201:return a=Pe.getUint32(F),F+=4,Ft(a);case 202:if(a=Pe.getFloat32(F),We.useFloat32>2){let p=nr[(ue[F]&127)<<1|ue[F+1]>>7];return F+=4,(p*a+(a>0?.5:-.5)>>0)/p}return F+=4,a;case 203:return a=Pe.getFloat64(F),F+=8,a;case 204:return ue[F++];case 205:return a=Pe.getUint16(F),F+=2,a;case 206:return a=Pe.getUint32(F),F+=4,a;case 207:return We.int64AsType==="number"?(a=Pe.getUint32(F)*4294967296,a+=Pe.getUint32(F+4)):We.int64AsType==="string"?a=Pe.getBigUint64(F).toString():We.int64AsType==="auto"?(a=Pe.getBigUint64(F),a<=BigInt(2)<<BigInt(52)&&(a=Number(a))):a=Pe.getBigUint64(F),F+=8,a;case 208:return Pe.getInt8(F++);case 209:return a=Pe.getInt16(F),F+=2,a;case 210:return a=Pe.getInt32(F),F+=4,a;case 211:return We.int64AsType==="number"?(a=Pe.getInt32(F)*4294967296,a+=Pe.getUint32(F+4)):We.int64AsType==="string"?a=Pe.getBigInt64(F).toString():We.int64AsType==="auto"?(a=Pe.getBigInt64(F),a>=BigInt(-2)<<BigInt(52)&&a<=BigInt(2)<<BigInt(52)&&(a=Number(a))):a=Pe.getBigInt64(F),F+=8,a;case 212:if(a=ue[F++],a==114)return fn(ue[F++]&63);{let p=lt[a];if(p)return p.read?(F++,p.read(Ye())):p.noBuffer?(F++,p()):p(ue.subarray(F,++F));throw new Error("Unknown extension "+a)}case 213:return a=ue[F],a==114?(F++,fn(ue[F++]&63,ue[F++])):Ft(2);case 214:return Ft(4);case 215:return Ft(8);case 216:return Ft(16);case 217:return a=ue[F++],yt>=F?Et.slice(F-ut,(F+=a)-ut):Pc(a);case 218:return a=Pe.getUint16(F),F+=2,yt>=F?Et.slice(F-ut,(F+=a)-ut):Lc(a);case 219:return a=Pe.getUint32(F),F+=4,yt>=F?Et.slice(F-ut,(F+=a)-ut):Cc(a);case 220:return a=Pe.getUint16(F),F+=2,ln(a);case 221:return a=Pe.getUint32(F),F+=4,ln(a);case 222:return a=Pe.getUint16(F),F+=2,cn(a);case 223:return a=Pe.getUint32(F),F+=4,cn(a);default:if(_>=224)return _-256;if(_===void 0){let p=new Error("Unexpected end of MessagePack data");throw p.incomplete=!0,p}throw new Error("Unknown MessagePack token "+_)}}}var Oc=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Ar(_,a){function p(){if(p.count++>hn){let E=_.read=new Function("r","return function(){return "+(We.freezeData?"Object.freeze":"")+"({"+_.map(T=>T==="__proto__"?"__proto_:r()":Oc.test(T)?T+":r()":"["+JSON.stringify(T)+"]:r()").join(",")+"})}")(Ye);return _.highByte===0&&(_.read=an(a,_.read)),E()}let r={};for(let E=0,T=_.length;E<T;E++){let K=_[E];K==="__proto__"&&(K="__proto_"),r[K]=Ye()}return We.freezeData?Object.freeze(r):r}return p.count=0,_.highByte===0?an(a,p):p}var an=(_,a)=>function(){let p=ue[F++];if(p===0)return a();let r=_<32?-(_+(p<<5)):_+(p<<5),E=Le[r]||mn()[r];if(!E)throw new Error("Record id is not defined for "+r);return E.read||(E.read=Ar(E,_)),E.read()};function mn(){let _=qn(()=>(ue=null,We.getStructures()));return Le=We._mergeStructures(_,Le)}var Er=$t,Pc=$t,Lc=$t,Cc=$t;function $t(_){let a;if(_<16&&(a=Ir(_)))return a;if(_>64&&wr)return wr.decode(ue.subarray(F,F+=_));let p=F+_,r=[];for(a="";F<p;){let E=ue[F++];if((E&128)===0)r.push(E);else if((E&224)===192){let T=ue[F++]&63;r.push((E&31)<<6|T)}else if((E&240)===224){let T=ue[F++]&63,K=ue[F++]&63;r.push((E&31)<<12|T<<6|K)}else if((E&248)===240){let T=ue[F++]&63,K=ue[F++]&63,ye=ue[F++]&63,me=(E&7)<<18|T<<12|K<<6|ye;me>65535&&(me-=65536,r.push(me>>>10&1023|55296),me=56320|me&1023),r.push(me)}else r.push(E);r.length>=4096&&(a+=tt.apply(String,r),r.length=0)}return r.length>0&&(a+=tt.apply(String,r)),a}function ln(_){let a=new Array(_);for(let p=0;p<_;p++)a[p]=Ye();return We.freezeData?Object.freeze(a):a}function cn(_){if(We.mapsAsObjects){let a={};for(let p=0;p<_;p++){let r=yn();r==="__proto__"&&(r="__proto_"),a[r]=Ye()}return a}else{let a=new Map;for(let p=0;p<_;p++)a.set(Ye(),Ye());return a}}var tt=String.fromCharCode;function gn(_){let a=F,p=new Array(_);for(let r=0;r<_;r++){let E=ue[F++];if((E&128)>0){F=a;return}p[r]=E}return tt.apply(String,p)}function Ir(_){if(_<4)if(_<2){if(_===0)return"";{let a=ue[F++];if((a&128)>1){F-=1;return}return tt(a)}}else{let a=ue[F++],p=ue[F++];if((a&128)>0||(p&128)>0){F-=2;return}if(_<3)return tt(a,p);let r=ue[F++];if((r&128)>0){F-=3;return}return tt(a,p,r)}else{let a=ue[F++],p=ue[F++],r=ue[F++],E=ue[F++];if((a&128)>0||(p&128)>0||(r&128)>0||(E&128)>0){F-=4;return}if(_<6){if(_===4)return tt(a,p,r,E);{let T=ue[F++];if((T&128)>0){F-=5;return}return tt(a,p,r,E,T)}}else if(_<8){let T=ue[F++],K=ue[F++];if((T&128)>0||(K&128)>0){F-=6;return}if(_<7)return tt(a,p,r,E,T,K);let ye=ue[F++];if((ye&128)>0){F-=7;return}return tt(a,p,r,E,T,K,ye)}else{let T=ue[F++],K=ue[F++],ye=ue[F++],me=ue[F++];if((T&128)>0||(K&128)>0||(ye&128)>0||(me&128)>0){F-=8;return}if(_<10){if(_===8)return tt(a,p,r,E,T,K,ye,me);{let Ce=ue[F++];if((Ce&128)>0){F-=9;return}return tt(a,p,r,E,T,K,ye,me,Ce)}}else if(_<12){let Ce=ue[F++],$e=ue[F++];if((Ce&128)>0||($e&128)>0){F-=10;return}if(_<11)return tt(a,p,r,E,T,K,ye,me,Ce,$e);let ce=ue[F++];if((ce&128)>0){F-=11;return}return tt(a,p,r,E,T,K,ye,me,Ce,$e,ce)}else{let Ce=ue[F++],$e=ue[F++],ce=ue[F++],ke=ue[F++];if((Ce&128)>0||($e&128)>0||(ce&128)>0||(ke&128)>0){F-=12;return}if(_<14){if(_===12)return tt(a,p,r,E,T,K,ye,me,Ce,$e,ce,ke);{let Be=ue[F++];if((Be&128)>0){F-=13;return}return tt(a,p,r,E,T,K,ye,me,Ce,$e,ce,ke,Be)}}else{let Be=ue[F++],Ne=ue[F++];if((Be&128)>0||(Ne&128)>0){F-=14;return}if(_<15)return tt(a,p,r,E,T,K,ye,me,Ce,$e,ce,ke,Be,Ne);let at=ue[F++];if((at&128)>0){F-=15;return}return tt(a,p,r,E,T,K,ye,me,Ce,$e,ce,ke,Be,Ne,at)}}}}}function _n(){let _=ue[F++],a;if(_<192)a=_-160;else switch(_){case 217:a=ue[F++];break;case 218:a=Pe.getUint16(F),F+=2;break;case 219:a=Pe.getUint32(F),F+=4;break;default:throw new Error("Expected string")}return $t(a)}function qr(_){return We.copyBuffers?Uint8Array.prototype.slice.call(ue,F,F+=_):ue.subarray(F,F+=_)}function Ft(_){let a=ue[F++];if(lt[a]){let p;return lt[a](ue.subarray(F,p=F+=_),r=>{F=r;try{return Ye()}finally{F=p}})}else throw new Error("Unknown extension type "+a)}var un=new Array(4096);function yn(){let _=ue[F++];if(_>=160&&_<192){if(_=_-160,yt>=F)return Et.slice(F-ut,(F+=_)-ut);if(!(yt==0&&ft<180))return Er(_)}else return F--,bn(Ye());let a=(_<<5^(_>1?Pe.getUint16(F):_>0?ue[F]:0))&4095,p=un[a],r=F,E=F+_-3,T,K=0;if(p&&p.bytes==_){for(;r<E;){if(T=Pe.getUint32(r),T!=p[K++]){r=1879048192;break}r+=4}for(E+=3;r<E;)if(T=ue[r++],T!=p[K++]){r=1879048192;break}if(r===E)return F=r,p.string;E-=3,r=F}for(p=[],un[a]=p,p.bytes=_;r<E;)T=Pe.getUint32(r),p.push(T),r+=4;for(E+=3;r<E;)T=ue[r++],p.push(T);let ye=_<16?Ir(_):gn(_);return ye!=null?p.string=ye:p.string=Er(_)}function bn(_){if(typeof _=="string")return _;if(typeof _=="number"||typeof _=="boolean"||typeof _=="bigint")return _.toString();if(_==null)return _+"";if(We.allowArraysInMapKeys&&Array.isArray(_)&&_.flat().every(a=>["string","number","boolean","bigint"].includes(typeof a)))return _.flat().toString();throw new Error(`Invalid property type for record: ${typeof _}`)}var fn=(_,a)=>{let p=Ye().map(bn),r=_;a!==void 0&&(_=_<32?-((a<<5)+_):(a<<5)+_,p.highByte=a);let E=Le[_];return E&&(E.isShared||St)&&((Le.restoreStructures||(Le.restoreStructures=[]))[_]=E),Le[_]=p,p.read=Ar(p,r),p.read()};lt[0]=()=>{};lt[0].noBuffer=!0;lt[66]=_=>{let a=_.byteLength%8||8,p=BigInt(_[0]&128?_[0]-256:_[0]);for(let r=1;r<a;r++)p<<=BigInt(8),p+=BigInt(_[r]);if(_.byteLength!==a){let r=new DataView(_.buffer,_.byteOffset,_.byteLength),E=(T,K)=>{let ye=K-T;if(ye<=40){let ce=r.getBigUint64(T);for(let ke=T+8;ke<K;ke+=8)ce<<=64n,ce|=r.getBigUint64(ke);return ce}let me=T+(ye>>4<<3),Ce=E(T,me),$e=E(me,K);return Ce<<BigInt((K-me)*8)|$e};p=p<<BigInt((r.byteLength-a)*8)|E(a,r.byteLength)}return p};var dn={Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError:typeof AggregateError=="function"?AggregateError:null};lt[101]=()=>{let _=Ye();if(!dn[_[0]]){let a=Error(_[1],{cause:_[2]});return a.name=_[0],a}return dn[_[0]](_[1],{cause:_[2]})};lt[105]=_=>{if(We.structuredClone===!1)throw new Error("Structured clone extension is disabled");let a=Pe.getUint32(F-4);wt||(wt=new Map);let p=ue[F],r;p>=144&&p<160||p==220||p==221?r=[]:p>=128&&p<144||p==222||p==223?r=new Map:(p>=199&&p<=201||p>=212&&p<=216)&&ue[F+1]===115?r=new Set:r={};let E={target:r};wt.set(a,E);let T=Ye();if(E.used)Object.assign(r,T);else return E.target=T;if(r instanceof Map)for(let[K,ye]of T.entries())r.set(K,ye);if(r instanceof Set)for(let K of Array.from(T))r.add(K);return r};lt[112]=_=>{if(We.structuredClone===!1)throw new Error("Structured clone extension is disabled");let a=Pe.getUint32(F-4),p=wt.get(a);return p.used=!0,p.target};lt[115]=()=>new Set(Ye());var kr=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(_=>_+"Array"),Rc=typeof globalThis=="object"?globalThis:window;lt[116]=_=>{let a=_[0],p=Uint8Array.prototype.slice.call(_,1).buffer,r=kr[a];if(!r){if(a===16)return p;if(a===17)return new DataView(p);throw new Error("Could not find typed array for code "+a)}return new Rc[r](p)};lt[120]=()=>{let _=Ye();return new RegExp(_[0],_[1])};var Dc=[];lt[98]=_=>{let a=(_[0]<<24)+(_[1]<<16)+(_[2]<<8)+_[3],p=F;return F+=a-_.length,rt=Dc,rt=[_n(),_n()],rt.position0=0,rt.position1=0,rt.postBundlePosition=F,F=p,Ye()};lt[255]=_=>_.length==4?new Date((_[0]*16777216+(_[1]<<16)+(_[2]<<8)+_[3])*1e3):_.length==8?new Date(((_[0]<<22)+(_[1]<<14)+(_[2]<<6)+(_[3]>>2))/1e6+((_[3]&3)*4294967296+_[4]*16777216+(_[5]<<16)+(_[6]<<8)+_[7])*1e3):_.length==12?new Date(((_[0]<<24)+(_[1]<<16)+(_[2]<<8)+_[3])/1e6+((_[4]&128?-281474976710656:0)+_[6]*1099511627776+_[7]*4294967296+_[8]*16777216+(_[9]<<16)+(_[10]<<8)+_[11])*1e3):new Date("invalid");function qn(_){sn&&sn();let a=ft,p=F,r=vr,E=ut,T=yt,K=Et,ye=xr,me=wt,Ce=rt,$e=new Uint8Array(ue.slice(0,ft)),ce=Le,ke=Le.slice(0,Le.length),Be=We,Ne=St,at=_();return ft=a,F=p,vr=r,ut=E,yt=T,Et=K,xr=ye,wt=me,rt=Ce,ue=$e,St=Ne,Le=ce,Le.splice(0,Le.length,...ke),We=Be,Pe=new DataView(ue.buffer,ue.byteOffset,ue.byteLength),at}function rr(){ue=null,wt=null,Le=null}var nr=new Array(147);for(let _=0;_<256;_++)nr[_]=+("1e"+Math.floor(45.15-_*.30103));var sr=new Ot({useRecords:!1}),Nc=sr.unpack,Mc=sr.unpackMultiple,Uc=sr.unpack,ir={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},Bc=new Float32Array(1),P_=new Uint8Array(Bc.buffer,0,4);var ar;try{ar=new TextEncoder}catch{}var Or,En,Ut=typeof Buffer<"u",or=Ut?function(_){return Buffer.allocUnsafeSlow(_)}:Uint8Array,Sn=Ut?Buffer:Uint8Array,wn=Ut?4294967296:2144337920,D,Gt,Qe,O=0,st,Ke=null,jc,zc=21760,Wc=/[\u0080-\uFFFF]/,Mt=Symbol("record-id"),Kt=class extends Ot{constructor(a){super(a),this.offset=0;let p,r,E,T,K,ye=Sn.prototype.utf8Write?function(N,fe){return D.utf8Write(N,fe,D.byteLength-fe)}:ar&&ar.encodeInto?function(N,fe){return ar.encodeInto(N,D.subarray(fe)).written}:!1,me=this;a||(a={});let Ce=a&&a.sequential,$e=a.structures||a.saveStructures,ce=a.maxSharedStructures;if(ce==null&&(ce=$e?32:0),ce>8160)throw new Error("Maximum maxSharedStructure is 8160");a.structuredClone&&a.moreTypes==null&&(this.moreTypes=!0);let ke=a.maxOwnStructures;ke==null&&(ke=$e?32:64),!this.structures&&a.useRecords!=!1&&(this.structures=[]);let Be=ce>32||ke+ce>64,Ne=ce+64,at=ce+ke+64;if(at>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let He=[],it=0,Je=0;this.pack=this.encode=function(N,fe){if(D||(D=new or(8192),Qe=D.dataView||(D.dataView=new DataView(D.buffer,0,8192)),O=0),st=D.length-10,st-O<2048?(D=new or(D.length),Qe=D.dataView||(D.dataView=new DataView(D.buffer,0,D.length)),st=D.length-10,O=0):O=O+7&2147483640,r=O,fe&Tn&&(O+=fe&255),K=me.structuredClone?new Map:null,me.bundleStrings&&typeof N!="string"?(Ke=[],Ke.size=1/0):Ke=null,T=me.structures,T){T.uninitialized&&(T=me._mergeStructures(me.getStructures()));let Y=T.sharedLength||0;if(Y>ce)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+T.sharedLength);if(!T.transitions){T.transitions=Object.create(null);for(let oe=0;oe<Y;oe++){let ge=T[oe];if(!ge)continue;let ve,we=T.transitions;for(let De=0,Me=ge.length;De<Me;De++){let _t=ge[De];ve=we[_t],ve||(ve=we[_t]=Object.create(null)),we=ve}we[Mt]=oe+64}this.lastNamedStructuresLength=Y}Ce||(T.nextId=Y+64)}E&&(E=!1);let G;try{me.randomAccessStructure&&N&&N.constructor&&N.constructor===Object?xt(N):Re(N);let Y=Ke;if(Ke&&vn(r,Re,0),K&&K.idsToInsert){let oe=K.idsToInsert.sort((De,Me)=>De.offset>Me.offset?1:-1),ge=oe.length,ve=-1;for(;Y&&ge>0;){let De=oe[--ge].offset+r;De<Y.stringsPosition+r&&ve===-1&&(ve=0),De>Y.position+r?ve>=0&&(ve+=6):(ve>=0&&(Qe.setUint32(Y.position+r,Qe.getUint32(Y.position+r)+ve),ve=-1),Y=Y.previous,ge++)}ve>=0&&Y&&Qe.setUint32(Y.position+r,Qe.getUint32(Y.position+r)+ve),O+=oe.length*6,O>st&&mt(O),me.offset=O;let we=Qc(D.subarray(r,O),oe);return K=null,we}return me.offset=O,fe&In?(D.start=r,D.end=O,D):D.subarray(r,O)}catch(Y){throw G=Y,Y}finally{if(T&&(At(),E&&me.saveStructures)){let Y=T.sharedLength||0,oe=D.subarray(r,O),ge=Vc(T,me);if(!G)return me.saveStructures(ge,ge.isCompatible)===!1?me.pack(N,fe):(me.lastNamedStructuresLength=Y,D.length>1073741824&&(D=null),oe)}D.length>1073741824&&(D=null),fe&kn&&(O=r)}};let At=()=>{Je<10&&Je++;let N=T.sharedLength||0;if(T.length>N&&!Ce&&(T.length=N),it>1e4)T.transitions=null,Je=0,it=0,He.length>0&&(He=[]);else if(He.length>0&&!Ce){for(let fe=0,G=He.length;fe<G;fe++)He[fe][Mt]=0;He=[]}},It=N=>{var fe=N.length;fe<16?D[O++]=144|fe:fe<65536?(D[O++]=220,D[O++]=fe>>8,D[O++]=fe&255):(D[O++]=221,Qe.setUint32(O,fe),O+=4);for(let G=0;G<fe;G++)Re(N[G])},Re=N=>{O>st&&(D=mt(O));var fe=typeof N,G;if(fe==="string"){let Y=N.length;if(Ke&&Y>=4&&Y<4096){if((Ke.size+=Y)>zc){let we,De=(Ke[0]?Ke[0].length*3+Ke[1].length:0)+10;O+De>st&&(D=mt(O+De));let Me;Ke.position?(Me=Ke,D[O]=200,O+=3,D[O++]=98,we=O-r,O+=4,vn(r,Re,0),Qe.setUint16(we+r-3,O-r-we)):(D[O++]=214,D[O++]=98,we=O-r,O+=4),Ke=["",""],Ke.previous=Me,Ke.size=0,Ke.position=we}let ve=Wc.test(N);Ke[ve?0:1]+=N,D[O++]=193,Re(ve?-Y:Y);return}let oe;Y<32?oe=1:Y<256?oe=2:Y<65536?oe=3:oe=5;let ge=Y*3;if(O+ge>st&&(D=mt(O+ge)),Y<64||!ye){let ve,we,De,Me=O+oe;for(ve=0;ve<Y;ve++)we=N.charCodeAt(ve),we<128?D[Me++]=we:we<2048?(D[Me++]=we>>6|192,D[Me++]=we&63|128):(we&64512)===55296&&((De=N.charCodeAt(ve+1))&64512)===56320?(we=65536+((we&1023)<<10)+(De&1023),ve++,D[Me++]=we>>18|240,D[Me++]=we>>12&63|128,D[Me++]=we>>6&63|128,D[Me++]=we&63|128):(D[Me++]=we>>12|224,D[Me++]=we>>6&63|128,D[Me++]=we&63|128);G=Me-O-oe}else G=ye(N,O+oe);G<32?D[O++]=160|G:G<256?(oe<2&&D.copyWithin(O+2,O+1,O+1+G),D[O++]=217,D[O++]=G):G<65536?(oe<3&&D.copyWithin(O+3,O+2,O+2+G),D[O++]=218,D[O++]=G>>8,D[O++]=G&255):(oe<5&&D.copyWithin(O+5,O+3,O+3+G),D[O++]=219,Qe.setUint32(O,G),O+=4),O+=G}else if(fe==="number")if(N>>>0===N)N<32||N<128&&this.useRecords===!1||N<64&&!this.randomAccessStructure?D[O++]=N:N<256?(D[O++]=204,D[O++]=N):N<65536?(D[O++]=205,D[O++]=N>>8,D[O++]=N&255):(D[O++]=206,Qe.setUint32(O,N),O+=4);else if(N>>0===N)N>=-32?D[O++]=256+N:N>=-128?(D[O++]=208,D[O++]=N+256):N>=-32768?(D[O++]=209,Qe.setInt16(O,N),O+=2):(D[O++]=210,Qe.setInt32(O,N),O+=4);else{let Y;if((Y=this.useFloat32)>0&&N<4294967296&&N>=-2147483648){D[O++]=202,Qe.setFloat32(O,N);let oe;if(Y<4||(oe=N*nr[(D[O]&127)<<1|D[O+1]>>7])>>0===oe){O+=4;return}else O--}D[O++]=203,Qe.setFloat64(O,N),O+=8}else if(fe==="object"||fe==="function")if(!N)D[O++]=192;else{if(K){let oe=K.get(N);if(oe){if(!oe.id){let ge=K.idsToInsert||(K.idsToInsert=[]);oe.id=ge.push(oe)}D[O++]=214,D[O++]=112,Qe.setUint32(O,oe.id),O+=4;return}else K.set(N,{offset:O-r})}let Y=N.constructor;if(Y===Object)zt(N);else if(Y===Array)It(N);else if(Y===Map)if(this.mapAsEmptyObject)D[O++]=128;else{G=N.size,G<16?D[O++]=128|G:G<65536?(D[O++]=222,D[O++]=G>>8,D[O++]=G&255):(D[O++]=223,Qe.setUint32(O,G),O+=4);for(let[oe,ge]of N)Re(oe),Re(ge)}else{for(let oe=0,ge=Or.length;oe<ge;oe++){let ve=En[oe];if(N instanceof ve){let we=Or[oe];if(we.write){we.type&&(D[O++]=212,D[O++]=we.type,D[O++]=0);let Pt=we.write.call(this,N);Pt===N?Array.isArray(N)?It(N):zt(N):Re(Pt);return}let De=D,Me=Qe,_t=O;D=null;let pt;try{pt=we.pack.call(this,N,Pt=>(D=De,De=null,O+=Pt,O>st&&mt(O),{target:D,targetView:Qe,position:O-Pt}),Re)}finally{De&&(D=De,Qe=Me,O=_t,st=D.length-10)}pt&&(pt.length+O>st&&mt(pt.length+O),O=xn(pt,D,O,we.type));return}}if(Array.isArray(N))It(N);else{if(N.toJSON){let oe=N.toJSON();if(oe!==N)return Re(oe)}if(fe==="function")return Re(this.writeFunction&&this.writeFunction(N));zt(N)}}}else if(fe==="boolean")D[O++]=N?195:194;else if(fe==="bigint"){if(N<9223372036854776e3&&N>=-9223372036854776e3)D[O++]=211,Qe.setBigInt64(O,N);else if(N<18446744073709552e3&&N>0)D[O++]=207,Qe.setBigUint64(O,N);else if(this.largeBigIntToFloat)D[O++]=203,Qe.setFloat64(O,Number(N));else{if(this.largeBigIntToString)return Re(N.toString());if(this.useBigIntExtension||this.moreTypes){let Y=N<0?BigInt(-1):BigInt(0),oe;if(N>>BigInt(65536)===Y){let ge=BigInt(18446744073709552e3)-BigInt(1),ve=[];for(;ve.push(N&ge),N>>BigInt(63)!==Y;)N>>=BigInt(64);oe=new Uint8Array(new BigUint64Array(ve).buffer),oe.reverse()}else{let ge=N<0,ve=(ge?~N:N).toString(16);if(ve.length%2?ve="0"+ve:parseInt(ve.charAt(0),16)>=8&&(ve="00"+ve),Ut)oe=Buffer.from(ve,"hex");else{oe=new Uint8Array(ve.length/2);for(let we=0;we<oe.length;we++)oe[we]=parseInt(ve.slice(we*2,we*2+2),16)}if(ge)for(let we=0;we<oe.length;we++)oe[we]=~oe[we]}oe.length+O>st&&mt(oe.length+O),O=xn(oe,D,O,66);return}else throw new RangeError(N+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string")}O+=8}else if(fe==="undefined")this.encodeUndefinedAsNil?D[O++]=192:(D[O++]=212,D[O++]=0,D[O++]=0);else throw new Error("Unknown type: "+fe)},kt=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?N=>{let fe;if(this.skipValues){fe=[];for(let oe in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(oe))&&!this.skipValues.includes(N[oe])&&fe.push(oe)}else fe=Object.keys(N);let G=fe.length;G<16?D[O++]=128|G:G<65536?(D[O++]=222,D[O++]=G>>8,D[O++]=G&255):(D[O++]=223,Qe.setUint32(O,G),O+=4);let Y;if(this.coercibleKeyAsNumber)for(let oe=0;oe<G;oe++){Y=fe[oe];let ge=Number(Y);Re(isNaN(ge)?Y:ge),Re(N[Y])}else for(let oe=0;oe<G;oe++)Re(Y=fe[oe]),Re(N[Y])}:N=>{D[O++]=222;let fe=O-r;O+=2;let G=0;for(let Y in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(Y))&&(Re(Y),Re(N[Y]),G++);if(G>65535)throw new Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');D[fe+++r]=G>>8,D[fe+r]=G&255},ht=this.useRecords===!1?kt:a.progressiveRecords&&!Be?N=>{let fe,G=T.transitions||(T.transitions=Object.create(null)),Y=O++-r,oe;for(let ge in N)if(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(ge)){if(fe=G[ge],fe)G=fe;else{let ve=Object.keys(N),we=G;G=T.transitions;let De=0;for(let Me=0,_t=ve.length;Me<_t;Me++){let pt=ve[Me];fe=G[pt],fe||(fe=G[pt]=Object.create(null),De++),G=fe}Y+r+1==O?(O--,Jt(G,ve,De)):Xe(G,ve,Y,De),oe=!0,G=we[ge]}Re(N[ge])}if(!oe){let ge=G[Mt];ge?D[Y+r]=ge:Xe(G,Object.keys(N),Y,0)}}:N=>{let fe,G=T.transitions||(T.transitions=Object.create(null)),Y=0;for(let ge in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(ge))&&(fe=G[ge],fe||(fe=G[ge]=Object.create(null),Y++),G=fe);let oe=G[Mt];oe?oe>=96&&Be?(D[O++]=((oe-=96)&31)+96,D[O++]=oe>>5):D[O++]=oe:Jt(G,G.__keys__||Object.keys(N),Y);for(let ge in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(ge))&&Re(N[ge])},jt=typeof this.useRecords=="function"&&this.useRecords,zt=jt?N=>{jt(N)?ht(N):kt(N)}:ht,mt=N=>{let fe;if(N>16777216){if(N-r>wn)throw new Error("Packed buffer would be larger than maximum buffer size");fe=Math.min(wn,Math.round(Math.max((N-r)*(N>67108864?1.25:2),4194304)/4096)*4096)}else fe=(Math.max(N-r<<2,D.length-1)>>12)+1<<12;let G=new or(fe);return Qe=G.dataView||(G.dataView=new DataView(G.buffer,0,fe)),N=Math.min(N,D.length),D.copy?D.copy(G,0,r,N):G.set(D.slice(r,N)),O-=r,r=0,st=G.length-10,D=G},Jt=(N,fe,G)=>{let Y=T.nextId;Y||(Y=64),Y<Ne&&this.shouldShareStructure&&!this.shouldShareStructure(fe)?(Y=T.nextOwnId,Y<at||(Y=Ne),T.nextOwnId=Y+1):(Y>=at&&(Y=Ne),T.nextId=Y+1);let oe=fe.highByte=Y>=96&&Be?Y-96>>5:-1;N[Mt]=Y,N.__keys__=fe,T[Y-64]=fe,Y<Ne?(fe.isShared=!0,T.sharedLength=Y-63,E=!0,oe>=0?(D[O++]=(Y&31)+96,D[O++]=oe):D[O++]=Y):(oe>=0?(D[O++]=213,D[O++]=114,D[O++]=(Y&31)+96,D[O++]=oe):(D[O++]=212,D[O++]=114,D[O++]=Y),G&&(it+=Je*G),He.length>=ke&&(He.shift()[Mt]=0),He.push(N),Re(fe))},Xe=(N,fe,G,Y)=>{let oe=D,ge=O,ve=st,we=r;D=Gt,O=0,r=0,D||(Gt=D=new or(8192)),st=D.length-10,Jt(N,fe,Y),Gt=D;let De=O;if(D=oe,O=ge,st=ve,r=we,De>1){let Me=O+De-1;Me>st&&mt(Me);let _t=G+r;D.copyWithin(_t+De,_t+1,O),D.set(Gt.slice(0,De),_t),O=Me}else D[G+r]=Gt[0]},xt=N=>{let fe=jc(N,D,r,O,T,mt,(G,Y,oe)=>{if(oe)return E=!0;O=Y;let ge=D;return Re(G),At(),ge!==D?{position:O,targetView:Qe,target:D}:O},this);if(fe===0)return zt(N);O=fe}}useBuffer(a){D=a,D.dataView||(D.dataView=new DataView(D.buffer,D.byteOffset,D.byteLength)),Qe=D.dataView,O=0}set position(a){O=a}get position(){return O}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}};En=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,Ht];Or=[{pack(_,a,p){let r=_.getTime()/1e3;if((this.useTimestamp32||_.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:E,targetView:T,position:K}=a(6);E[K++]=214,E[K++]=255,T.setUint32(K,r)}else if(r>0&&r<4294967296){let{target:E,targetView:T,position:K}=a(10);E[K++]=215,E[K++]=255,T.setUint32(K,_.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),T.setUint32(K+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return a(0),p(this.onInvalidDate());let{target:E,targetView:T,position:K}=a(3);E[K++]=212,E[K++]=255,E[K++]=255}else{let{target:E,targetView:T,position:K}=a(15);E[K++]=199,E[K++]=12,E[K++]=255,T.setUint32(K,_.getMilliseconds()*1e6),T.setBigInt64(K+4,BigInt(Math.floor(r)))}}},{pack(_,a,p){if(this.setAsEmptyObject)return a(0),p({});let r=Array.from(_),{target:E,position:T}=a(this.moreTypes?3:0);this.moreTypes&&(E[T++]=212,E[T++]=115,E[T++]=0),p(r)}},{pack(_,a,p){let{target:r,position:E}=a(this.moreTypes?3:0);this.moreTypes&&(r[E++]=212,r[E++]=101,r[E++]=0),p([_.name,_.message,_.cause])}},{pack(_,a,p){let{target:r,position:E}=a(this.moreTypes?3:0);this.moreTypes&&(r[E++]=212,r[E++]=120,r[E++]=0),p([_.source,_.flags])}},{pack(_,a){this.moreTypes?Tr(_,16,a):Fr(Ut?Buffer.from(_):new Uint8Array(_),a)}},{pack(_,a){let p=_.constructor;p!==Sn&&this.moreTypes?Tr(_,kr.indexOf(p.name),a):Fr(_,a)}},{pack(_,a){this.moreTypes?Tr(_,17,a):Fr(Ut?Buffer.from(_):new Uint8Array(_),a)}},{pack(_,a){let{target:p,position:r}=a(1);p[r]=193}}];function Tr(_,a,p,r){let E=_.byteLength;if(E+1<256){var{target:T,position:K}=p(4+E);T[K++]=199,T[K++]=E+1}else if(E+1<65536){var{target:T,position:K}=p(5+E);T[K++]=200,T[K++]=E+1>>8,T[K++]=E+1&255}else{var{target:T,position:K,targetView:ye}=p(7+E);T[K++]=201,ye.setUint32(K,E+1),K+=4}T[K++]=116,T[K++]=a,_.buffer||(_=new Uint8Array(_)),T.set(new Uint8Array(_.buffer,_.byteOffset,_.byteLength),K)}function Fr(_,a){let p=_.byteLength;var r,E;if(p<256){var{target:r,position:E}=a(p+2);r[E++]=196,r[E++]=p}else if(p<65536){var{target:r,position:E}=a(p+3);r[E++]=197,r[E++]=p>>8,r[E++]=p&255}else{var{target:r,position:E,targetView:T}=a(p+5);r[E++]=198,T.setUint32(E,p),E+=4}r.set(_,E)}function xn(_,a,p,r){let E=_.length;switch(E){case 1:a[p++]=212;break;case 2:a[p++]=213;break;case 4:a[p++]=214;break;case 8:a[p++]=215;break;case 16:a[p++]=216;break;default:E<256?(a[p++]=199,a[p++]=E):E<65536?(a[p++]=200,a[p++]=E>>8,a[p++]=E&255):(a[p++]=201,a[p++]=E>>24,a[p++]=E>>16&255,a[p++]=E>>8&255,a[p++]=E&255)}return a[p++]=r,a.set(_,p),p+=E,p}function Qc(_,a){let p,r=a.length*6,E=_.length-r;for(;p=a.pop();){let T=p.offset,K=p.id;_.copyWithin(T+r,T,E),r-=6;let ye=T+r;_[ye++]=214,_[ye++]=105,_[ye++]=K>>24,_[ye++]=K>>16&255,_[ye++]=K>>8&255,_[ye++]=K&255,E=T}return _}function vn(_,a,p){if(Ke.length>0){Qe.setUint32(Ke.position+_,O+p-Ke.position-_),Ke.stringsPosition=O-_;let r=Ke;Ke=null,a(r[0]),a(r[1])}}function Vc(_,a){return _.isCompatible=p=>{let r=!p||(a.lastNamedStructuresLength||0)===p.length;return r||a._mergeStructures(p),r},_}var An=new Kt({useRecords:!1}),Pr=An.pack,Hc=An.pack;var{NEVER:$c,ALWAYS:Gc,DECIMAL_ROUND:Kc,DECIMAL_FIT:Jc}=ir,In=512,kn=1024,Tn=2048;var dt="EF Core Functions";function Fn(_,a){try{qe.debug(dt,"Registering EF Core functions..."),Xc(_),Yc(_),Zc(_),e_(_,a),qe.info(dt,"EF Core functions registered successfully")}catch(p){throw qe.error(dt,"Failed to register EF Core functions:",p),p}}function Xc(_){_.createFunction({name:"ef_add",xFunc:(a,p,r)=>{if(p===null||r===null)return null;let E=typeof p=="string"?parseFloat(p):p,T=typeof r=="string"?parseFloat(r):r;return(E+T).toString()},arity:2,deterministic:!0}),_.createFunction({name:"ef_multiply",xFunc:(a,p,r)=>{if(p===null||r===null)return null;let E=typeof p=="string"?parseFloat(p):p,T=typeof r=="string"?parseFloat(r):r;return(E*T).toString()},arity:2,deterministic:!0}),_.createFunction({name:"ef_divide",xFunc:(a,p,r)=>{if(p===null||r===null)return null;let E=typeof p=="string"?parseFloat(p):p,T=typeof r=="string"?parseFloat(r):r;return T===0?null:(E/T).toString()},arity:2,deterministic:!0}),_.createFunction({name:"ef_mod",xFunc:(a,p,r)=>{if(p===null||r===null)return null;let E=typeof p=="string"?parseFloat(p):p,T=typeof r=="string"?parseFloat(r):r;return T===0?null:(E%T).toString()},arity:2,deterministic:!0}),_.createFunction({name:"ef_negate",xFunc:(a,p)=>p===null?null:(-(typeof p=="string"?parseFloat(p):p)).toString(),arity:1,deterministic:!0}),qe.debug(dt,"Registered 5 arithmetic functions")}function Yc(_){_.createFunction({name:"ef_compare",xFunc:(a,p,r)=>{if(p===null||r===null)return null;let E=typeof p=="string"?parseFloat(p):p,T=typeof r=="string"?parseFloat(r):r;return E<T?-1:E>T?1:0},arity:2,deterministic:!0}),qe.debug(dt,"Registered ef_compare function")}function Zc(_){_.createFunction({name:"regexp",xFunc:(a,p,r)=>{if(p===null||r===null)return null;try{return new RegExp(p).test(r)?1:0}catch(E){return qe.warn(dt,`Invalid regex pattern: ${p}`,E),null}},arity:2,deterministic:!0}),qe.debug(dt,"Registered regexp function")}function e_(_,a){if(!a||!a.capi){qe.error(dt,"sqlite3.capi not available for collation registration");return}try{let p=a.capi.sqlite3_create_collation_v2(_.pointer,"EF_DECIMAL",a.capi.SQLITE_UTF8,null,(r,E,T,K,ye)=>{try{let me=a.wasm.heap8u(),Ce=me.subarray(T,T+E),$e=me.subarray(ye,ye+K),ce=new TextDecoder().decode(Ce),ke=new TextDecoder().decode($e),Be=parseFloat(ce),Ne=parseFloat(ke);return isNaN(Be)||isNaN(Ne)?0:Be<Ne?-1:Be>Ne?1:0}catch(me){return qe.error(dt,"Error in EF_DECIMAL collation callback:",me),0}},null);p===a.capi.SQLITE_OK?qe.info(dt,"Registered EF_DECIMAL collation successfully"):qe.error(dt,`Failed to register EF_DECIMAL collation: rc=${p}`)}catch(p){qe.error(dt,"Exception during collation registration:",p)}}var ct,nt,Bt=new Map,Cr=new Set,Lr=new Map,Ie="SQLite Worker",On="/";function Rr(_){if(typeof _=="bigint")return _>=Number.MIN_SAFE_INTEGER&&_<=Number.MAX_SAFE_INTEGER?Number(_):_.toString();if(Array.isArray(_))return _.map(Rr);if(_&&typeof _=="object"&&!(_ instanceof Uint8Array)){let a={};for(let p in _)a[p]=Rr(_[p]);return a}return _}async function t_(){try{qe.info(Ie,"Initializing sqlite-wasm with OPFS SAHPool...");let _=console.warn;console.warn=(...a)=>{let p=a.join(" ");p.includes("Ignoring inability to install OPFS")||p.includes("sqlite3_vfs")||p.includes("Cannot install OPFS")||p.includes("Missing SharedArrayBuffer")||p.includes("COOP/COEP")||_.apply(console,a)},ct=await en({print:console.log,printErr:console.error,locateFile(a){return a.endsWith(".wasm")?`${On}_content/SqliteWasmBlazor/${a}`:a}}),console.warn=_,ct.config&&(ct.config.warn=(...a)=>qe.warn(Ie,...a),ct.config.error=(...a)=>qe.error(Ie,...a),ct.config.log=(...a)=>qe.info(Ie,...a),ct.config.debug=(...a)=>qe.debug(Ie,...a)),ct.capi?.sqlite3_vfs_find("opfs")&&qe.debug(Ie,"OPFS VFS auto-installed, but we use SAHPool VFS instead"),nt=await ct.installOpfsSAHPoolVfs({initialCapacity:6,directory:"/databases",name:"opfs-sahpool",clearOnInit:!1}),qe.info(Ie,"OPFS SAHPool VFS installed successfully"),qe.debug(Ie,"Available VFS:",ct.capi.sqlite3_vfs_find(null)),self.postMessage({type:"ready"}),qe.info(Ie,"Ready!")}catch(_){qe.error(Ie,"Initialization failed:",_),self.postMessage({type:"error",error:_ instanceof Error?_.message:"Unknown initialization error"})}}self.onmessage=async _=>{if("type"in _.data&&_.data.type==="init"&&"baseHref"in _.data){On=_.data.baseHref,await t_();return}if("type"in _.data&&_.data.type==="setLogLevel"&&"level"in _.data){qe.setLogLevel(_.data.level);return}let{id:a,data:p}=_.data;try{let r=await r_(p);if(r instanceof Uint8Array)self.postMessage({id:a,binary:!0,data:r});else{let E={id:a,data:{success:!0,...r}};self.postMessage(E)}}catch(r){let E={id:a,data:{success:!1,error:r instanceof Error?r.message:"Unknown error"}};self.postMessage(E)}};async function r_(_){let{type:a,database:p,sql:r,parameters:E}=_;switch(a){case"open":return await n_(p);case"execute":return await a_(p,r,E||{});case"close":return await lr(p);case"exists":return await l_(p);case"delete":return await c_(p);case"rename":return await __(p,_.newName);default:throw new Error(`Unknown request type: ${a}`)}}async function n_(_){if(!ct||!nt)throw new Error("SQLite not initialized");let a=Bt.get(_);if(!a)try{let p=`/databases/${_}`,r=new Promise((T,K)=>{try{let ye=new nt.OpfsSAHPoolDb(p);T(ye)}catch(ye){K(ye)}}),E=new Promise((T,K)=>setTimeout(()=>K(new Error(`Timeout opening database: ${_}`)),4e3));if(a=await Promise.race([r,E]),Bt.set(_,a),qe.info(Ie,`\u2713 Opened database: ${_} with OPFS SAHPool`),nt.getFileNames){let T=nt.getFileNames(),K=T.includes(p);qe.debug(Ie,`Database ${_} in OPFS: ${K}, Total files: ${T.length}`),K||qe.warn(Ie,`WARNING: Database ${_} was opened but is not in OPFS file list!`)}}catch(p){throw qe.error(Ie,`Failed to open database ${_}:`,p),p}return Cr.has(_)||(a.exec("PRAGMA locking_mode = exclusive;"),a.exec("PRAGMA journal_mode = WAL;"),a.exec("PRAGMA synchronous = FULL;"),Cr.add(_),qe.debug(Ie,`Set PRAGMAs for ${_} (locking_mode=exclusive, journal_mode=WAL, synchronous=FULL)`),Fn(a,ct)),{success:!0}}function s_(_,a){if(Lr.has(a))return Lr.get(a);let p=new Map;try{let r=_.exec({sql:`PRAGMA table_info("${a}")`,returnValue:"resultRows",rowMode:"array"});for(let E of r){let T=E[1],K=E[2];p.set(T,K.toUpperCase())}Lr.set(a,p)}catch(r){qe.warn(Ie,`Failed to load schema for table ${a}:`,r)}return p}function i_(_){let a=_.match(/FROM\s+["']?(\w+)["']?/i);return a?a[1]:null}function o_(_){let a={};for(let[p,r]of Object.entries(_))if(r&&typeof r=="object"&&"value"in r&&"type"in r){let{value:E,type:T}=r;if(E==null)a[p]=null,qe.debug(Ie,`[PARAM] ${p}: null`);else if(T==="blob"&&typeof E=="string")try{let K=atob(E),ye=new Uint8Array(K.length);for(let me=0;me<K.length;me++)ye[me]=K.charCodeAt(me);a[p]=ye,qe.debug(Ie,`[PARAM] ${p}: blob (${ye.length} bytes from base64)`)}catch(K){qe.error(Ie,`[PARAM] Failed to decode blob ${p}:`,K),a[p]=E}else a[p]=E,qe.debug(Ie,`[PARAM] ${p}: ${T} = ${typeof E=="string"&&E.length>50?E.substring(0,50)+"...":E}`)}else qe.warn(Ie,`[PARAM] ${p}: using legacy format (no type metadata)`),a[p]=r;return a}async function a_(_,a,p){let r=Bt.get(_);if(!r)throw new Error(`Database ${_} not open`);try{qe.debug(Ie,"Executing SQL:",a.substring(0,100));let E=o_(p),T=r.exec({sql:a,bind:Object.keys(E).length>0?E:void 0,returnValue:"resultRows",rowMode:"array"});qe.debug(Ie,"SQL executed successfully, rows:",T?.length||0);let K=[],ye=[];if(T&&T.length>0){let ce=r.prepare(a);try{let ke=ce.columnCount,Be=null;if(a.trim().toUpperCase().startsWith("SELECT")){let Ne=i_(a);Ne&&(Be=s_(r,Ne))}for(let Ne=0;Ne<ke;Ne++){let at=ce.getColumnName(Ne);K.push(at);let He=Be?.get(at),it="TEXT";if(He){let Je=He.toUpperCase();Je.includes("INT")?it="INTEGER":Je.includes("REAL")||Je.includes("DOUBLE")||Je.includes("FLOAT")?it="REAL":Je.includes("BLOB")?it="BLOB":it="TEXT"}else if(T.length>0&&T[0][Ne]!==null){let Je=T[0][Ne];typeof Je=="number"?it=Number.isInteger(Je)?"INTEGER":"REAL":typeof Je=="bigint"||typeof Je=="boolean"?it="INTEGER":(Je instanceof Uint8Array||ArrayBuffer.isView(Je))&&(it="BLOB")}ye.push(it)}}finally{ce.finalize()}}let me=0,Ce=0;(a.trim().toUpperCase().startsWith("INSERT")||a.trim().toUpperCase().startsWith("UPDATE")||a.trim().toUpperCase().startsWith("DELETE")||a.trim().toUpperCase().startsWith("CREATE"))&&(a.toUpperCase().includes("RETURNING")&&T&&T.length>0?me=T.length:me=r.changes(),Ce=r.lastInsertRowId);let $e={columnNames:K,columnTypes:ye,typedRows:{types:ye,data:Rr(T||[])},rowsAffected:me,lastInsertId:Number(Ce)};return Pr($e)}catch(E){throw qe.error(Ie,"SQL execution failed:",E),qe.error(Ie,"SQL:",a),E}}async function lr(_){let a=Bt.get(_);return a&&(a.close(),Bt.delete(_),Cr.delete(_),qe.info(Ie,`Closed database: ${_}`)),{success:!0}}async function l_(_){if(!ct||!nt)throw new Error("SQLite not initialized");try{if(Bt.has(_))return{rowsAffected:1};let a=`/databases/${_}`;if(nt.getFileNames)return{rowsAffected:(await nt.getFileNames()).includes(a)?1:0};try{return new nt.OpfsSAHPoolDb(a).close(),{rowsAffected:1}}catch{return{rowsAffected:0}}}catch(a){return qe.error(Ie,`Failed to check database ${_}:`,a),{rowsAffected:0}}}async function c_(_){if(!ct||!nt)throw new Error("SQLite not initialized");try{await lr(_);let a=`/databases/${_}`;return nt.unlink?nt.unlink(a)?qe.info(Ie,`\u2713 Deleted database: ${_}`):qe.debug(Ie,`Database ${_} was not in OPFS (already deleted or never created)`):qe.warn(Ie,"unlink not available, database may persist"),{success:!0}}catch(a){throw qe.error(Ie,`Failed to delete database ${_}:`,a),a}}async function __(_,a){if(!ct||!nt)throw new Error("SQLite not initialized");try{let p=`/databases/${_}`,r=`/databases/${a}`;if(qe.info(Ie,`Renaming database from ${_} to ${a}`),nt.getFileNames){let E=nt.getFileNames();qe.debug(Ie,`Files currently in OPFS (${E.length}):`,E),qe.debug(Ie,`Looking for: ${p}`),qe.debug(Ie,`File exists in OPFS: ${E.includes(p)}`)}qe.debug(Ie,"Ensuring databases are closed before rename operation"),await lr(_),await lr(a),qe.debug(Ie,`Renaming database file in OPFS: ${p} -> ${r}`);try{if(nt.renameFile(p,r),qe.info(Ie,`\u2713 Successfully renamed database from ${_} to ${a} (metadata-only, no file copy)`),nt.getFileNames){let E=nt.getFileNames();qe.debug(Ie,"Files after rename:",E)}}catch(E){throw qe.error(Ie,"Failed to rename database:",E),new Error(`Failed to rename database from ${_} to ${a}: ${E}`)}return{success:!0}}catch(p){throw qe.error(Ie,`Failed to rename database from ${_} to ${a}:`,p),p}}
